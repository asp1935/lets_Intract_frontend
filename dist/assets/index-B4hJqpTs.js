import{a as q,u as H,b as me,c as Q,d as bt,y as Gt,r as n,e as X,j as e,C as Kt,A as Qt,p as Yt,f as Ht,g as Xt,D as Jt,h as ct,E as je,i as Le,F as tt,k as gt,l as pe,m as ft,n as Pe,o as jt,q as Zt,N as te,H as es,B as yt,s as ye,t as Ne,v as we,U as Nt,S as ts,w as Be,x as mt,z as ss,G as as,I as rs,J as ls,O as st,K as at,P as ns,L as et,M as os,Q as is,X as Me,R as ze,T as wt,V as ds,W as vt,Y as St,Z as Ct,_ as cs,$ as ms,a0 as us,a1 as xs,a2 as hs,a3 as ut,a4 as ps,a5 as bs,a6 as gs,a7 as fs,a8 as B,a9 as js,aa as ys,ab as Ns,ac as ws,ad as vs,ae as Ss,af as Cs}from"./vendor-r1Zy3H5t.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(l){if(l.ep)return;l.ep=!0;const d=s(l);fetch(l.href,d)}})();const Pt="http://13.201.22.86:3000/api/v1",Ps=async t=>{var a,s;try{return(await q.post(`${Pt}/otp/send-otp`,{mobile:t},{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed To Send OTP"}},Fs=async()=>{var t,a;try{return(await q.get(`${Pt}/otp/get-otps`,{withCredentials:!0})).data}catch(s){throw((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Faild to Fetch OPTs"}},Ds=()=>me({queryKey:["getotp"],queryFn:Fs,staleTime:5*60*1e3,retry:!1}),_e=()=>H({mutationFn:t=>Ps(t),onSuccess:t=>{var a;console.log("OTP Sent",(a=t==null?void 0:t.data)==null?void 0:a.otp)}}),Ee="http://13.201.22.86:3000/api/v1",ks=async(t,a)=>{var s,r;try{return(await q.post(`${Ee}/admin/login-admin`,{email:t,password:a},{withCredentials:!0})).data}catch(l){const d=((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Login failed. Please check your credentials.";throw new Error(d)}},As=async()=>(await q.get(`${Ee}/admin/current-user`,{withCredentials:!0})).data,Es=async t=>{var a,s;try{const{name:r,email:l,role:d,permissions:o,password:h}=t;return(await q.post(`${Ee}/admin/create-useradmin`,{name:r,email:l,role:d,permissions:o,password:h},{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Registration failed."}},Ts=async(t=null,a=null)=>{var s,r;try{let l=`${Ee}/admin/get-users`;return t?l+=`/${t}`:a&&(l+=`?roleCategory=${a}`),(await q.get(l,{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Something Went Wrong"}},Ms=async(t,a)=>{var s,r;try{const{name:l,email:d,permissions:o}=a;return(await q.patch(`${Ee}/admin/update-admin/${t}`,{name:l,email:d,permissions:o},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Update Details"}},$s=async t=>{var a,s;try{return(await q.delete(`${Ee}/admin/delete-admin/${t}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Delete "}},Is=async()=>{var t,a;try{return(await q.get(`${Ee}/admin/logout-admin`,{withCredentials:!0})).data}catch(s){throw((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Something went Wrong"}},We=(t=null,a=null)=>me({queryKey:["admin",t,a],queryFn:()=>Ts(t,a),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),Us=()=>{const t=Q();return H({mutationFn:a=>Es(a),onSuccess:()=>{t.invalidateQueries(["admin"])}})},Rs=()=>{const t=Q();return H({mutationFn:({adminId:a,updatedData:s})=>Ms(a,s),onSuccess:()=>{t.invalidateQueries(["admin"])}})},qs=()=>{const t=Q();return H({mutationFn:a=>$s(a),onSuccess:()=>{t.invalidateQueries(["admin"])}})},De="http://13.201.22.86:3000/api/v1",Ls=async t=>{var a,s;try{const r=t?`${De}/associate/get-associate/${t}`:`${De}/associate/get-associate`;return(await q.get(r,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to fetch associate(s)"}},_s=async t=>{var a,s;try{const{name:r,email:l,mobile:d,state:o,district:h,taluka:i,otp:x}=t;return(await q.post(`${De}/associate/add-associate`,{name:r,email:l,mobile:d,state:o,district:h,taluka:i,otp:x},{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Registration Failed. Please check Fields"}},Os=async(t,a)=>{var s,r;try{const{name:l,email:d,mobile:o,state:h,district:i,taluka:x}=a;return(await q.patch(`${De}/associate/update-associate/${t}`,{name:l,email:d,mobile:o,state:h,district:i,taluka:x},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Update Details"}},Bs=async t=>{var a,s;try{return(await q.delete(`${De}/associate/delete-associate/${t}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Delete Associate"}},zs=async t=>{var a,s;try{const r=new URLSearchParams;return t&&r.append("userType",t),(await q.get(`${De}/associate/get-refferal-details?${r.toString()}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Fetch Details"}},Ws=async(t=null,a=0)=>{var s,r;try{const l=t?`${De}/associate/update-commission/${t}`:`${De}/associate/update-commission/`;return(await q.patch(l,{commission:a},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Update Commission"}},Ie=(t=null)=>me({queryKey:["associate",t],queryFn:()=>Ls(t),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),Vs=()=>{const t=Q();return H({mutationFn:a=>_s(a),onSuccess:()=>{t.invalidateQueries(["associate","associateRef"])}})},Gs=()=>{const t=Q();return H({mutationFn:({associateId:a,updatedData:s})=>Os(a,s),onSuccess:()=>{t.invalidateQueries(["associate","associateRef"])}})},Ks=()=>{const t=Q();return H({mutationFn:a=>Bs(a),onSuccess:()=>{t.invalidateQueries(["associate","associateRef"])}})},Ft=t=>me({queryKey:["associateRef",t],queryFn:()=>zs(t),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),Qs=()=>{const t=Q();return H({mutationFn:({associateId:a,commission:s})=>Ws(a,s),onSuccess:()=>{t.invalidateQueries(["associate","associateRef"])}})},fe="http://13.201.22.86:3000/api/v1",Ys=async(t=null,a=null,s=null)=>{var r,l;try{const d=new URLSearchParams;a&&d.append("role",a),s&&d.append("type",s);const o=t?`${fe}/user/get-user-details/${t}`:`${fe}/user/get-user-details?${d.toString()}`;return(await q.get(o,{withCredentials:!0})).data}catch(d){throw((l=(r=d.response)==null?void 0:r.data)==null?void 0:l.message)||"Something Went Wrong"}},Hs=async(t,a=null,s=null)=>{var r,l,d,o;try{const{name:h,email:i,mobile:x,state:c,district:m,taluka:j,type:u,password:b,otp:y}=t,g=await q.post(`${fe}/user/register-user`,{name:h,email:i,mobile:x,state:c,district:m,taluka:j,type:u,password:b,otp:y},{withCredentials:!0}),S=g.data.data._id;if(a){const f=a==="staff"?"/add-staff":"/add";try{await q.post(`${fe}/referral${f}`,{userId:S,id:s},{withCredentials:!0})}catch(A){throw await q.delete(`${fe}/user/delete-user/${S}`,{withCredentials:!0}),((l=(r=A.response)==null?void 0:r.data)==null?void 0:l.message)||"Referral Failed. User removed."}}return g.data}catch(h){throw((o=(d=h.response)==null?void 0:d.data)==null?void 0:o.message)||"Registration Failed. Please check Fields"}},Xs=async(t,a)=>{var s,r;try{const{name:l,email:d,mobile:o,state:h,district:i,taluka:x,type:c}=a;return(await q.patch(`${fe}/user/update-user/${t}`,{name:l,email:d,mobile:o,state:h,district:i,taluka:x,type:c},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Update Details"}},Js=async t=>{var a,s;try{return(await q.delete(`${fe}/user/delete-user/${t}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Faild To Delete"}},Zs=async(t,a)=>{var s,r;try{return(await q.patch(`${fe}/user/update-password/${t}`,{newPassword:a},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Faild to Update Password"}},ea=async t=>{var a,s;try{return(await q.patch(`${fe}/user/delete-userkey/${t}`,{},{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed To Reset Key"}},ta=async(t,a)=>{try{return(await q.patch(`${fe}/user/update-verification/${t}`,{verified:a},{withCredentials:!0})).data}catch(s){throw s.response.data.message||"Failed To Update Verifiaction"}},sa=async(t=null)=>{try{const a=t?`${fe}/userplan/get-userPlan-details/${t}`:`${fe}/userplan/get-userPlan-details/`;return(await q.get(a,{withCredentials:!0})).data}catch(a){throw a.response.data.message||"Failed To Fetch Details"}},aa=async(t,a)=>{var s,r;try{return(await q.post(`${fe}/userplan/update-plan`,{planId:t,userId:a},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||" Failed to Add User Plan."}},ve=(t=null,a=null,s=null)=>me({queryKey:["user",t,a,s],queryFn:()=>Ys(t,a,s),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),Dt=()=>{const t=Q();return H({mutationFn:({userData:a,referBy:s,referId:r})=>Hs(a,s,r),onSuccess:()=>{t.invalidateQueries(["user"])}})},kt=()=>{const t=Q();return H({mutationFn:({userId:a,updatedData:s})=>Xs(a,s),onSuccess:()=>{t.invalidateQueries(["user"])}})},Ve=()=>{const t=Q();return H({mutationFn:a=>Js(a),onSuccess:()=>{t.invalidateQueries(["user"])}})},At=()=>{const t=Q();return H({mutationFn:({userId:a,newPassword:s})=>Zs(a,s),onSuccess:()=>{t.invalidateQueries(["user"])}})},Ge=()=>{const t=Q();return H({mutationFn:a=>ea(a),onSuccess:()=>{t.invalidateQueries(["user"])}})},Ke=()=>{const t=Q();return H({mutationFn:({userId:a,status:s})=>ta(a,s),onSuccess:()=>{t.invalidateQueries(["user"])}})},Qe=(t=null)=>me({queryKey:["userplan",t],queryFn:()=>sa(t),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),ra=()=>{const t=Q();return H({mutationFn:({planId:a,userId:s})=>aa(a,s),onSuccess:()=>{t.invalidateQueries(["userplan"])}})},Et=bt({name:"toast",initialState:null,reducers:{showToast:(t,a)=>{const{message:s,type:r="success"}=a.payload;Gt[r](s,{toastId:s})}}}),{showToast:p}=Et.actions,la=Et.reducer,Tt="http://115.124.105.220",na=async()=>{try{return(await q.post(`${Tt}/API/GetAllDistricts`)).data}catch(t){throw t||"Internal Server Error"}},oa=async t=>{try{return(await q.post(`${Tt}/API/GetTalukasOfDistrict?distcode=${t}`)).data}catch(a){throw a||"Internal Server Error"}},rt=()=>me({queryKey:["district"],queryFn:na,staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),lt=t=>me({queryKey:["taluka",t],queryFn:()=>oa(t),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),ia=()=>{var se;const[t,a]=n.useState({name:"",email:"",mobile:"",password:"",district:"",taluka:"",state:"",otp:"",type:"political"}),[s,r]=n.useState({}),[l,d]=n.useState([]),[o,h]=n.useState(""),[i,x]=n.useState(""),[c,m]=n.useState(null),[j,u]=n.useState([]),[b,y]=n.useState([]),[g,S]=n.useState([]),[f,A]=n.useState([]),F=X(),M=_e(),P=Dt(),{data:R}=ve(null,"user","political"),{data:E}=We(null,"user"),{data:U}=Ie(),L=["Maharastra"],{data:D}=rt(),{data:T}=lt((se=g==null?void 0:g.find(w=>(w==null?void 0:w.districtnameenglish)===(t==null?void 0:t.district)))==null?void 0:se.districtcode);n.useEffect(()=>{(D==null?void 0:D.length)>0&&S(D)},[D]),n.useEffect(()=>{(T==null?void 0:T.length)>0&&A(T)},[T]),n.useEffect(()=>{(R==null?void 0:R.data.length)>0&&d(R.data)},[R]),n.useEffect(()=>{var K;if(!i){u((E==null?void 0:E.data)||[]);return}const w=E.data.length>0?(K=E==null?void 0:E.data)==null?void 0:K.filter(le=>{var re,W;return le.role==="user"&&(((re=le.name)==null?void 0:re.toLowerCase().includes(i.toLowerCase()))||((W=le.mobile)==null?void 0:W.includes(i)))}):[];u(w)},[E,i]),n.useEffect(()=>{if((U==null?void 0:U.data.length)>0){const w=U.data.filter(K=>{var le,re;return((le=K.name)==null?void 0:le.toLowerCase().includes(i.toLowerCase()))||((re=K.mobile)==null?void 0:re.includes(i))});y(w)}},[U,i]);const $=()=>{let w={};if(t.name.trim()||(w.name="Name is required"),t.email?/\S+@\S+\.\S+/.test(t.email)||(w.email="Email is not valid"):w.email="Email is required",t.mobile?/^\d{10}$/.test(t.mobile)||(w.mobile="Mobile number must be exactly 10 digits"):w.mobile="Mobile number is required",t.otp?/^\d{4}$/.test(t.otp)||(w.otp="OTP must be exactly 6 digits"):w.otp="OTP is required",t.password?t.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",t.state||(w.state="State is required"),t.district||(w.district="District is required"),t.taluka||(w.taluka="Taluka is required"),!c){F(p({message:"Select Referance",type:"warn"}));return}return r(w),Object.keys(w).length===0},k=w=>{a({...t,[w.target.name]:w.target.value})},V=w=>{w.preventDefault(),$()&&P.mutate({userData:t,referBy:o,referId:c._id},{onSuccess:()=>{F(p({message:" Registered Successfully!"})),a({name:"",email:"",mobile:"",password:"",district:"",taluka:"",state:"",otp:"",type:"political"}),r({}),h(""),x(""),m(null)},onError:K=>F(p({message:K,type:"error"}))})},G=w=>{h(w.target.value),w.target.value===""&&(x(""),m(null))},ie=w=>{x(w.target.value)},J=w=>{m(w),x("")},O=()=>{if(!t.mobile){F(p({message:"Mobile number is required",type:"warn"}));return}if(!/^\d{10}$/.test(t.mobile)){F(p({message:"Mobile number must be 10 digits",type:"warn"}));return}M.mutate(t.mobile,{onSuccess:()=>{F(p({message:"OTP Sent to Mobile No",type:"success"}))},onError:w=>{F(p({message:w,type:"error"}))}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Form max-w-xl mx-auto mt-10 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Add Politician"}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Politician Name",value:t.name,onChange:k,className:"w-full rounded p-2 border border-[#640D5F]"}),s.name&&e.jsx("p",{className:"text-red-400 text-sm",children:s.name}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:k,className:"w-full rounded p-2 border border-[#640D5F]"}),s.email&&e.jsx("p",{className:"text-red-400 text-sm",children:s.email}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:t.mobile,onChange:k,className:"flex-1/2 rounded p-2 border border-[#640D5F]"}),e.jsx("button",{type:"button",onClick:O,className:"w-1/3 bg-[#e762e1] text-white cursor-pointer p-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:M.isPending,children:M.isPending?"Sending OTP":"Get OTP"}),e.jsx("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:t.otp,onChange:k,className:"w-1/3 rounded p-2 border border-[#640D5F]"})]}),s.mobile&&e.jsx("p",{className:"text-red-400 text-sm",children:s.mobile}),s.otp&&e.jsx("p",{className:"text-red-400 text-sm",children:s.otp})," ",e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:t.password,onChange:k,className:"w-full rounded p-2 border border-[#640D5F]"}),s.password&&e.jsx("p",{className:"text-red-400 text-sm",children:s.password}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{name:"state",value:t.state,onChange:k,className:"w-1/3 rounded p-2 border border-[#640D5F]",children:[e.jsx("option",{value:"",children:"State"}),L.map(w=>e.jsx("option",{value:w,children:w},w))]}),s.state&&e.jsx("p",{className:"text-red-400 text-sm",children:s.state}),e.jsxs("select",{name:"district",value:t.district,onChange:k,className:"w-1/3 rounded p-2 border border-[#640D5F]",disabled:!t.state,children:[e.jsx("option",{value:"",children:"District"}),t.state&&(g==null?void 0:g.map(w=>e.jsx("option",{value:w.districtnameenglish,children:w.districtnameenglish},w.districtcode)))]}),s.district&&e.jsx("p",{className:"text-red-400 text-sm",children:s.district}),e.jsxs("select",{name:"taluka",value:t.taluka,onChange:k,className:"w-1/3 p-2 rounded border border-[#640D5F]",disabled:!t.district,children:[e.jsx("option",{value:"",children:"Taluka"}),t.district&&(f==null?void 0:f.map(w=>e.jsx("option",{value:w.subdistrictnameenglish,children:w.subdistrictnameenglish},w.subdistrictcode)))]}),s.taluka&&e.jsx("p",{className:"text-red-400 text-sm",children:s.taluka})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"font-bold",children:"Referenced By"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"associates",checked:o==="associates",onChange:G}),"Associates"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"staff",checked:o==="staff",onChange:G}),"Staff"]})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsxs("div",{className:"w-1/2 pr-2",children:[o==="associates"&&e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search by Name or Mobile No.",value:i,onChange:ie,className:"w-full rounded p-2 border border-[#640D5F]"}),i&&b.length>0&&e.jsx("ul",{className:"mt-2 border border-[#640D5F] rounded",children:b.map(w=>e.jsxs("li",{onClick:()=>J(w),className:"p-2 cursor-pointer hover:bg-[#ebace8]",children:[w.name," (Mobile: ",w.mobile,")"]},w.id))}),i&&b.length===0&&e.jsx("p",{className:"text-red-500 mt-2",children:"No matching associates found."})]}),o==="staff"&&e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search by Name or Mobile No.",value:i,onChange:ie,className:"w-full rounded p-2 border border-[#640D5F]"}),i&&j.length>0?e.jsx("ul",{className:"mt-2 border border-[#640D5F] rounded",children:j.map(w=>e.jsx("li",{onClick:()=>J(w),className:"p-2 cursor-pointer hover:bg-[#ebace8]",children:w.name},w._id))}):e.jsx("p",{className:"text-red-500 mt-2",children:"No matching staff found."})]})]}),e.jsxs("div",{className:"w-1/2 pl-2",children:[c&&e.jsx("p",{className:"mt-2",children:c.name}),s.referencedBy&&e.jsx("p",{className:"text-red-400 text-sm",children:s.referencedBy})]})]})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{type:"submit",className:"w-40 bg-[#aa1ba3] hover:bg-[#640D5F] font-bold text-white p-2 mt-5 rounded-md disabled:",disabled:P.isPending,children:P.isPending?"Adding...":"Add Politician"})})]})]}),e.jsx("div",{children:l.length>0&&e.jsxs("table",{className:"mt-6 w-full border-collapse border border-[#aa1ba3] rounded",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ebace8]",children:[e.jsx("th",{className:"border border-[#aa1ba3] p-2",children:"Sr. No."}),e.jsx("th",{className:"border border-[#aa1ba3] p-2",children:"Name"}),e.jsx("th",{className:"border border-[#aa1ba3] p-2",children:"Email"}),e.jsx("th",{className:"border border-[#aa1ba3] p-2",children:"mobile"})]})}),e.jsx("tbody",{children:l.map((w,K)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#aa1ba3] p-2",children:K+1}),e.jsx("td",{className:"border border-[#aa1ba3] p-2",children:w.name}),e.jsx("td",{className:"border border-[#aa1ba3] p-2",children:w.email}),e.jsx("td",{className:"border border-[#aa1ba3] p-2",children:w.mobile})]},K))})]})})]})},nt="http://13.201.22.86:3000/api/v1",Mt=async t=>{var a,s;try{return(await q.get(`${nt}/user/get-user-members/${t}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed To Fetch Details"}},da=async(t,a)=>{var s,r;try{const{name:l,mobile:d,password:o,otp:h}=a;return(await q.post(`${nt}/user/add-member/${t}`,{name:l,mobile:d,password:o,otp:h},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Add Member"}},ca=async(t,a)=>{var s,r;try{const{name:l,mobile:d}=a;return(await q.patch(`${nt}/user/update-member/${t}`,{name:l,mobile:d},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Update Member"}},$t=()=>{const t=Q();return H({mutationFn:({userId:a,memberData:s})=>da(a,s),onSuccess:()=>{t.invalidateQueries(["member"])}})},It=()=>{const t=Q();return H({mutationFn:({memberId:a,memberData:s})=>ca(a,s),onSuccess:()=>{t.invalidateQueries(["member"])}})},ma=()=>{const[t,a]=n.useState(""),[s,r]=n.useState(null),[l,d]=n.useState(""),[o,h]=n.useState(!1),[i,x]=n.useState({name:"",mobile:"",otp:"",password:"member@123"}),[c,m]=n.useState(!0),[j,u]=n.useState(null),[b,y]=n.useState({name:"",mobile:""}),[g,S]=n.useState(null),[f,A]=n.useState(!1),[F,M]=n.useState(""),[P,R]=n.useState(""),[E,U]=n.useState(""),[L,D]=n.useState(!1),[T,$]=n.useState(!1),[k,V]=n.useState(null),[G,ie]=n.useState({}),[J,O]=n.useState([]),[se,w]=n.useState([]),[K,le]=n.useState([]),[re,W]=n.useState(null),I=X(),ne=_e(),{data:ue}=Qe(),C=$t(),v=It(),ae=Ve(),oe=Ge(),xe=Ke();n.useEffect(()=>{if((ue==null?void 0:ue.data.length)>0){const N=ue.data.filter(z=>{var Y,he;return z.type==="political"&&((he=(Y=z==null?void 0:z.userPlans)==null?void 0:Y.planDetails)==null?void 0:he.addMembers)===!0});O(N)}},[ue]),n.useEffect(()=>{if(!F){w(J||[]);return}const N=J.length>0?J.filter(z=>{var Y,he;return((Y=z.name)==null?void 0:Y.toLowerCase().includes(F.toLowerCase()))||((he=z.mobile)==null?void 0:he.includes(F))}):[];w(N)},[J,F]);const _=async N=>{try{const z=await Mt(N);z.data?(W(z.data),A(!0)):I(p({message:"No data found for this user."}))}catch(z){I(p({message:z.message}))}};n.useEffect(()=>{if(!P){le(re||[]);return}const N=re.length>0?re.filter(z=>z.name.toLowerCase().includes(P.toLowerCase())||z.mobile.toLowerCase().includes(P.toLowerCase())):[];le(N)},[re,P]);const ce=N=>a(N.target.value),Z=(N,z)=>{if(b.name===""||!/^\d{10}$/.test(b.mobile)){I(p({message:"All Valid Fields Are Required",type:"error"}));return}v.mutate({memberId:N,memberData:b},{onSuccess:()=>{u(null),y({name:"",mobile:""}),I(p({message:"Member Details Updated"})),_(z)},onError:Y=>I(p({message:Y,type:"error"}))})},ee=N=>{r(N),d(N.userPlans.planDetails),a(""),h(!1)},be=()=>{r(null),d(""),A(!1)},Re=()=>{h(!o)},de=N=>{x({...i,[N.target.name]:N.target.value})},Te=()=>{let N={};return i.name.trim()||(N.name="Name is required"),i.mobile?/^\d{10}$/.test(i.mobile)||(N.mobile="Mobile number must be exactly 10 digits"):N.mobile="Mobile number is required",i.password?i.password.length<6&&(N.password="Password must be at least 6 characters"):N.password="Password is required",i.otp?/^\d{4}$/.test(i.otp)||(N.otp="OTP must be exactly 4 digits"):N.otp="OTP is required",ie(N),Object.keys(N).length===0},ke=()=>{Te()&&C.mutate({userId:s._id,memberData:i},{onSuccess:()=>{x({name:"",mobile:"",otp:"",password:"member@123"}),h(!1),I(p({message:"New Member Added Successfully"}))},onError:N=>I(p({message:N,type:"error"}))})},Ce=N=>{y({...b,[N.target.name]:N.target.value})},Ae=(N,z,Y)=>{switch(N){case"edit":u(z),y(Y);break;case"delete":V(Y),D(!0);break;case"reset":V(Y),$(!0);break}},He=N=>{xe.mutate({userId:N._id,status:!N.verified},{onSuccess:()=>{_(N.userId),I(p({message:"Member Verifiaction Updated"}))},onError:z=>I(p({message:z,type:"error"}))})},Xe=()=>{if(!i.mobile){I(p({message:"Mobile number is required",type:"warn"}));return}if(!/^\d{10}$/.test(i.mobile)){I(p({message:"Mobile number must be 10 digits",type:"warn"}));return}ne.mutate(i.mobile,{onSuccess:()=>{I(p({message:"OTP Sent to Mobile No",type:"success"}))},onError:N=>{I(p({message:N,type:"error"}))}})},Je=()=>{ae.mutate(k._id,{onSuccess:()=>{D(!1),_(k.userId),V(null),I(p({message:"Member Deleted Successfully"}))},onError:N=>I(p({message:N,type:"error"}))})},Ze=()=>{oe.mutate(k._id,{onSuccess:()=>{$(!1),_(k.userId),V(null),I(p({message:"Member Key has been reset"}))},onError:N=>I(p({message:N,type:"error"}))})};return e.jsxs("div",{className:"Form  flex flex-col items-center h-screen",children:[e.jsxs("div",{className:"flex gap-6 w-full",children:[e.jsxs("div",{className:`p-6 py-10 flex flex-col justify-center items-center rounded-lg ${s?"w-2/3":"w-full"}`,children:[e.jsx("h1",{className:"text-3xl font-bold text-[#640D5F] mb-6",children:"Member Management"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",value:t,onChange:ce,placeholder:"Search Politician...",className:"p-2 border rounded-lg w-150"}),t&&e.jsx("div",{className:"absolute bg-white border mt-1 w-150 shadow-lg rounded-lg max-h-60 overflow-y-auto",children:J.length===0?e.jsx("div",{className:"p-2 text-gray-500",children:"No users found"}):J.filter(N=>N.name.toLowerCase().includes(t.toLowerCase())).map((N,z)=>e.jsx("div",{onClick:()=>ee(N),className:"p-2 cursor-pointer hover:bg-gray-200",children:N.name},z))})]}),s&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 ",children:[e.jsxs("p",{className:"text-green-600 font-semibold",children:["Selected Politician: ",s.name]}),e.jsx("button",{onClick:be,className:"text-red-500 hover:text-red-700",style:{boxShadow:"none"},children:"Clear"})]}),e.jsx("div",{className:"flex space-x-4 mt-10",children:e.jsx("button",{style:{boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},className:`bg-[#aa1ba3] text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-[#640D5F] transition duration-200 ${s?"":"opacity-50 cursor-not-allowed"}`,onClick:Re,disabled:!s,children:"➕ Add Member"})}),o&&e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-[#faf1f9] w-100",style:{boxShadow:"rgba(6, 24, 44, 0.4) 0px 0px 0px 2px, rgba(6, 24, 44, 0.65) 0px 4px 6px -1px, rgba(255, 255, 255, 0.08) 0px 1px 0px inset"},children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Add New Member"}),e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:i.name,onChange:de,className:"w-full p-2 mb-2 border rounded"}),G.name&&e.jsx("p",{className:"text-red-400 text-sm",children:G.name}),e.jsx("input",{type:"mobile",name:"mobile",placeholder:"Mobile No.",value:i.mobile,onChange:de,className:"w-full p-2 mb-2 border rounded"}),G.mobile&&e.jsx("p",{className:"text-red-400 text-sm",children:G.mobile}),e.jsxs("div",{className:"flex items-center space-x-2 my-2 mt-2",children:[e.jsx("button",{className:"bg-blue-500 w-1/2 text-white px-4 py-2 rounded hover:bg-blue-600 shadow-md transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",onClick:Xe,disabled:ne.isPending,children:ne.isPending?"Sending OTP":"Get OTP"}),e.jsx("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:i.otp,onChange:de,className:"w-1/2 p-2 border rounded"}),G.otp&&e.jsx("p",{className:"text-red-400 text-sm",children:G.otp})]}),e.jsx("label",{htmlFor:"password",children:"Default Password"}),e.jsx("input",{type:"text",name:"password",value:i.password,onChange:de,className:"w-full p-2 mb-2 border rounded"}),G.password&&e.jsx("p",{className:"text-red-400 text-sm",children:G.password}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("button",{className:"bg-[#aa1ba3] text-white px-4 py-2 rounded hover:bg-green-600 shadow-md transition-transform transform hover:scale-105",onClick:ke,disabled:C.isPending,children:C.isPending?"Submitting":"Submit"})})]})]}),s&&e.jsxs("div",{className:"bg-[#bd4fb7] p-6 rounded-lg shadow-md w-1/3 h-64 text-white flex flex-col justify-center items-center",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Plan Information"}),l&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.name}),e.jsxs("p",{className:"text-xl",children:[e.jsxs("span",{className:"text-green-400",children:[l.validity," Days"]})," Validity"]})]})]})]}),e.jsxs("div",{className:"mt-6 w-full p-4 rounded-lg overflow-x-auto",children:[f&&g&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-bold",children:["Members under ",g.name]}),e.jsx("button",{onClick:()=>{A(!1),S(null)},className:"text-red-500 hover:text-red-700 p-2 rounded-xl",style:{boxShadow:"none",border:"2px solid red"},children:"✖ Close"})]}),e.jsx("input",{type:"text",value:P,onChange:N=>R(N.target.value),placeholder:"Search Members...",className:"p-1 border rounded-lg w-70 mb-4 center mt-2"}),K&&K.length>0?e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ebace8]",children:[e.jsx("th",{className:"border px-4 py-2",children:"Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Mobile Number"}),e.jsx("th",{className:"border px-4 py-2",children:"Verified"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:K.map((N,z)=>{const Y=K.findIndex(he=>he._id===N._id);return e.jsxs("tr",{className:"text-center hover:bg-gray-100 h-16",children:[e.jsx("td",{className:"border px-4 py-2",children:j===Y?e.jsx("input",{type:"text",name:"name",value:b.name,onChange:Ce,className:"p-1 border rounded"}):N.name}),e.jsx("td",{className:"border px-4 py-2",children:j===Y?e.jsx("input",{type:"mobile",name:"mobile",value:b.mobile,onChange:Ce,className:"p-1 border rounded"}):N.mobile}),e.jsx("td",{className:"border px-4 py-2",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.verified,onChange:()=>He(N),className:"sr-only"}),e.jsx("div",{className:`w-9 h-4 rounded-full ${N.verified?"bg-green-500":"bg-gray-500"} shadow-inner transition-colors duration-200`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-200 ${N.verified?"translate-x-5":"translate-x-0"}`})})]})}),e.jsx("td",{className:"border px-4 py-2",children:j===Y?e.jsx("button",{className:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 shadow-md transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Z(N._id,N.userId),disabled:v.isPending,children:v.isPending?"Saving...":"Save"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 shadow-md transition-transform transform hover:scale-105",onClick:()=>Ae("edit",Y,N),children:"Edit"}),e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 shadow-md transition-transform transform hover:scale-105 ml-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Ae("delete",Y,N),disabled:ae.isPending,children:ae.isPending?"Deleting":"Delete"}),e.jsx("button",{className:"bg-[#0dcaf0] text-white px-2 py-1 rounded hover:bg-[#0dcaf0d4] shadow-md transition-transform transform hover:scale-105 ml-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Ae("reset",Y,N),disabled:oe.isPending,children:oe.isPending?"Resetting...":"Reset Key"})]})})]},z)})})]}):e.jsxs("p",{className:"text-center text-gray-500",children:["No Members found for ",g.name,"."]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("h2",{className:"text-lg font-bold",children:"Politicians"})}),c&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:F,onChange:N=>M(N.target.value),placeholder:"Search Politician...",className:"p-1 border rounded-lg w-70 mb-4"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ebace8]",children:[e.jsx("th",{className:"border px-4 py-2",children:"Politicians"}),e.jsx("th",{className:"border px-4 py-2",children:"Member Count"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:se.map(N=>e.jsxs("tr",{className:"text-center hover:bg-gray-100 h-16",children:[e.jsx("td",{className:"border px-4 py-2",children:N.name}),e.jsx("td",{className:"border px-4 py-2",children:N.memberCount||0}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("button",{className:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 shadow-md transition-transform transform hover:scale-105",onClick:()=>{S(N),_(N._id)},children:"View"})})]},N._id))})]})]})]})]}),L&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-2",children:"Enter 'confirm' to delete this Member:"}),e.jsx("input",{type:"text",value:E,onChange:N=>U(N.target.value),className:"border rounded p-2 mb-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:Je,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Confirm"}),e.jsx("button",{onClick:()=>D(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})]})}),T&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Reset Key"}),e.jsx("p",{className:"mb-2",children:"Are you sure you want to reset the Member Key?"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:Ze,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Confirm"}),e.jsx("button",{onClick:()=>$(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})]})})]})},ua=()=>{const[t,a]=n.useState(""),[s,r]=n.useState([]),[l,d]=n.useState([]),[o,h]=n.useState(null),[i,x]=n.useState({name:"",email:"",mobile:"",state:"",district:"",taluka:"",type:""}),[c,m]=n.useState(!1),[j,u]=n.useState(null),[b,y]=n.useState(""),[g,S]=n.useState(!1),[f,A]=n.useState(!1),[F,M]=n.useState(null),[P,R]=n.useState(""),E="reset@123",U=X(),L=kt(),D=Ve(),T=At(),$=Ge(),k=Ke(),{data:V}=ve(null,"user","political");n.useEffect(()=>{V&&(r(V.data),d(V))},[V]),n.useEffect(()=>{d(s)},[s]);const G=W=>{const I=W.target.value.toLowerCase();a(I),d(s.length>0?s.filter(ne=>ne.name.toLowerCase().includes(I)):[])},ie=W=>{h(W._id),x({...W})},J=W=>{x({...i,[W.target.name]:W.target.value})},O=()=>{L.mutate({userId:o,updatedData:i},{onSuccess:()=>{h(null),U(p({message:"Politicin Details Updated"}))},onError:W=>U(p({message:W,type:"error"}))})},se=W=>{u(W),m(!0)},w=()=>{if(b.toLowerCase()!=="confirm"){alert("Please enter 'confirm' to delete the record.");return}D.mutate(j,{onSuccess:()=>{m(!1),u(null),y(""),U(p({message:"Politician Deleted Successfully"}))},onError:W=>U(p({message:W,type:"error"}))})},K=W=>{$.mutate(W,{onSuccess:()=>{U(p({message:"Politician key has been reset"}))}})},le=(W,I)=>{k.mutate({userId:W,status:!I},{onSuccess:()=>{U(p({message:"Politician Verifiaction Updated"}))},onError:ne=>U(p({message:ne,type:"error"}))})},re=()=>{T.mutate({userId:F,newPassword:P},{onSuccess:()=>{A(!1),R(""),M(null),U(p({message:"Password Updated Successfully"}))},onError:W=>U(p({message:W,type:"error"}))})};return e.jsxs("div",{className:"Form p-6 mt-10 mx-auto rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-[#640D5F] mb-6",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Politician Management"}),e.jsx("input",{type:"search",placeholder:"Search by Name",value:t,onChange:G,className:"w-full p-3 border border-[#640D5F] text-black rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-[#640D5F]"}),o&&e.jsxs("div",{className:"mb-6 p-4 bg-purple-100 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#640D5F] mb-4 text-center",children:"Edit Politician"}),e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:i.name,onChange:J,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:i.email,onChange:J,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"text",name:"mobile",placeholder:"Mobile",value:i.mobile,onChange:J,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"text",name:"state",placeholder:"State",value:i.state,onChange:J,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"text",name:"district",placeholder:"District",value:i.district,onChange:J,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"text",name:"taluka",placeholder:"Taluka",value:i.taluka,onChange:J,className:"w-full p-3 border rounded-lg mb-2"}),e.jsxs("select",{name:"type",value:i.type,onChange:J,className:"w-full p-3 rounded border border-[#640D5F]",disabled:!i.type,children:[e.jsx("option",{value:"business",children:"Business"},"business"),e.jsx("option",{value:"political",children:"Political"},"political")]}),e.jsx("div",{className:"flex mt-3 justify-center w-full",children:e.jsx("button",{onClick:O,className:"w-60 bg-[#9b1694] text-white p-3 rounded-lg font-bold hover:bg-[#9b1690]",children:"Update"})})]}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300 shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#b017a8] text-white uppercase text-sm leading-normal",children:[e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Name"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Mobile"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Actions"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Verified"})]})}),e.jsx("tbody",{className:"text-gray-900 text-sm font-light",children:l.length>0?l.map((W,I)=>e.jsxs("tr",{className:`border border-[#640D5F] ${I%2===0?"bg-gray-100":"bg-white"} hover:bg-gray-200 transition`,children:[e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:W.name}),e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:W.mobile}),e.jsxs("td",{className:"p-3 border border-[#640D5F] text-center",children:[e.jsx("button",{onClick:()=>ie(W),className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-800 transition mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>se(W._id),className:"bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-700 transition mr-2",children:"Delete"}),e.jsx("button",{onClick:()=>{M(W._id),A(!0)},className:"bg-[#A0C878] text-white px-3 py-1 rounded-lg hover:bg-[#8eb16ae5] transition mr-2",children:"Update Password"}),e.jsx("button",{onClick:()=>K(W._id),className:"bg-[#54B4D3] text-white px-3 py-1 rounded-lg hover:bg-[#5a8fa1] transition",children:"Reset Key"})]}),e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:W.verified,onChange:()=>le(W._id,W.verified)}),e.jsx("span",{className:"slider round"})]})})]},W._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"p-3 text-center text-gray-500",children:"No politicians found."})})})]}),c&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-2",children:"Enter 'confirm' to delete this politician:"}),e.jsx("input",{type:"text",value:b,onChange:W=>y(W.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),e.jsx("button",{onClick:w,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Confirm"}),e.jsx("button",{onClick:()=>m(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})}),g&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reset Successful"}),e.jsxs("p",{className:"mb-4",children:["The password has been reset to ",e.jsx("strong",{children:E}),"."]}),e.jsx("button",{onClick:()=>S(!1),className:"bg-[#54B4D3] text-white px-4 py-2 rounded hover:bg-[#5c91a3] transition",children:"Close"})]})}),f&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Password"}),e.jsx("input",{type:"password",placeholder:"New Password",value:P,onChange:W=>R(W.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),e.jsx("button",{onClick:re,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Update Password"}),e.jsx("button",{onClick:()=>A(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})})]})},Fe=t=>new Date(t).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",timeZone:"Asia/Kolkata"}),xa=()=>{const[t,a]=n.useState("business"),[s,r]=n.useState([]),{data:l,isLoading:d,error:o}=Qe(null);n.useEffect(()=>{l!=null&&l.data&&r(l.data)},[l]);const h=n.useMemo(()=>{const m=new Date;return m.setHours(0,0,0,0),m},[]),i=n.useMemo(()=>s.filter(m=>{var u;if(m.type!==t)return!1;const j=(u=m.userPlans)!=null&&u.endDate?new Date(m.userPlans.endDate):null;return j&&j>=h}).sort((m,j)=>{var u,b;return new Date(((u=m.userPlans)==null?void 0:u.endDate)||0)-new Date(((b=j.userPlans)==null?void 0:b.endDate)||0)}),[t,s,h]),x=n.useMemo(()=>s.filter(m=>{var u;if(m.type!==t||m.role!=="user")return!1;const j=(u=m.userPlans)!=null&&u.endDate?new Date(m.userPlans.endDate):null;return!j||j<h}).sort((m,j)=>{var u,b;return new Date(((u=j.userPlans)==null?void 0:u.endDate)||0)-new Date(((b=m.userPlans)==null?void 0:b.endDate)||0)}),[t,s,h]),c=m=>{if(!m)return"text-gray-500";const j=new Date(m);if(isNaN(j))return"text-gray-500";const u=Math.floor((j-h)/(1e3*60*60*24));return u<=7?"text-red-500 font-bold":u<=28?"text-yellow-500 font-semibold":"text-green-500 font-medium"};return e.jsxs("div",{className:"For p-6 mx-auto rounded-lg ",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-[#640D5F] mb-6",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Expiring Plans"}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("label",{className:"mr-2 font-semibold",children:"Select Category:"}),e.jsxs("select",{value:t,onChange:m=>a(m.target.value),className:"p-2 border rounded-md",children:[e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"political",children:"Politician"})]})]}),d?e.jsx("p",{className:"text-center text-gray-600",children:"Loading..."}):o?e.jsx("p",{className:"text-center text-red-500",children:"Failed to load user data."}):e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-5 text-[#640D5F] text-center",children:"Expiring Soon"}),i.length>0?e.jsxs("table",{className:"w-full border-collapse border border-gray-300 shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#b017a8] text-white uppercase text-sm leading-normal",children:[e.jsx("th",{className:"border p-3 text-left",children:"Name"}),e.jsx("th",{className:"border p-3 text-left",children:"Email"}),e.jsx("th",{className:"border p-3 text-left",children:"Mobile"}),e.jsx("th",{className:"border p-3 text-left",children:"Expiry Date"})]})}),e.jsx("tbody",{children:i.map(m=>{var j,u;return e.jsxs("tr",{className:"hover:bg-[#f1d5ef]",children:[e.jsx("td",{className:"border p-3",children:m.name}),e.jsx("td",{className:"border p-3",children:m.email}),e.jsx("td",{className:"border p-3",children:m.mobile}),e.jsx("td",{className:`border p-3 ${c((j=m.userPlans)==null?void 0:j.endDate)}`,children:Fe((u=m.userPlans)==null?void 0:u.endDate)||"N/A"})]},m._id)})})]}):e.jsx("p",{className:"text-gray-600 text-center",children:"No expiring plans found."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-5 text-[#640D5F] text-center ",children:"Expired Plans"}),x.length>0?e.jsxs("table",{className:"w-full border-collapse border border-gray-300 shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#640D5F] text-white uppercase text-sm leading-normal",children:[e.jsx("th",{className:"border p-3 text-left",children:"Name"}),e.jsx("th",{className:"border p-3 text-left",children:"Email"}),e.jsx("th",{className:"border p-3 text-left",children:"Mobile"})]})}),e.jsx("tbody",{children:x.map(m=>e.jsxs("tr",{className:"hover:bg-[#f8e6f5]",children:[e.jsx("td",{className:"border p-3",children:m.name}),e.jsx("td",{className:"border p-3",children:m.email}),e.jsx("td",{className:"border p-3",children:m.mobile})]},m._id))})]}):e.jsx("p",{className:"text-gray-600 text-center",children:"No expired plans found."})]})]})]})},ha=()=>{var se;const[t,a]=n.useState({name:"",email:"",mobile:"",password:"",district:"",taluka:"",state:"",otp:"",type:"business"}),[s,r]=n.useState({}),[l,d]=n.useState([]),[o,h]=n.useState(""),[i,x]=n.useState(""),[c,m]=n.useState(null),[j,u]=n.useState([]),[b,y]=n.useState([]),[g,S]=n.useState([]),[f,A]=n.useState([]),F=["Maharastra"],{data:M}=rt(),{data:P}=lt((se=g==null?void 0:g.find(w=>(w==null?void 0:w.districtnameenglish)===(t==null?void 0:t.district)))==null?void 0:se.districtcode);n.useEffect(()=>{(M==null?void 0:M.length)>0&&S(M)},[M]),n.useEffect(()=>{(P==null?void 0:P.length)>0&&A(P)},[P]);const R=X(),E=_e(),U=Dt(),{data:L}=ve(null,"user","business"),{data:D}=We(null,"user"),{data:T}=Ie();n.useEffect(()=>{(L==null?void 0:L.data.length)>0&&d(L.data)},[L]),n.useEffect(()=>{var K;if(!i){u((D==null?void 0:D.data)||[]);return}const w=(D==null?void 0:D.data.length)>0?(K=D==null?void 0:D.data)==null?void 0:K.filter(le=>{var re,W;return le.role==="user"&&(((re=le.name)==null?void 0:re.toLowerCase().includes(i.toLowerCase()))||((W=le.mobile)==null?void 0:W.includes(i)))}):[];u(w)},[D,i]),n.useEffect(()=>{if((T==null?void 0:T.data.length)>0){const w=T.data.filter(K=>{var le,re;return((le=K.name)==null?void 0:le.toLowerCase().includes(i.toLowerCase()))||((re=K.mobile)==null?void 0:re.includes(i))});y(w)}},[T,i]);const $=()=>{let w={};return t.name.trim()||(w.name="Name is required"),t.email?/\S+@\S+\.\S+/.test(t.email)||(w.email="Email is not valid"):w.email="Email is required",t.mobile?/^\d{10}$/.test(t.mobile)||(w.mobile="Mobile number must be exactly 10 digits"):w.mobile="Mobile number is required",t.password?t.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",t.state||(w.state="State is required"),t.district||(w.district="District is required"),t.taluka||(w.taluka="Taluka is required"),t.otp?/^\d{4}$/.test(t.otp)||(w.otp="OTP must be exactly 4 digits"):w.otp="OTP is required",r(w),Object.keys(w).length===0},k=w=>{a({...t,[w.target.name]:w.target.value})},V=w=>{w.preventDefault(),$()&&U.mutate({userData:t,referBy:o,referId:c._id},{onSuccess:()=>{R(p({message:" Registered Successfully!"})),a({name:"",email:"",mobile:"",password:"",district:"",taluka:"",state:"",otp:"",type:"business"}),r({}),h(""),x(""),m(null)},onError:K=>R(p({message:K,type:"error"}))})},G=w=>{h(w.target.value),w.target.value===""&&(x(""),m(null))},ie=w=>{x(w.target.value)},J=w=>{m(w),x("")},O=()=>{if(!t.mobile){R(p({message:"Mobile number is required",type:"warn"}));return}if(!/^\d{10}$/.test(t.mobile)){R(p({message:"Mobile number must be 10 digits",type:"warn"}));return}E.mutate(t.mobile,{onSuccess:()=>{R(p({message:"OTP Sent to Mobile No",type:"success"}))},onError:w=>{R(p({message:w,type:"error"}))}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Form max-w-xl mx-auto mt-10 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Add Customer"}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Customer Name",value:t.name,onChange:k,className:"w-full rounded p-2 border border-[#640D5F]"}),s.name&&e.jsx("p",{className:"text-red-400 text-sm",children:s.name}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:k,className:"w-full rounded p-2 border  border-[#640D5F]"}),s.email&&e.jsx("p",{className:"text-red-400 text-sm",children:s.email}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:t.mobile,onChange:k,className:"flex-1/2 rounded p-2 border border-[#640D5F]"}),e.jsx("button",{type:"button",onClick:O,className:"w-1/3 bg-[#e762e1] text-white cursor-pointer p-2 rounded-md disabled:cursor-progress",disabled:E.isPending,children:E.isPending?"Sending OTP":"Get OTP"}),e.jsx("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:t.otp,onChange:k,className:"w-1/3 rounded p-2 border border-[#640D5F]"})]}),s.mobile&&e.jsx("p",{className:"text-red-400 text-sm",children:s.mobile}),s.otp&&e.jsx("p",{className:"text-red-400 text-sm",children:s.otp})," ",e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:t.password,onChange:k,className:"w-full rounded p-2 border border-[#640D5F]"}),s.password&&e.jsx("p",{className:"text-red-400 text-sm",children:s.password}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{name:"state",value:t.state,onChange:k,className:"w-1/3 rounded p-2 border border-[#640D5F]",children:[e.jsx("option",{value:"",children:"State"}),F.map(w=>e.jsx("option",{value:w,children:w},w))]}),s.state&&e.jsx("p",{className:"text-red-400 text-sm",children:s.state}),e.jsxs("select",{name:"district",value:t.district,onChange:k,className:"w-1/3 rounded p-2 border border-[#640D5F]",disabled:!t.state,children:[e.jsx("option",{value:"",children:"District"}),t.state&&(g==null?void 0:g.map(w=>e.jsx("option",{value:w.districtnameenglish,children:w.districtnameenglish},w.districtcode)))]}),s.district&&e.jsx("p",{className:"text-red-400 text-sm",children:s.district}),e.jsxs("select",{name:"taluka",value:t.taluka,onChange:k,className:"w-1/3 p-2 rounded border border-[#640D5F]",disabled:!t.district,children:[e.jsx("option",{value:"",children:"Taluka"}),t.district&&(f==null?void 0:f.map(w=>e.jsx("option",{value:w.subdistrictnameenglish,children:w.subdistrictnameenglish},w.subdistrictcode)))]}),s.taluka&&e.jsx("p",{className:"text-red-400 text-sm",children:s.taluka})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"font-bold",children:"Referenced By"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"associates",checked:o==="associates",onChange:G}),"Associates"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"staff",checked:o==="staff",onChange:G}),"Staff"]})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsxs("div",{className:"w-1/2 pr-2",children:[o==="associates"&&e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search by Name or Mobile",value:i,onChange:ie,className:"w-full rounded p-2 border border-[#640D5F]"}),i&&b.length>0&&e.jsx("ul",{className:"mt-2 border border-[#640D5F] rounded",children:b.map(w=>e.jsxs("li",{onClick:()=>J(w),className:"p-2 cursor-pointer hover:bg-[#ebace8]",children:[w.name," (Mobile: ",w.mobile,")"]},w._id))}),i&&b.length===0&&e.jsx("p",{className:"text-red-500 mt-2",children:"No matching associates found."})]}),o==="staff"&&e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Search by Name or Mobile No.",value:i,onChange:ie,className:"w-full rounded p-2 border border-[#640D5F]"}),i&&((j==null?void 0:j.length)>0?e.jsx("ul",{className:"mt-2 border border-[#640D5F] rounded",children:j.map(w=>e.jsx("li",{onClick:()=>J(w),className:"p-2 cursor-pointer hover:bg-[#ebace8]",children:w.name},w._id))}):e.jsx("p",{className:"text-red-500 mt-2",children:"No matching staff found."}))]})]}),e.jsxs("div",{className:"w-1/2 pl-2",children:[c&&e.jsxs("p",{className:"mt-2",children:[c.name," "]}),s.referencedBy&&e.jsx("p",{className:"text-red-400 text-sm",children:s.referencedBy})]})]})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{type:"submit",className:"w-40 bg-[#aa1ba3] hover:bg-[#640D5F] font-bold text-white p-2 mt-5 rounded-md cursor-progress disabled:cursor-progress ",disabled:U.isPending,children:U.isPending?"Adding...":"Add Customer"})})]})]}),e.jsx("div",{children:l.length>0&&e.jsxs("table",{className:"mt-6 w-full border-collapse border border-[#aa1ba3] rounded",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ebace8]",children:[e.jsx("th",{className:"border border-[#aa1ba3] p-2",children:"Sr. No."}),e.jsx("th",{className:"border border-[#aa1ba3] p-2",children:"Name"}),e.jsx("th",{className:"border border-[#aa1ba3] p-2",children:"Email"}),e.jsx("th",{className:"border border-[#aa1ba3] p-2",children:"Mobile"})]})}),e.jsx("tbody",{children:l.map((w,K)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#aa1ba3] p-2",children:K+1}),e.jsx("td",{className:"border border-[#aa1ba3] p-2",children:w.name}),e.jsx("td",{className:"border border-[#aa1ba3] p-2",children:w.email}),e.jsx("td",{className:"border border-[#aa1ba3] p-2",children:w.mobile})]},K))})]})})]})},pa=()=>{const[t,a]=n.useState(""),[s,r]=n.useState([]),[l,d]=n.useState([]),[o,h]=n.useState(null),[i,x]=n.useState({name:"",email:"",mobile:"",state:"",district:"",taluka:"",type:""}),[c,m]=n.useState(!1),[j,u]=n.useState(null),[b,y]=n.useState(""),[g,S]=n.useState(!1),[f,A]=n.useState(!1),[F,M]=n.useState(null),[P,R]=n.useState(""),[E,U]=n.useState(null),L=X(),D=kt(),T=Ve(),$=At(),k=Ge(),V=Ke(),{data:G}=ve(null,"user","business");n.useEffect(()=>{G&&(r(G.data),d(G.data))},[G]),n.useEffect(()=>{d(s)},[s]);const ie=I=>{const ne=I.target.value.toLowerCase();a(ne),d(s.filter(ue=>ue.name.toLowerCase().includes(ne)))},J=I=>{h(I._id),x({...I})},O=I=>{x({...i,[I.target.name]:I.target.value})},se=()=>{D.mutate({userId:o,updatedData:i},{onSuccess:()=>{h(null),L(p({message:"Details Updated"}))},onError:I=>L(p({message:I,type:"error"}))})},w=I=>{u(I),m(!0)},K=()=>{if(b.toLowerCase()!=="confirm"){alert("Please enter 'confirm' to delete the record.");return}T.mutate(j,{onSuccess:()=>{m(!1),u(null),y(""),L(p({message:"Businessman Deleted Successfully"}))},onError:I=>L(p({message:I,type:"error"}))})},le=I=>{U(I),k.mutate(I,{onSuccess:()=>{L(p({message:"Customer key has been reset"}))},onError:ne=>L(p({message:ne,type:"error"}))}),U(null)},re=(I,ne)=>{V.mutate({userId:I,status:!ne},{onSuccess:()=>{L(p({message:"Customer Verifiaction Updated"}))},onError:ue=>L(p({message:ue,type:"error"}))})},W=()=>{$.mutate({userId:F,newPassword:P},{onSuccess:()=>{A(!1),R(""),M(null),L(p({message:"Password Updated Successfully"}))},onError:I=>L(p({message:I,type:"error"}))})};return e.jsxs("div",{className:"Form p-6 mt-10 mx-auto rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-[#640D5F] mb-6",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Customer Management"}),e.jsx("input",{type:"search",placeholder:"Search by Name",value:t,onChange:ie,className:"w-full p-3 border border-[#640D5F] text-black rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-[#640D5F]"}),o&&e.jsxs("div",{className:"mb-6 p-4 bg-purple-100 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#640D5F] mb-4 text-center",children:"Edit Customer"}),e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:i.name,onChange:O,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:i.email,onChange:O,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"text",name:"mobile",placeholder:"Mobile",value:i.mobile,onChange:O,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"text",name:"state",placeholder:"State",value:i.state,onChange:O,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"text",name:"district",placeholder:"District",value:i.district,onChange:O,className:"w-full p-3 border rounded-lg mb-2"}),e.jsx("input",{type:"text",name:"taluka",placeholder:"Taluka",value:i.taluka,onChange:O,className:"w-full p-3 border rounded-lg mb-2"}),e.jsxs("select",{name:"type",value:i.type,onChange:O,className:"w-full p-3 rounded border border-[#640D5F]",disabled:!i.type,children:[e.jsx("option",{value:"business",children:"Business"},"business"),e.jsx("option",{value:"political",children:"Political"},"political")]}),e.jsx("div",{className:"flex mt-3 justify-center w-full",children:e.jsx("button",{onClick:se,className:"w-60 bg-[#9b1694] text-white p-3 rounded-lg font-bold hover:bg-[#9b1690]",disabled:D.isPending,children:D.isPending?"Upadating...":"Update"})})]}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300 shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#b017a8] text-white uppercase text-sm leading-normal",children:[e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Name"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Mobile"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Actions"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Verified"})]})}),e.jsx("tbody",{className:"text-gray-900 text-sm font-light",children:l.length>0?l.map((I,ne)=>e.jsxs("tr",{className:`border border-[#640D5F] ${ne%2===0?"bg-gray-100":"bg-white"} hover:bg-gray-200 transition`,children:[e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:I.name}),e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:I.mobile}),e.jsxs("td",{className:"p-3 border border-[#640D5F] text-center",children:[e.jsx("button",{onClick:()=>J(I),className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-800 transition mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>w(I._id),className:"bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-700 transition mr-2",children:"Delete"}),e.jsx("button",{onClick:()=>{M(I._id),A(!0)},className:"bg-[#A0C878] text-white px-3 py-1 rounded-lg hover:bg-[#8eb16ae5] transition mr-2",children:"Update Password"}),e.jsx("button",{onClick:()=>le(I._id),className:"bg-[#54B4D3] text-white px-3 py-1 rounded-lg hover:bg-[#5a8fa1] transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:E===I._id,children:E===I._id?"Resetting...":"Reset Key"})]}),e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:I.verified,onChange:()=>re(I._id,I.verified),disabled:V.isPending}),e.jsx("span",{className:"slider round"})]})})]},I._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"p-3 text-center text-gray-500",children:"No customers found."})})})]}),c&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-2",children:"Enter 'confirm' to delete this customer:"}),e.jsx("input",{type:"text",value:b,onChange:I=>y(I.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),e.jsx("button",{onClick:K,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:T.isPending,children:T.isPending?"Deleting...":"Confirm"}),e.jsx("button",{onClick:()=>m(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})}),g&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reset Successful"}),e.jsxs("p",{className:"mb-4",children:["The password has been reset to ",e.jsx("strong",{children:"reset@123"}),"."]}),e.jsx("button",{onClick:()=>S(!1),className:"bg-[#54B4D3] text-white px-4 py-2 rounded hover:bg-[#5c91a3] transition",children:"Close"})]})}),f&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Password"}),e.jsx("input",{type:"password",placeholder:"New Password",value:P,onChange:I=>R(I.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),e.jsx("button",{onClick:W,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 transition disabled:opacity-50 disabled:hover:bg-blue-500",disabled:$.isPending,children:$.isPending?"Updating...":"Update Password"}),e.jsx("button",{onClick:()=>A(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})})]})},qe="http://13.201.22.86:3000/api/v1",ba=async(t=null)=>{var a,s;try{const r=t?`${qe}/plan/get-plan/${t}`:`${qe}/plan/get-plan`;return(await q.get(r,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to fetch plan(s)"}},ga=async t=>{var a,s;try{const{name:r,price:l,validity:d,smsAPIService:o,whatsappAPIService:h,smsCount:i,addMembers:x,userSMSCount:c,type:m}=t;return(await q.post(`${qe}/plan/add-plan`,{name:r,price:l,validity:d,smsAPIService:o,whatsappAPIService:h,smsCount:i,addMembers:x,userSMSCount:c,type:m},{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||" Failed to add New Plan."}},fa=async(t,a)=>{var s,r;try{const{name:l,price:d,validity:o,smsAPIService:h,whatsappAPIService:i,smsCount:x,addMembers:c,userSMSCount:m,type:j}=a;return(await q.put(`${qe}/plan/update-plan/${t}`,{name:l,price:d,validity:o,smsAPIService:h,whatsappAPIService:i,smsCount:x,addMembers:c,userSMSCount:m,type:j},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||" Failed to Update Plan."}},ja=async t=>{var a,s;try{return(await q.delete(`${qe}/plan/delete-plan/${t}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||" Failed to Delete Plan."}},ot=(t=null)=>me({queryKey:["plan",t],queryFn:()=>ba(t),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),ya=()=>{const t=Q();return H({mutationFn:a=>ga(a),onSuccess:()=>{t.invalidateQueries(["plan"])}})},Na=()=>{const t=Q();return H({mutationFn:({planId:a,planData:s})=>fa(a,s),onSuccess:()=>{t.invalidateQueries(["plan"])}})},wa=()=>{const t=Q();return H({mutationFn:a=>ja(a),onSuccess:()=>{t.invalidateQueries(["plan"])}})},xt=({type:t})=>{const[a,s]=n.useState(null),[r,l]=n.useState("Basic"),[d,o]=n.useState(""),[h,i]=n.useState(""),[x,c]=n.useState([]),m=X(),{data:j}=ve(null,"user",t),{data:u}=ot(),b=ra();n.useEffect(()=>{if((j==null?void 0:j.data.length)>0){const g=j.data.filter(S=>{var f,A;return((f=S.name)==null?void 0:f.toLowerCase().includes(h.toLowerCase()))||((A=S.mobile)==null?void 0:A.includes(h))});c(g)}},[j,h]);const y=g=>{if(g.preventDefault(),!a||!d){alert("Please select a customer and plan duration.");return}b.mutate({planId:d,userId:a._id},{onSuccess:()=>{s(null),o(""),m(p({message:"Plan Successfully Purchased"}))},onError:S=>m(p({message:S,type:"error"}))})};return e.jsxs("div",{className:"Form mx-auto p-8 rounded-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-[#640D5F] text-center",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Select Plan"}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"relative w-1/2 mx-auto",children:[e.jsx("input",{type:"search",placeholder:"Search User by Name or Mobile",value:h,onChange:g=>i(g.target.value),className:"w-full p-2 rounded-md text-[#4e0c4a] border border-[#640D5F]"}),h&&e.jsx("div",{className:"absolute bg-white border border-gray-300 w-full mt-1 rounded-md shadow-lg max-h-48 overflow-y-auto",children:x.map((g,S)=>e.jsxs("div",{className:"p-2 hover:bg-gray-200 cursor-pointer",onClick:()=>{s(g),i("")},children:[g.name," (",g.mobile,")"]},S))})]}),a&&e.jsxs("div",{className:"w-1/3 bg-white rounded-xl p-6 mx-auto my-5",style:{boxShadow:"rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px"},children:[e.jsx("div",{className:"bg-gradient-to-r from-[#aa1ba3] to-[#640D5F] text-white text-center py-2 rounded-lg",children:e.jsx("h3",{className:"text-lg font-semibold",children:"User Details"})}),e.jsx("div",{className:"p-4 text-gray-700",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Name:"}),e.jsx("span",{children:a.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Email:"}),e.jsx("span",{children:a.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Mobile No.:"}),e.jsx("span",{children:a.mobile})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"State:"}),e.jsx("span",{children:a.state})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"District:"}),e.jsx("span",{children:a.district})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Taluka:"}),e.jsx("span",{children:a.taluka})]})]})})]})]}),e.jsx("div",{className:"flex items-center justify-center bg-[#ebace8] rounded-full p-1 w-full max-w-md mx-auto mt-4",children:["Basic","Advanced"].map(g=>e.jsx("div",{className:`flex-1 text-center py-2 rounded-full cursor-pointer transition-all font-semibold text-lg ${r===g?"bg-[#640D5F] text-white":"text-black"}`,onClick:()=>l(g),children:g},g))}),e.jsx("div",{className:"grid grid-cols-5 gap-4 mt-6",children:u==null?void 0:u.data.filter(g=>r==="Advanced"?g.type==="advance":g.type==="basic").map(g=>{const S=[g.smsAPIService&&"SMS API Service",g.whatsappAPIService&&"Whatsapp API Service",g.smsCount&&`Total Message: ${g.smsCount}`,g.userSMSCount&&`${g.userSMSCount} User SMS`,g.addMembers&&"Add Member"].filter(Boolean);return e.jsxs("div",{className:`p-6 rounded-lg shadow-md border cursor-pointer transition-all text-center ${d===g._id?"bg-[#f5a9ef]":"bg-[#f8e1f6] hover:bg-[#f1c0ee]"}`,onClick:()=>o(g._id),children:[e.jsx("h2",{className:"text-2xl text-red-600 font-bold",children:g.name}),e.jsxs("h3",{className:"text-lg text-blue-800 font-bold",children:[g.validity," Days"]}),e.jsxs("p",{className:"text-[#4e0c4a] text-lg font-semibold",children:["₹",g.price]}),e.jsx("ul",{className:"mt-2 text-sm",children:S.map((f,A)=>e.jsx("li",{children:f},A))})]},g._id)})}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{onClick:y,className:"w-40 bg-[#aa1ba3] hover:bg-[#640D5F] font-bold text-white p-2 mt-5 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:b.isPending,children:b.isPending?"Confirming Plan":"Confirm Plan"})})]})},va=()=>{const[t,a]=n.useState({name:"",price:"",validity:"",smsAPIService:!1,whatsappAPIService:!1,smsCount:"",userSMSCount:"",addMembers:!1,type:"basic"}),[s,r]=n.useState([]),[l,d]=n.useState(null),[o,h]=n.useState(null),[i,x]=n.useState(!1),[c,m]=n.useState(""),j=X(),u=ya(),b=Na(),y=wa(),{data:g}=ot(null);n.useEffect(()=>{g&&r(g.data)},[g]);const S=P=>{const{name:R,value:E,type:U,checked:L}=P.target;a({...t,[R]:U==="checkbox"||U==="radio"?L:E})},f=P=>{P.preventDefault(),l!==null?b.mutate({planId:l,planData:t},{onSuccess:()=>{d(null),j(p({message:"Plan Details Updated Successfully"}))},onError:R=>j(p({message:R,type:"error"}))}):u.mutate(t,{onSuccess:()=>{j(p({message:"New Plan Added Successfully"}))},onError:R=>j(p({message:R,type:"error"}))}),a({name:"",price:"",validity:"",smsAPIService:!1,whatsappAPIService:!1,smsCount:"",userSMSCount:"",addMembers:!1,type:"basic"})},A=P=>{a(P),d(P._id)},F=P=>{h(P),x(!0)},M=()=>{if(c.toLowerCase()!=="confirm"){alert("Please enter 'confirm' to delete the record.");return}y.mutate(o,{onSuccess:()=>{x(!1),h(null),m(""),j(p({message:"Plan Deleted Successfully"}))},onError:P=>j(p({message:P,type:"error"}))})};return e.jsxs("div",{className:"Form mx-auto mt-10 p-6 rounded-lg shadow-lg max-w-4xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Create Plan"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx("label",{className:"block text-[#4e0c4a] font-semibold",children:"Select User Type"}),e.jsxs("select",{name:"type",value:t.type,onChange:S,className:"w-full p-3 border border-[#640D5F] rounded-md focus:outline-none focus:ring-1 focus:ring-[#640D5F] mb-4",children:[e.jsx("option",{value:"basic",children:" Basic"},"basic"),e.jsx("option",{value:"advance",children:"Advance"},"advance")]}),e.jsx("input",{type:"text",name:"name",placeholder:"Plan Name",value:t.name,onChange:S,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"}),e.jsx("input",{type:"number",name:"price",placeholder:"Price ($)",value:t.price,onChange:S,min:"0",required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"}),e.jsx("input",{type:"number",name:"validity",placeholder:"Validity (Days)",value:t.validity,onChange:S,min:"0",required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"SMS API Service"}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"smsAPIService",checked:t.smsAPIService,onChange:S,className:"accent-[#640D5F]"}),e.jsx("span",{className:"ml-2",children:"Yes"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"WhatsApp API Service"}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"whatsappAPIService",checked:t.whatsappAPIService,onChange:S,className:"accent-[#640D5F]"}),e.jsx("span",{className:"ml-2",children:"Yes"})]})})]}),e.jsx("input",{type:"number",name:"smsCount",placeholder:"SMS Count",value:t.smsCount,onChange:S,min:"0",required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"}),e.jsx("input",{type:"number",name:"userSMSCount",placeholder:"User SMS Count",value:t.userSMSCount,onChange:S,min:"0",required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Add Member"}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"addMembers",checked:t.addMembers,onChange:S,className:"accent-[#640D5F]"}),e.jsx("span",{className:"ml-2",children:"Yes"})]})})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{type:"submit",className:"bg-[#aa1ba3] hover:bg-[#640D5F] text-white font-bold w-40 p-2 rounded-md transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:b.isPending||u.isPending,children:l!==null?b.isPending?"Updating Plan...":"Update Plan":u.isPending?"Adding Plan...":"Add Plan"})})]}),e.jsx("div",{className:"mt-10 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(P=>e.jsxs("div",{className:"p-6 rounded-xl bg-[#fdf4ff] shadow-lg",style:{boxShadow:"0px 4px 10px rgba(100, 13, 95, 0.5)"},children:[e.jsx("h3",{className:"text-xl font-extrabold text-[#640D5F] text-center uppercase",children:P.name}),e.jsx("h5",{className:"uppercase text-center text-sm",children:P.type}),e.jsxs("p",{className:"text-gray-700 flex justify-between",children:[e.jsx("strong",{children:"Price:"})," ",e.jsxs("span",{children:["$",P.price]})]}),e.jsxs("p",{className:"text-gray-700 flex justify-between",children:[e.jsx("strong",{children:"Validity:"})," ",e.jsxs("span",{children:[P.validity," Days"]})]}),e.jsxs("p",{className:"text-gray-700 flex justify-between",children:[e.jsx("strong",{children:"SMS API:"})," ",e.jsx("span",{children:P.smsAPIService?"Yes":"No"})]}),e.jsxs("p",{className:"text-gray-700 flex justify-between",children:[e.jsx("strong",{children:"WhatsApp API:"})," ",e.jsx("span",{children:P.whatsappAPIService?"Yes":"No"})]}),e.jsxs("p",{className:"text-gray-700 flex justify-between",children:[e.jsx("strong",{children:"SMS Count:"})," ",e.jsx("span",{children:P.smsCount})]}),e.jsxs("p",{className:"text-gray-700 flex justify-between",children:[e.jsx("strong",{children:"User SMS Count:"})," ",e.jsx("span",{children:P.userSMSCount})]}),e.jsxs("p",{className:"text-gray-700 flex justify-between",children:[e.jsx("strong",{children:"Add Member:"})," ",e.jsx("span",{children:P.addMembers?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>A(P),className:"bg-blue-600 hover:bg-blue-800 text-white font-bold py-1 px-4 rounded transition-all duration-300",children:"Update"}),e.jsx("button",{onClick:()=>F(P._id),className:"bg-red-600 hover:bg-red-800 text-white font-bold py-1 px-4 rounded transition-all duration-300",children:"Delete"})]})]},P._id))}),i&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-2",children:"Enter 'confirm' to delete this customer:"}),e.jsx("input",{type:"text",value:c,onChange:P=>m(P.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),e.jsx("button",{onClick:M,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Confirm"}),e.jsx("button",{onClick:()=>x(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})})]})},$e="http://13.201.22.86:3000/api/v1",Sa=async t=>{var a,s;try{const r=new URLSearchParams;return t&&r.append("userType",t),(await q.get(`${$e}/referral/get-refferal-details?${r.toString()}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Fetch Details"}},Ca=async t=>{var a,s;try{const r=t?`${$e}/referral/get-staff-details/${t}`:`${$e}/referral/get-staff-details`;return(await q.get(r,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Fetch Details"}},Pa=async(t=null,a=0)=>{var s,r;try{const l=t?`${$e}/referral/update-incentive/${t}`:`${$e}/referral/update-incentive/`;return(await q.patch(l,{incentive:a},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Update incentive"}},Fa=async(t=null,a="staff")=>{var s,r;try{const l=new URLSearchParams;return t&&l.append("id",t),a&&l.append("referby",a),(await q.get(`${$e}/referral/get-referral-count?${l}`,{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to Fetch Count"}},Ut=t=>me({queryKey:["staffRef",t],queryFn:()=>Sa(t),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),Rt=(t=null)=>me({queryKey:["staffDetails",t],queryFn:()=>Ca(t),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),Da=()=>{const t=Q();return H({mutationFn:({staffId:a,incentive:s})=>Pa(a,s),onSuccess:()=>{t.invalidateQueries(["staffDetails","staffRef"])}})},ht=(t=null,a="staff")=>me({queryKey:["refCount",t,a],queryFn:()=>Fa(t,a),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1});Kt.register(Qt,Yt,Ht,Xt);const ka=()=>{const[t,a]=n.useState([]),[s,r]=n.useState("business"),[l,d]=n.useState([]),[o,h]=n.useState({totalUser:0,advancePlanUserCnt:0,basicPlanUserCnt:0,businessCount:0,basicPlanBUserCnt:0,advancePlanBUserCnt:0,politicalCount:0,basicPlanPUserCnt:0,advancePlanPUserCnt:0,totalPlans:0,advanceCount:0,basicCount:0,assoicateCount:0,staffCount:0}),{data:i}=Qe(null),{data:x}=ot(),{data:c}=Ie(),{data:m}=Rt(),{data:j}=ht(null,"staff"),{data:u}=ht(null,"associate");n.useEffect(()=>{i!=null&&i.data&&d(i.data)},[i]),n.useEffect(()=>{const g=l.filter(E=>E.type==="business").length,S=l.filter(E=>E.type==="political").length,f=l.filter(E=>{var U,L;return((L=(U=E==null?void 0:E.userPlans)==null?void 0:U.planDetails)==null?void 0:L.type)==="basic"}).length,A=l.filter(E=>{var U,L;return((L=(U=E==null?void 0:E.userPlans)==null?void 0:U.planDetails)==null?void 0:L.type)==="advance"}).length,F=l.filter(E=>{var U,L;return E.type==="business"&&((L=(U=E==null?void 0:E.userPlans)==null?void 0:U.planDetails)==null?void 0:L.type)==="basic"}).length,M=l.filter(E=>{var U,L;return E.type==="business"&&((L=(U=E==null?void 0:E.userPlans)==null?void 0:U.planDetails)==null?void 0:L.type)==="advance"}).length,P=l.filter(E=>{var U,L;return E.type==="political"&&((L=(U=E==null?void 0:E.userPlans)==null?void 0:U.planDetails)==null?void 0:L.type)==="basic"}).length,R=l.filter(E=>{var U,L;return E.type==="political"&&((L=(U=E==null?void 0:E.userPlans)==null?void 0:U.planDetails)==null?void 0:L.type)==="advance"}).length;h(E=>({...E,totalUser:l.length,businessCount:g,politicalCount:S,basicPlanUserCnt:f,advancePlanUserCnt:A,basicPlanBUserCnt:F,advancePlanBUserCnt:M,basicPlanPUserCnt:P,advancePlanPUserCnt:R}))},[l]),n.useEffect(()=>{if((x==null?void 0:x.data.length)>0){const g=x.data.filter(f=>f.type==="advance").length,S=x.data.filter(f=>f.type==="basic").length;h(f=>({...f,totalPlans:x.data.length,advanceCount:g,basicCount:S}))}},[x]),n.useEffect(()=>{(c==null?void 0:c.data.length)>0&&h(g=>({...g,assoicateCount:c.data.length}))},[c]),n.useEffect(()=>{(m==null?void 0:m.data.length)>0&&h(g=>({...g,staffCount:m.data.length}))},[m]),n.useEffect(()=>{const g=new Date;g.setHours(0,0,0,0);const S=l.filter(f=>{var F;if(f.type!==s)return!1;const A=(F=f.userPlans)!=null&&F.endDate?new Date(f.userPlans.endDate):null;return A&&A>=g}).sort((f,A)=>{var F,M;return new Date((F=f.userPlans)==null?void 0:F.endDate)-new Date((M=A.userPlans)==null?void 0:M.endDate)});a(S)},[s,l]);const b=g=>{if(!g)return"text-gray-500";const S=new Date;S.setHours(0,0,0,0);const f=new Date(g);if(isNaN(f))return"text-gray-500";const A=Math.floor((f-S)/(1e3*60*60*24));return A<=7?"text-red-500 font-bold":A<=28?"text-yellow-500 font-semibold":"text-green-500 font-medium"},y={labels:["Basic Plan","Advanced Plan"],datasets:[{data:[o.basicCount,o.advanceCount],backgroundColor:["#BE5985","#36A2EB"],hoverBackgroundColor:["#BE5985","#36A2EB"],borderWidth:2,borderColor:"#fff"}]};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsxs("div",{className:"rounded-lg shadow-lg p-6 flex flex-col",style:{backgroundImage:"linear-gradient(-225deg, #E100FF, #7F00FF)",boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:[e.jsxs("div",{className:"flex items-center justify-between mx-1 mt-2",children:[e.jsx("img",{src:"../../total_users (6).png",alt:"Total Users",className:"h-18 w-18 mr-2"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Total Users"}),e.jsx("p",{className:"text-4xl font-bold text-yellow-500 text-center",style:{textShadow:"3px 3px 10px rgba(80, 20, 56, 1)"},children:o.totalUser})]})]}),e.jsxs("div",{className:"flex justify-center mt-8",children:[e.jsxs("div",{className:"flex flex-col items-center mx-4",children:[e.jsx("p",{className:"font-semibold text-white text-center",children:"Basic Plan"}),e.jsx("p",{className:"text-2xl text-white font-bold",children:o.basicPlanUserCnt})]}),e.jsxs("div",{className:"flex flex-col items-center mx-4",children:[e.jsx("p",{className:"font-semibold text-white text-center",children:"Advanced Plan"}),e.jsx("p",{className:"text-2xl text-white font-bold",children:o.advancePlanUserCnt})]})]})]}),e.jsxs("div",{className:"rounded-lg shadow-lg p-6 flex flex-col",style:{backgroundImage:"linear-gradient(-225deg, #ed6ea0 0%, #ec8c69 100%)",boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:[e.jsxs("div",{className:"flex items-center justify-between mx-1 mt-2",children:[e.jsx("img",{src:"../../business_user (2).png",alt:"Total Users",className:"h-20 w-19 mr-2"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Business"}),e.jsx("p",{className:"text-4xl font-bold text-yellow-500 text-center",style:{textShadow:"3px 3px 10px rgba(80, 20, 56, 1)"},children:o.businessCount})]})]}),e.jsxs("div",{className:"flex justify-center mt-8",children:[e.jsxs("div",{className:"flex flex-col items-center mx-4",children:[e.jsx("p",{className:"font-semibold text-white text-center",children:"Basic Plan"}),e.jsx("p",{className:"text-2xl text-white font-bold",children:o.basicPlanBUserCnt})]}),e.jsxs("div",{className:"flex flex-col items-center mx-4",children:[e.jsx("p",{className:"font-semibold text-white text-center",children:"Advanced Plan"}),e.jsx("p",{className:"text-2xl text-white font-bold",children:o.advancePlanBUserCnt})]})]})]}),e.jsxs("div",{className:"rounded-lg shadow-lg p-6 flex flex-col",style:{backgroundImage:"linear-gradient(-225deg, #4481eb 0%, #04befe 100%)",boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:[e.jsxs("div",{className:"flex items-center justify-between mx-1 mt-2",children:[e.jsx("img",{src:"../../politician_user (2).png",alt:"Total Users",className:"h-20 w-22 mr-2"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Politician"}),e.jsx("p",{className:"text-4xl font-bold text-yellow-500 text-center",style:{textShadow:"3px 3px 10px rgba(80, 20, 56, 1)"},children:o.politicalCount})]})]}),e.jsxs("div",{className:"flex justify-center mt-8",children:[e.jsxs("div",{className:"flex flex-col items-center mx-4",children:[e.jsx("p",{className:"font-semibold text-white text-center",children:"Basic Plan"}),e.jsx("p",{className:"text-2xl text-white font-bold",children:o.basicPlanPUserCnt})]}),e.jsxs("div",{className:"flex flex-col items-center mx-4",children:[e.jsx("p",{className:"font-semibold text-white text-center",children:"Advanced Plan"}),e.jsx("p",{className:"text-2xl text-white font-bold",children:o.advancePlanPUserCnt})]})]})]}),e.jsx("div",{className:"rounded-lg shadow-lg p-6 flex flex-col",style:{background:"linear-gradient(-225deg, #CB356B, #BD3F32)",boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:e.jsxs("div",{className:"flex justify-center items-center h-full relative",children:[e.jsx("div",{className:"w-45 h-48",children:e.jsx(Jt,{data:y,options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{font:{size:14,weight:"bold"},color:"#fff"}},tooltip:{backgroundColor:"#333",titleFont:{size:16},bodyFont:{size:14},footerFont:{size:12},padding:10},datalabels:{color:"#fff",font:{size:14,weight:"bold"},formatter:g=>`${g}`}},elements:{arc:{borderWidth:2,borderColor:"#fff"}}}})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-200 font-bold text-sm text-center pb-14",children:`Users: ${o.totalUser}`})})]})}),e.jsx("div",{className:"rounded-lg shadow-lg p-6 flex flex-col",style:{backgroundImage:"linear-gradient(-225deg, #06beb6, #48b1bf)",boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:e.jsxs("div",{className:"flex items-center justify-between mx-1 mt-2",children:[e.jsx("img",{src:"../../associates (2).png",alt:"Total Users",className:"h-20 w-20 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{children:"Referenced by -"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Associates"}),e.jsx("p",{className:"text-4xl font-bold text-yellow-500 text-center",style:{textShadow:"3px 3px 10px rgba(80, 20, 56, 1)"},children:(u==null?void 0:u.totalReferrals)||0})]})]})}),e.jsx("div",{className:"rounded-lg shadow-lg p-6 flex flex-col",style:{backgroundImage:"linear-gradient(-225deg, #F2994A, #F2994A)",boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:e.jsxs("div",{className:"flex items-center justify-between mx-1 mt-2",children:[e.jsx("img",{src:"../../staff.png",alt:"Total Users",className:"h-18 w-18 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{children:"Referenced by -"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Staff"}),e.jsx("p",{className:"text-4xl font-bold text-yellow-500 text-center",style:{textShadow:"3px 3px 10px rgba(80, 20, 56, 1)"},children:(j==null?void 0:j.totalReferrals)||0})]})]})}),e.jsx("div",{className:"rounded-lg shadow-lg p-6 flex flex-col",style:{backgroundImage:"linear-gradient(-225deg, #2f9933, #45B649)",boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:e.jsxs("div",{className:"flex items-center justify-between mx-1 mt-2",children:[e.jsx("img",{src:"../../payout (2).png",alt:"Total Users",className:"h-20 w-18 mr-2 mt-3"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Payouts"}),e.jsx("p",{className:"text-4xl font-bold text-yellow-500",style:{textShadow:"3px 3px 10px rgba(80, 20, 56, 1)"},children:"300k"})]})]})}),e.jsx("div",{className:"rounded-lg shadow-lg p-6 flex flex-col",style:{backgroundImage:"linear-gradient(-225deg, #2980b9, #2c3e50)",boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:e.jsxs("div",{className:"flex items-center justify-between mx-1 mt-2",children:[e.jsx("img",{src:"../../total_sell.png",alt:"Total Users",className:"h-18 w-18 mr-2"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Total Sell"}),e.jsx("p",{className:"text-4xl font-bold text-yellow-500",style:{textShadow:"3px 3px 10px rgba(80, 20, 56, 1)"},children:"800k"})]})]})})]})}),e.jsxs("div",{className:"Form p-6 mx-auto rounded-lg",children:[e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("label",{className:"mr-2 font-extrabold text-[#92157d] uppercase",children:"Select Category:"}),e.jsxs("select",{value:s,onChange:g=>r(g.target.value),className:"p-2 border rounded-md",children:[e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"political",children:"Politician"})]})]}),t.length>0?e.jsxs("table",{className:"w-full border-collapse border border-gray-300 shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#b017a8] text-white uppercase text-sm leading-normal",children:[e.jsx("th",{className:"border p-3 text-left",children:"Name"}),e.jsx("th",{className:"border p-3 text-left",children:"Email"}),e.jsx("th",{className:"border p-3 text-left",children:"Mobile"}),e.jsx("th",{className:"border p-3 text-left",children:"Expiry Date"})]})}),e.jsx("tbody",{children:t.map(g=>{var S;return e.jsxs("tr",{className:"hover:bg-[#f1d5ef]",children:[e.jsx("td",{className:"border p-3",children:g.name}),e.jsx("td",{className:"border p-3",children:g.email}),e.jsx("td",{className:"border p-3",children:g.mobile}),e.jsx("td",{className:`border p-3 ${b(g==null?void 0:g.userPlans.endDate)}`,children:Fe((S=g==null?void 0:g.userPlans)==null?void 0:S.endDate)})]},g._id)})})]}):e.jsx("p",{className:"text-gray-600 text-center",children:"No expiring plans found."})]})]})},qt="http://13.201.22.86:3000/api/v1",Aa=async(t,a)=>{var s,r;try{const{templeteName:l,message:d}=a;return(await q.post(`${qt}/smstemplete/add-templete`,{userId:t,templeteName:l,message:d},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Add Templete"}},Ea=async(t,a)=>{var s,r;try{const{templeteName:l,message:d,whatsappImg:o}=a,h=new FormData;return h.append("userId",t),h.append("templeteName",l),h.append("message",d),o&&h.append("whatsappImg",o),(await q.post(`${qt}/whatsapptemplete/add-templete`,h,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Add Template"}},Lt=()=>{const t=Q();return H({mutationFn:({userId:a,templeteData:s})=>Ea(a,s),onSuccess:()=>{t.invalidateQueries(["whatsappTemplete"])}})},_t=()=>{const t=Q();return H({mutationFn:({userId:a,templeteData:s})=>Aa(a,s),onSuccess:()=>{t.invalidateQueries(["smsTemplete"])}})},Ta=()=>{const[t,a]=n.useState("Text Message"),[s,r]=n.useState({templeteName:"",message:"",whatsappImg:null}),[l,d]=n.useState({templeteName:"",message:""}),[o,h]=n.useState(""),[i,x]=n.useState([]),[c,m]=n.useState(null),[j,u]=n.useState(!1),[b,y]=n.useState([]),[g,S]=n.useState(!1),f=X(),A=_t(),F=Lt(),{data:M}=ve(null,"user","business");n.useEffect(()=>{(M==null?void 0:M.data.length)>0&&(y(M.data),x(M.data))},[M]);const P=T=>{const $=T.target.value.toLowerCase();h($),S(!0),$||m(null),x(b.filter(k=>k.name.toLowerCase().includes($)))},R=T=>{S(!1),h(T.name),m(T)},E=T=>{const{name:$,value:k,files:V}=T.target;r({...s,[$]:V?V[0]:k})},U=T=>{const{name:$,value:k}=T.target;d({...l,[$]:k})},L=(T,$)=>{if($==="sms"){if(T.preventDefault(),!c){f(p({message:"Please Select Customer First",type:"warn"}));return}if(l.templeteName.trim()===""||l.message.trim()===""){f(p({message:"All Fields Are Required",type:"warn"}));return}A.mutate({userId:c._id,templeteData:l},{onSuccess:()=>{d({templeteName:"",message:""}),f(p({message:"SMS Templete Added"}))},onError:k=>f(p({message:k,type:"error"}))})}if($==="whatsapp"){if(T.preventDefault(),!c){f(p({message:"Customer Not Selected",type:"warn"}));return}if(s.templeteName.trim()===""||s.message.trim()===""){f(p({message:"All Fields Are Required Image Optional",type:"warn"}));return}F.mutate({userId:c._id,templeteData:s},{onSuccess:()=>{d({templeteName:"",message:"",whatsappImg:null}),f(p({message:"Whatsapp Templete Added"}))},onError:k=>f(p({message:k,type:"error"}))})}},D=()=>u(!1);return e.jsxs("div",{className:"Form mx-auto mt-10 p-6 rounded-lg shadow-lg max-w-4xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-[#640D5F] text-center",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Create Message"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Select Customer:"}),e.jsx("input",{type:"text",placeholder:"Search for a customer...",value:o,onChange:P,className:"w-full p-2 rounded-md border border-[#640D5F]"}),g&&o&&e.jsx("ul",{className:"mt-2 bg-white border border-[#640D5F] rounded-md shadow-lg max-h-40 overflow-y-auto",children:i.map(T=>e.jsxs("li",{onClick:()=>R(T),className:"p-2 hover:bg-[#fdf4ff] cursor-pointer",children:[T.name," - ",T.mobile]},T._id))}),c&&e.jsxs("p",{className:"mt-2 text-sm text-[#640D5F]",children:["Selected Customer: ",e.jsx("strong",{children:c.name})]})]}),e.jsx("div",{className:"flex items-center justify-center bg-[#ebace8] rounded-full p-1 w-full max-w-md mx-auto mb-6",children:["Text Message","WhatsApp Message"].map(T=>e.jsx("div",{className:`flex-1 text-center py-2 rounded-full cursor-pointer transition-all font-semibold text-lg ${t===T?"bg-[#640D5F] text-white":"text-black"}`,onClick:()=>a(T),children:T},T))}),t==="Text Message"&&e.jsxs("form",{onSubmit:T=>L(T,"sms"),className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Template Name:"}),e.jsx("input",{type:"text",name:"templeteName",placeholder:"Enter template name...",value:l.templeteName,onChange:U,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Message:"}),e.jsx("textarea",{name:"message",placeholder:"Enter your message...",value:l.message,onChange:U,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]",rows:"4"})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{type:"submit",className:"bg-[#aa1ba3] hover:bg-[#640D5F] text-white font-bold w-40 p-2 rounded-md transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:A.isPending,children:A.isPending?"Creating Message":"Create Message"})})]}),t==="WhatsApp Message"&&e.jsxs("form",{onSubmit:T=>L(T,"whatsapp"),className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Template Name:"}),e.jsx("input",{type:"text",name:"templeteName",placeholder:"Enter template name...",value:s.templeteName,onChange:E,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Message:"}),e.jsx("textarea",{name:"message",placeholder:"Enter your message...",value:s.message,onChange:E,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]",rows:"4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Image (for WhatsApp only):"}),e.jsx("input",{type:"file",name:"whatsappImg",accept:"image/*",onChange:E,className:"w-full p-2 rounded-md border border-[#640D5F]"})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{type:"submit",className:"bg-[#aa1ba3] hover:bg-[#640D5F] text-white font-bold w-40 p-2 rounded-md transition-all duration-300",disabled:F.isPending,children:F?"Creating Message":"Create Message"})})]}),j&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-[#640D5F]",children:["Your ",t.toLowerCase()," is created successfully!"]}),e.jsx("button",{onClick:D,className:"mt-4 bg-[#aa1ba3] hover:bg-[#640D5F] text-white font-bold py-1 px-4 rounded",children:"Close"})]})})]})},Ma=()=>{const[t,a]=n.useState("Text Message"),[s,r]=n.useState({templeteName:"",message:"",whatsappImg:null}),[l,d]=n.useState({templeteName:"",message:""}),[o,h]=n.useState(""),[i,x]=n.useState([]),[c,m]=n.useState(null),[j,u]=n.useState(!1),[b,y]=n.useState([]),[g,S]=n.useState(!1),f=X(),A=_t(),F=Lt(),{data:M}=ve(null,"user","political");n.useEffect(()=>{(M==null?void 0:M.data.length)>0&&(y(M.data),x(M.data))},[M]);const P=T=>{const $=T.target.value.toLowerCase();h($),S(!0),$||m(null),x(b.filter(k=>k.name.toLowerCase().includes($)))},R=T=>{S(!1),m(T),h(T.name)},E=T=>{const{name:$,value:k,files:V}=T.target;r({...s,[$]:V?V[0]:k})},U=T=>{const{name:$,value:k}=T.target;d({...l,[$]:k})},L=(T,$)=>{if(T.preventDefault(),!c){f(p({message:"Politician Not Selected",type:"warn"}));return}if($==="sms"){if(T.preventDefault(),l.templeteName.trim()===""||l.message.trim()===""){f(p({message:"All Fields Are Required",type:"warn"}));return}A.mutate({userId:c._id,templeteData:l},{onSuccess:()=>{d({templeteName:"",message:""}),f(p({message:"SMS Templete Added"}))},onError:k=>f(p({message:k,type:"error"}))})}if($==="whatsapp"){if(T.preventDefault(),s.templeteName.trim()===""||s.message.trim()===""){f(p({message:"All Fields Are Required Image Optional",type:"warn"}));return}F.mutate({userId:c._id,templeteData:s},{onSuccess:()=>{r({templeteName:"",message:"",whatsappImg:null}),f(p({message:"Whatsapp Templete Added"}))},onError:k=>f(p({message:k,type:"error"}))})}},D=()=>u(!1);return e.jsxs("div",{className:"Form mx-auto mt-10 p-6 rounded-lg shadow-lg max-w-4xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-[#640D5F] text-center",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Create Message"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Select Politician:"}),e.jsx("input",{type:"text",placeholder:"Search for a politician...",value:o,onChange:P,className:"w-full p-2 rounded-md border border-[#640D5F]"}),g&&o&&e.jsx("ul",{className:"mt-2 bg-white border border-[#640D5F] rounded-md shadow-lg max-h-40 overflow-y-auto",children:i.map(T=>e.jsxs("li",{onClick:()=>R(T),className:"p-2 hover:bg-[#fdf4ff] cursor-pointer",children:[T.name," - ",T.phone]},T.id))}),c&&e.jsxs("p",{className:"mt-2 text-sm text-[#640D5F]",children:["Selected Politician: ",e.jsx("strong",{children:c.name})]})]}),e.jsx("div",{className:"flex items-center justify-center bg-[#ebace8] rounded-full p-1 w-full max-w-md mx-auto mt-4",children:["Text Message","WhatsApp Message"].map(T=>e.jsx("div",{className:`flex-1 text-center py-2 rounded-full cursor-pointer transition-all font-semibold text-lg ${t===T?"bg-[#640D5F] text-white":"text-black"}`,onClick:()=>a(T),children:T},T))}),t==="Text Message"&&e.jsxs("form",{onSubmit:T=>L(T,"sms"),className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Template Name:"}),e.jsx("input",{type:"text",name:"templeteName",placeholder:"Enter template name...",value:l.templeteName,onChange:U,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Message:"}),e.jsx("textarea",{name:"message",placeholder:"Enter your message...",value:l.message,onChange:U,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]",rows:"4"})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{type:"submit",className:"bg-[#aa1ba3] hover:bg-[#640D5F] text-white font-bold w-40 p-2 rounded-md transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:A.isPending,children:A.isPending?"Creating...":"Create Message"})})]}),t==="WhatsApp Message"&&e.jsxs("form",{onSubmit:T=>L(T,"whatsapp"),className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Template Name:"}),e.jsx("input",{type:"text",name:"templeteName",placeholder:"Enter template name...",value:s.templeteName,onChange:E,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Message:"}),e.jsx("textarea",{name:"message",placeholder:"Enter your message...",value:s.message,onChange:E,required:!0,className:"w-full p-2 rounded-md border border-[#640D5F]",rows:"4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Image (for WhatsApp only):"}),e.jsx("input",{type:"file",name:"whatsappImg",accept:"image/*",onChange:E,className:"w-full p-2 rounded-md border border-[#640D5F]"})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{type:"submit",className:"bg-[#aa1ba3] hover:bg-[#640D5F] text-white font-bold w-40 p-2 rounded-md transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:F.isPending,children:F.isPending?"Creating...":"Create Message"})})]}),j&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-[#640D5F]",children:["Your ",t.toLowerCase()," is created successfully!"]}),e.jsx("button",{onClick:D,className:"mt-4 bg-[#aa1ba3] hover:bg-[#640D5F] text-white font-bold py-1 px-4 rounded",children:"Close"})]})})]})},$a=()=>{const[t,a]=n.useState([{name:"Business Person 1",plan:"Premium",revenue:"$100,000"},{name:"Business Person 2",plan:"Basic",revenue:"$50,000"}]),[s,r]=n.useState([{name:"Politician 1",plan:"Gold",followers:"10,000"},{name:"Politician 2",plan:"Silver",followers:"5,000"}]),[l,d]=n.useState("business"),[o,h]=n.useState(null),[i,x]=n.useState(null),c=()=>{const m=new je;m.setFontSize(16),m.text("All Reports",10,10),m.setFontSize(14),m.text("Business Report",10,20),m.setFontSize(12),t.forEach((j,u)=>{m.text(`${j.name} - ${j.plan} - Revenue: ${j.revenue}`,10,30+u*10)}),m.setFontSize(14),m.text("Politician Report",10,70),m.setFontSize(12),s.forEach((j,u)=>{m.text(`${j.name} - ${j.plan} - Followers: ${j.followers}`,10,80+u*10)}),o&&i?m.save(`all_reports_${o.toLocaleDateString()}_to_${i.toLocaleDateString()}.pdf`):m.save("all_reports.pdf")};return e.jsxs("div",{className:"Form mx-auto mt-10 p-6 rounded-lg shadow-lg max-w-4xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Report"}),e.jsxs("div",{className:"mb-3 p-6 pb-3 rounded-lg ",children:[e.jsx("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Report Type"}),e.jsxs("select",{id:"reportType",value:l,onChange:m=>d(m.target.value),className:"w-full p-2 border border-[#640D5F] rounded-md shadow-sm focus:ring-[#640D5F] focus:border-[#640D5F] sm:text-sm",children:[e.jsx("option",{value:"business",children:"Business Report"}),e.jsx("option",{value:"politician",children:"Politician Report"}),e.jsx("option",{value:"all",children:"All Reports"})," "]})]}),e.jsxs("div",{className:"mb-3 p-6 rounded-lg",children:[e.jsx("label",{htmlFor:"dateRange",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Date Range (Optional)"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx(ct,{selected:o,onChange:m=>h(m),selectsStart:!0,startDate:o,endDate:i,isClearable:!0,placeholderText:"Start Date",className:"w-full p-2 border border-[#640D5F] rounded-md shadow-sm focus:ring-[#640D5F] focus:border-[#640D5F] sm:text-sm"}),e.jsx(ct,{selected:i,onChange:m=>x(m),selectsEnd:!0,startDate:o,endDate:i,minDate:o,isClearable:!0,placeholderText:"End Date",className:"w-full p-2 border border-[#640D5F] rounded-md shadow-sm focus:ring-[#640D5F] focus:border-[#640D5F] sm:text-sm"})]})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md flex justify-center",children:e.jsx("button",{onClick:c,className:"w-60 bg-[#aa1ba3] text-white px-4 py-2 rounded-md hover:bg-[#640D5F] transition duration-200 focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:ring-offset-2",children:"Download Report as PDF"})})]})},Ot=bt({name:"userReducer",initialState:{user:null},reducers:{setUserData:(t,a)=>{t.user=a.payload},setLogoutAdmin:t=>{t.user=null}}}),{setUserData:Bt,setLogoutAdmin:Ia}=Ot.actions,Oe=t=>t.userReducer.user,Ua=Ot.reducer,Ra=()=>{const[t,a]=n.useState({name:"",email:"",password:"",role:"user",permissions:[]}),[s,r]=n.useState(!1),l=Le(Oe),[d,o]=n.useState({}),[h,i]=n.useState([]),x=X(),c=Us(),{data:m}=We(null,"user");n.useEffect(()=>{if((m==null?void 0:m.data.length)>0){const f=[...m.data].sort((A,F)=>A.role.localeCompare(F.role));i(f)}},[m]),n.useEffect(()=>{l&&l.role==="superadmin"?r(!0):r(!1)},[l]);const j=()=>{let f={};return t.name.trim()||(f.name="Name is required"),t.email?/\S+@\S+\.\S+/.test(t.email)||(f.email="Email is not valid"):f.email="Email is required",t.password?t.password.length<6&&(f.password="Password must be at least 6 characters"):f.password="Password is required",o(f),Object.keys(f).length===0},u=f=>{a({...t,[f.target.name]:f.target.value})},b=f=>{a(A=>{const F=A.permissions.includes(f)?A.permissions.filter(M=>M!==f):[...A.permissions,f];return{...A,permissions:F}})},y=f=>{f.preventDefault(),j()&&c.mutate(t,{onSuccess:()=>{a({name:"",email:"",password:"",permissions:[],role:"user"}),o({}),x(p({message:"New Staff Member Added."}))},onError:A=>x(p({message:A,type:"error"}))})},g={business:"Business",politician:"Politician",portfolio:"Portfolio",notification:"Notifications",configuration:"Configuration",enquiry:"Enquiry"},S={business:"Business",politician:"Politician",portfolio:"Portfolio",staff:"Staff",associate:"Associate Management",account:"Account",notification:"Notifications",configuration:"Configuration",report:"Report",plan:"Plan",enquiry:"Enquiry"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Form max-w-xl mx-auto mt-10 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-[#640D5F]",children:s?"Add Employee":"Add Staff"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Employee Name",value:t.name,onChange:u,className:"w-full rounded p-2 border"}),d.name&&e.jsx("p",{className:"text-red-400 text-sm",children:d.name}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:u,className:"w-full rounded p-2 border"}),d.email&&e.jsx("p",{className:"text-red-400 text-sm",children:d.email}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:t.password,onChange:u,className:"w-full rounded p-2 border"}),d.password&&e.jsx("p",{className:"text-red-400 text-sm",children:d.password}),s&&e.jsxs("div",{className:" flex align-baseline gap-4 items-center",children:[e.jsx("p",{className:"block text-[#4e0c4a] font-semibold text-nowrap",children:"Select Type"}),e.jsxs("select",{name:"role",value:t.role,onChange:u,className:"w-full p-2 border border-[#640D5F] rounded-md focus:outline-none focus:ring-1 focus:ring-[#640D5F] ",children:[e.jsx("option",{value:"user",children:" Staff"},"user"),e.jsx("option",{value:"admin",children:"Admin"},"admin")]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Permissions:"}),e.jsx("div",{className:"permission_button grid grid-cols-2 md:grid-cols-2 gap-2 mt-2",children:Object.entries(t.role==="admin"?S:g).map(([f,A])=>e.jsxs("button",{type:"button",className:`px-4 py-2 rounded-full border cursor-pointer ${t.permissions.includes(f)?"bg-pink-400 text-white border-gray-600":"border-gray-400 text-gray-500 bg-pink-100"}`,onClick:()=>b(f),children:[A," ",t.permissions.includes(f)?"✓":"+"]},f))})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsxs("button",{type:"submit",className:"w-40 bg-[#aa1ba3] hover:bg-[#640D5F] font-bold text-white p-2 mt-5 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:c.isPending,children:[c.isPending?"Adding ":"Add ",s?"Employee":"Staff"]})})]})]}),h.length>0&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:s?"Employee List":"Staff List"}),e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#640D5F] text-white",children:[e.jsx("th",{className:"border border-gray-300 p-2",children:"Sr. No."}),e.jsx("th",{className:"border border-gray-300 p-2",children:s?" Employee Name":"Staff Name"}),e.jsx("th",{className:"border border-gray-300 p-2",children:"Email"}),s&&e.jsx("th",{className:"border border-gray-300 p-2",children:"Role"}),e.jsx("th",{className:"border border-gray-300 p-2",children:"Permissions"})]})}),e.jsx("tbody",{children:h.map((f,A)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"border border-gray-300 p-2 text-center",children:A+1}),e.jsx("td",{className:"border border-gray-300 p-2 text-center",children:f.name}),e.jsx("td",{className:"border border-gray-300 p-2 text-center",children:f.email}),s&&e.jsx("td",{className:"border border-gray-300 p-2 text-center",children:f.role==="user"?"Staff":"Admin"}),e.jsx("td",{className:"border border-gray-300 p-2 text-center",children:f.permissions.map(F=>S[F]||F).join(", ")})]},A))})]})]})]})},qa=()=>{var M;const[t,a]=n.useState({name:"",email:"",mobile:"",state:"",district:"",taluka:"",otp:""}),s=X(),r=Vs(),l=_e(),[d,o]=n.useState({}),[h,i]=n.useState([]),{data:x}=Ie(),[c,m]=n.useState([]),[j,u]=n.useState([]),b=["Maharastra"],{data:y}=rt(),{data:g}=lt((M=c==null?void 0:c.find(P=>(P==null?void 0:P.districtnameenglish)===(t==null?void 0:t.district)))==null?void 0:M.districtcode);n.useEffect(()=>{(x==null?void 0:x.data.length)>0&&i(x.data)},[x]),n.useEffect(()=>{(y==null?void 0:y.length)>0&&m(y)},[y]),n.useEffect(()=>{(g==null?void 0:g.length)>0&&u(g)},[g]);const S=()=>{let P={};return t.name.trim()||(P.name="Name is required"),t.email?/\S+@\S+\.\S+/.test(t.email)||(P.email="Email is not valid"):P.email="Email is required",t.mobile?/^\d{10}$/.test(t.mobile)||(P.mobile="Mobile number must be exactly 10 digits"):P.mobile="Mobile number is required",t.state||(P.state="State is required"),t.district||(P.district="District is required"),t.taluka||(P.taluka="Taluka is required"),t.otp?/^\d{4}$/.test(t.otp)||(P.otp="OTP must be exactly 4 digits"):P.otp="OTP is required",o(P),Object.keys(P).length===0},f=P=>{a({...t,[P.target.name]:P.target.value})},A=P=>{P.preventDefault(),S()&&r.mutate(t,{onSuccess:()=>{s(p({message:"Associate Registered Successfully!"})),a({name:"",email:"",mobile:"",state:"",district:"",taluka:"",otp:""}),o({})},onError:R=>s(p({message:R,type:"error"}))})},F=()=>{if(!t.mobile){s(p({message:"Mobile number is required",type:"warn"}));return}if(!/^\d{10}$/.test(t.mobile)){s(p({message:"Mobile number must be exactly 10 digits",type:"warn"}));return}l.mutate(t.mobile,{onSuccess:()=>{s(p({message:"OTP Sent to Mobile No",type:"success"}))},onError:P=>{s(p({message:P,type:"error"}))}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Form max-w-xl mx-auto mt-10 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Add Associate"}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Associate Name",value:t.name,onChange:f,className:"w-full rounded p-2 border border-[#640D5F]"}),d.name&&e.jsx("p",{className:"text-red-400 text-sm",children:d.name}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:f,className:"w-full rounded p-2 border border-[#640D5F]"}),d.email&&e.jsx("p",{className:"text-red-400 text-sm",children:d.email}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",name:"mobile",placeholder:"Mobile Number",value:t.mobile,onChange:f,className:"w-1/2 rounded p-2 border border-[#640D5F]"}),e.jsx("button",{type:"button",onClick:F,className:"w-1/3 bg-[#e762e1] hover:bg-[#d179cc] font-bold text-white p-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.isPending,children:l.isPending?"Sending OTP":"Get OTP"}),e.jsx("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:t.otp,onChange:f,className:"w-1/3 rounded p-2 border border-[#640D5F]"})]}),d.mobile&&e.jsx("p",{className:"text-red-400 text-sm",children:d.mobile}),d.otp&&e.jsx("p",{className:"text-red-400 text-sm",children:d.otp}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{name:"state",value:t.state,onChange:f,className:"w-1/3 rounded p-2 border border-[#640D5F]",children:[e.jsx("option",{value:"",children:"Select State"}),b.map(P=>e.jsx("option",{value:P,children:P},P))]}),d.state&&e.jsx("p",{className:"text-red-400 text-sm",children:d.state}),e.jsxs("select",{name:"district",value:t.district,onChange:f,className:"w-1/3 rounded p-2 border border-[#640D5F]",disabled:!t.state,children:[e.jsx("option",{value:"",children:"Select District"}),t.state&&(c==null?void 0:c.map(P=>e.jsx("option",{value:P.districtnameenglish,children:P.districtnameenglish},P.districtcode)))]}),d.district&&e.jsx("p",{className:"text-red-400 text-sm",children:d.district}),e.jsxs("select",{name:"taluka",value:t.taluka,onChange:f,className:"w-1/3 rounded p-2 border border-[#640D5F]",disabled:!t.district,children:[e.jsx("option",{value:"",children:"Select Taluka"}),t.district&&(j==null?void 0:j.map(P=>e.jsx("option",{value:P.subdistrictnameenglish,children:P.subdistrictnameenglish},P.subdistrictcode)))]}),d.taluka&&e.jsx("p",{className:"text-red-400 text-sm",children:d.taluka})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{type:"submit",className:"w-40 bg-[#aa1ba3] hover:bg-[#640D5F] font-bold text-white p-2 mt-5 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.isPending,children:r.isPending?"Adding...":"Add Associate"})})]})]}),e.jsx("div",{children:h.length>0&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:"Associate List"}),e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#640D5F] text-white",children:[e.jsx("th",{className:"border border-gray-300 p-2",children:"Sr. No."}),e.jsx("th",{className:"border border-gray-300 p-2",children:"Associate Name"}),e.jsx("th",{className:"border border-gray-300 p-2",children:"Email"}),e.jsx("th",{className:"border border-gray-300 p-2",children:"Mobile No."})]})}),e.jsx("tbody",{children:h.map((P,R)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"border border-gray-300 p-2 text-center",children:R+1}),e.jsx("td",{className:"border border-gray-300 p-2",children:P.name}),e.jsx("td",{className:"border border-gray-300 p-2",children:P.email}),e.jsx("td",{className:"border border-gray-300 p-2",children:P.mobile})]},R))})]})]})})]})},La=()=>{const[t,a]=n.useState(""),[s,r]=n.useState([]),[l,d]=n.useState([]),[o,h]=n.useState(null),[i,x]=n.useState({name:"",email:"",permissions:[],role:""}),[c,m]=n.useState(!1),[j,u]=n.useState(null),[b,y]=n.useState(""),[g,S]=n.useState({}),f=X(),A=Rs(),F=qs(),{data:M}=We(null,"user"),[P,R]=n.useState(!1),E=Le(Oe);n.useEffect(()=>{E&&E.role==="superadmin"?R(!0):R(!1)},[E]),n.useEffect(()=>{if((M==null?void 0:M.data.length)>0){const O=[...M.data].sort((se,w)=>se.role.localeCompare(w.role));r(O),d(O)}},[M]),n.useEffect(()=>{d(s)},[s]);const U=O=>{const se=O.target.value.toLowerCase();a(se),d(s.filter(w=>w.name.toLowerCase().includes(se)))},L=O=>{h(O._id),x({...O})},D=O=>{x({...i,[O.target.name]:O.target.value})},T=O=>{x(se=>{const w=se.permissions.includes(O)?se.permissions.filter(K=>K!==O):[...se.permissions,O];return{...se,permissions:w}})},$=()=>{let O={};return i.name.trim()||(O.name="Name is required"),i.email?/\S+@\S+\.\S+/.test(i.email)||(O.email="Email is not valid"):O.email="Email is required",S(O),Object.keys(O).length===0},k=()=>{$()&&A.mutate({adminId:o,updatedData:i},{onSuccess:()=>{h(null),f(p({message:"Staff Details Updated"}))},onError:O=>f(p({message:O,type:"error"}))})},V=O=>{u(O),m(!0)},G=()=>{if(b.toLowerCase()!=="confirm"){alert("Please enter 'confirm' to delete the record.");return}F.mutate(j,{onSuccess:()=>{m(!1),u(null),y(""),f(p({message:"Staff Successfully Deleted"}))},onError:O=>f(p({message:O,type:"error"}))})},ie={business:"Business",politician:"Politician",portfolio:"Portfolio",notification:"Notifications",configuration:"Configuration",enquiry:"Enquiry"},J={business:"Business",politician:"Politician",portfolio:"Portfolio",staff:"Staff",associate:"Associate Management",account:"Account",notification:"Notifications",configuration:"Configuration",report:"Report",plan:"Plan",enquiry:"Enquiry"};return e.jsxs("div",{className:"Form p-6 mt-10 mx-auto rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-[#640D5F] mb-6",children:P?"Employee Management":"Staff Management"}),e.jsx("input",{type:"search",placeholder:"Search by Name",value:t,onChange:U,className:"w-full p-3 border rounded-lg mb-4"}),o&&e.jsxs("div",{className:"mb-6 p-4 bg-purple-100 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#640D5F] mb-4 text-center",children:i.role==="user"?"Edit Staff":"Edit Admin"}),e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:i.name,onChange:D,className:"w-full p-3 border rounded-lg mb-2"}),g.name&&e.jsx("p",{className:"text-red-400 text-sm",children:g.name}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:i.email,onChange:D,className:"w-full p-3 border rounded-lg mb-2"}),g.email&&e.jsx("p",{className:"text-red-400 text-sm",children:g.email}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Permissions:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(i.role==="admin"?J:ie).map(([O,se])=>e.jsxs("button",{type:"button",className:`px-4 py-2 rounded-full border ${i.permissions.includes(O)?"bg-pink-500 text-white":"border-gray-400 text-gray-100 bg-purple-400"}`,onClick:()=>T(O),children:[se," ",i.permissions.includes(O)?"✓":"+"]},O))})]}),e.jsx("div",{className:"flex mt-3 justify-center w-full",children:e.jsx("button",{onClick:k,className:"w-60 bg-[#9b1694] text-white p-3 rounded-lg font-bold hover:bg-[#9b1690] disabled:opacity-50 disabled:cursor-not-allowed",disabled:A.isPending,children:A.isPending?"Updating":"Update"})})]}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#b017a8] text-white",children:[e.jsx("th",{className:"p-3 border",children:"Name"}),e.jsx("th",{className:"p-3 border",children:"Email"}),P&&e.jsx("th",{className:"p-3 border",children:"Role"}),e.jsx("th",{className:"p-3 border",children:"Permissions"}),e.jsx("th",{className:"p-3 border",children:"Actions"})]})}),e.jsx("tbody",{children:l.map(O=>e.jsxs("tr",{className:"border bg-white hover:bg-gray-200",children:[e.jsx("td",{className:"p-3 border text-center",children:O.name}),e.jsx("td",{className:"p-3 border text-center",children:O.email}),P&&e.jsx("td",{className:"p-3 border text-center",children:O.role==="user"?"Staff":"Admin"}),e.jsx("td",{className:"p-3 border text-center",children:O.permissions.map(se=>J[se]||se).join(", ")}),e.jsx("td",{className:"p-3 border text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{onClick:()=>L(O),className:"bg-blue-600 text-white px-3 py-1 rounded-lg",children:"Edit"}),e.jsx("button",{onClick:()=>V(O._id),className:"bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-700 transition",children:"Delete"})]})})]},O._id))})]}),c&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Confirm Deletion"}),e.jsx("p",{children:"Enter 'confirm' to delete the record:"}),e.jsx("input",{type:"text",value:b,onChange:O=>y(O.target.value),className:"w-full p-2 border rounded-lg mb-4"}),e.jsxs("div",{className:"flex justify-center gap-5",children:[e.jsx("button",{onClick:G,className:"bg-red-500 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:F.isPending,children:F.isPending?"Deleteing":"Delete"}),e.jsx("button",{onClick:()=>m(!1),className:"bg-gray-300 text-black px-4 py-2 rounded-lg",children:"Cancel"})]})]})})]})},_a=()=>{const[t,a]=n.useState(""),[s,r]=n.useState([]),[l,d]=n.useState([]),[o,h]=n.useState(null),[i,x]=n.useState({name:"",email:"",mobile:"",state:"",district:"",taluka:""}),[c,m]=n.useState(!1),[j,u]=n.useState(null),[b,y]=n.useState(""),[g,S]=n.useState({}),f=X(),A=Gs(),F=Ks(),{data:M}=Ie();n.useEffect(()=>{var $;(($=M==null?void 0:M.data)==null?void 0:$.length)>0&&r(M.data)},[M]),n.useEffect(()=>{d(s)},[s]);const P=$=>{const k=$.target.value.toLowerCase();a(k),d(s.filter(V=>V.name.toLowerCase().includes(k)))},R=$=>{h($._id),x({...$})},E=$=>{x({...i,[$.target.name]:$.target.value})},U=()=>{let $={};return i.name.trim()||($.name="Name is required"),i.email?/\S+@\S+\.\S+/.test(i.email)||($.email="Email is not valid"):$.email="Email is required",i.mobile?/^\d{10}$/.test(i.mobile)||($.mobile="Mobile number must be exactly 10 digits"):$.mobile="Mobile number is required",i.state||($.state="State is required"),i.district||($.district="District is required"),i.taluka||($.taluka="Taluka is required"),S($),Object.keys($).length===0},L=async()=>{U()&&A.mutate({associateId:i._id,updatedData:i},{onSuccess:()=>{h(null),f(p({message:"Associate Details Updated"}))},onError:$=>f(p({message:$,type:"error"}))})},D=$=>{u($),m(!0)},T=()=>{if(b.toLowerCase()!=="confirm"){alert("Please enter 'confirm' to delete the record.");return}F.mutate(j,{onSuccess:()=>{m(!1),u(null),y(""),f(p({message:"Associate Deleted"}))},onError:$=>f(p({message:$,type:"error"}))})};return e.jsxs("div",{className:"Form p-6 mt-10 mx-auto rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-[#640D5F] mb-6",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Associate Management"}),e.jsx("input",{type:"search",placeholder:"Search by Name",value:t,onChange:P,className:"w-full p-3 border border-[#640D5F] text-black rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-[#640D5F]"}),o&&e.jsxs("div",{className:"mb-6 p-4 bg-purple-100 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#640D5F] mb-4 text-center",children:"Edit Associate"}),e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:i.name,onChange:E,className:"w-full p-3 border rounded-lg mb-2"}),g.name&&e.jsx("p",{className:"text-red-400 text-sm",children:g.name}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:i.email,onChange:E,className:"w-full p-3 border rounded-lg mb-2"}),g.email&&e.jsx("p",{className:"text-red-400 text-sm",children:g.email}),e.jsx("input",{type:"text",name:"mobile",placeholder:"Mobile Number",value:i.mobile,onChange:E,className:"w-full p-3 border rounded-lg mb-2"}),g.mobile&&e.jsx("p",{className:"text-red-400 text-sm",children:g.mobile}),e.jsx("input",{type:"text",name:"state",placeholder:"State",value:i.state,onChange:E,className:"w-full p-3 border rounded-lg mb-2"}),g.state&&e.jsx("p",{className:"text-red-400 text-sm",children:g.state}),e.jsx("input",{type:"text",name:"district",placeholder:"District",value:i.district,onChange:E,className:"w-full p-3 border rounded-lg mb-2"}),g.district&&e.jsx("p",{className:"text-red-400 text-sm",children:g.district}),e.jsx("input",{type:"text",name:"taluka",placeholder:"Taluka",value:i.taluka,onChange:E,className:"w-full p-3 border rounded-lg mb-2"}),g.taluka&&e.jsx("p",{className:"text-red-400 text-sm",children:g.taluka}),e.jsx("div",{className:"flex mt-3 justify-center w-full",children:e.jsx("button",{onClick:L,className:"w-60 bg-[#9b1694] text-white p-3 rounded-lg font-bold hover:bg-[#9b1690] disabled:opacity-50 disabled:cursor-not-allowed",disabled:A.isPending,children:A.isPending?"Updating":"Update"})})]}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300 shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#b017a8] text-white uppercase text-sm leading-normal",children:[e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Name"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Email"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Mobile"}),e.jsx("th",{className:"p-3 border border-[#640D5F]",children:"Actions"})]})}),e.jsx("tbody",{children:l.map($=>e.jsxs("tr",{className:"border border-[#640D5F] bg-white hover:bg-gray-200 transition",children:[e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:$.name}),e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:$.email}),e.jsx("td",{className:"p-3 border border-[#640D5F] text-center",children:$.mobile}),e.jsxs("td",{className:"p-3 border border-[#640D5F] text-center",children:[e.jsx("button",{onClick:()=>R($),className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-800 transition mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>D($._id),className:"bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-700 transition",children:"Delete"})]})]},$._id))})]}),c&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-2",children:"Enter 'confirm' to delete this associate:"}),e.jsx("input",{type:"text",value:b,onChange:$=>y($.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),e.jsx("button",{onClick:T,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:F.isPending,children:F.isPending?"Deleteing...":"Confirm"}),e.jsx("button",{onClick:()=>m(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})})]})},Oa=()=>{const[t,a]=n.useState(""),[s,r]=n.useState(null),[l,d]=n.useState(""),[o,h]=n.useState(!1),[i,x]=n.useState({name:"",mobile:"",otp:"",password:"member@123"}),[c,m]=n.useState(!0),[j,u]=n.useState(null),[b,y]=n.useState({name:"",mobile:""}),[g,S]=n.useState(null),[f,A]=n.useState(!1),[F,M]=n.useState(""),[P,R]=n.useState(""),[E,U]=n.useState(""),[L,D]=n.useState(!1),[T,$]=n.useState(!1),[k,V]=n.useState(null),[G,ie]=n.useState({}),[J,O]=n.useState([]),[se,w]=n.useState([]),[K,le]=n.useState([]),[re,W]=n.useState(null),I=X(),ne=_e(),{data:ue}=Qe(),C=$t(),v=It(),ae=Ve(),oe=Ge(),xe=Ke();n.useEffect(()=>{if((ue==null?void 0:ue.data.length)>0){const N=ue.data.filter(z=>{var Y,he;return z.type==="business"&&((he=(Y=z==null?void 0:z.userPlans)==null?void 0:Y.planDetails)==null?void 0:he.addMembers)===!0});O(N)}},[ue]),n.useEffect(()=>{if(!F){w(J||[]);return}const N=J.length>0?J.filter(z=>{var Y,he;return((Y=z.name)==null?void 0:Y.toLowerCase().includes(F.toLowerCase()))||((he=z.mobile)==null?void 0:he.includes(F))}):[];w(N)},[J,F]);const _=async N=>{try{const z=await Mt(N);z.data?(W(z.data),A(!0)):I(p({message:"No data found for this user."}))}catch(z){I(p({message:z.message}))}};n.useEffect(()=>{if(!P){le(re||[]);return}const N=re.length>0?re.filter(z=>z.name.toLowerCase().includes(P.toLowerCase())||z.mobile.toLowerCase().includes(P.toLowerCase())):[];le(N)},[re,P]);const ce=N=>a(N.target.value),Z=(N,z)=>{if(b.name===""||!/^\d{10}$/.test(b.mobile)){I(p({message:"All Valid Fields Are Required",type:"error"}));return}v.mutate({memberId:N,memberData:b},{onSuccess:()=>{u(null),y({name:"",mobile:""}),I(p({message:"Employee Details Updated"})),_(z)},onError:Y=>I(p({message:Y,type:"error"}))})},ee=N=>{r(N),d(N.userPlans.planDetails),a(""),h(!1)},be=()=>{r(null),d(""),A(!1)},Re=()=>{h(!o)},de=N=>{x({...i,[N.target.name]:N.target.value})},Te=()=>{let N={};return i.name.trim()||(N.name="Name is required"),i.mobile?/^\d{10}$/.test(i.mobile)||(N.mobile="Mobile number must be exactly 10 digits"):N.mobile="Mobile number is required",i.password?i.password.length<6&&(N.password="Password must be at least 6 characters"):N.password="Password is required",i.otp?/^\d{4}$/.test(i.otp)||(N.otp="OTP must be exactly 4 digits"):N.otp="OTP is required",ie(N),Object.keys(N).length===0},ke=()=>{Te()&&C.mutate({userId:s._id,memberData:i},{onSuccess:()=>{x({name:"",mobile:"",otp:"",password:"member@123"}),h(!1),I(p({message:"New Employee Added Successfully"}))},onError:N=>I(p({message:N,type:"error"}))})},Ce=N=>{y({...b,[N.target.name]:N.target.value})},Ae=(N,z,Y)=>{switch(N){case"edit":u(z),y(Y);break;case"delete":V(Y),D(!0);break;case"reset":V(Y),$(!0);break}},He=N=>{xe.mutate({userId:N._id,status:!N.verified},{onSuccess:()=>{_(N.userId),I(p({message:"Employee Verifiaction Updated"}))},onError:z=>I(p({message:z,type:"error"}))})},Xe=()=>{if(!i.mobile){I(p({message:"Mobile number is required",type:"warn"}));return}if(!/^\d{10}$/.test(i.mobile)){I(p({message:"Mobile number must be 10 digits",type:"warn"}));return}ne.mutate(i.mobile,{onSuccess:()=>{I(p({message:"OTP Sent to Mobile No",type:"success"}))},onError:N=>{I(p({message:N,type:"error"}))}})},Je=()=>{ae.mutate(k._id,{onSuccess:()=>{D(!1),_(k.userId),V(null),I(p({message:"Employee Deleted Successfully"}))},onError:N=>I(p({message:N,type:"error"}))})},Ze=()=>{oe.mutate(k._id,{onSuccess:()=>{$(!1),_(k.userId),V(null),I(p({message:"Employee Key has been reset"}))},onError:N=>I(p({message:N,type:"error"}))})};return e.jsxs("div",{className:"Form mt-10 flex flex-col items-center",children:[e.jsxs("div",{className:"flex gap-6 w-full",children:[e.jsxs("div",{className:`p-6 py-10 flex flex-col justify-center items-center rounded-lg ${s?"w-2/3":"w-full"}`,children:[e.jsx("h1",{className:"text-3xl font-bold text-[#640D5F] mb-6",children:"Employee Management"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",value:t,onChange:ce,placeholder:"Search customer...",className:"p-2 border rounded-lg w-150"}),t&&e.jsx("div",{className:"absolute bg-white border mt-1 w-150 shadow-lg rounded-lg max-h-60 overflow-y-auto",children:J.length===0?e.jsx("div",{className:"p-2 text-gray-500",children:"No users found"}):J.filter(N=>N.name.toLowerCase().includes(t.toLowerCase())).map((N,z)=>e.jsx("div",{onClick:()=>ee(N),className:"p-2 cursor-pointer hover:bg-gray-200",children:N.name},z))})]}),s&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 ",children:[e.jsxs("p",{className:"text-green-600 font-semibold",children:["Selected customer: ",s.name]}),e.jsx("button",{onClick:be,className:"text-red-500 hover:text-red-700",style:{boxShadow:"none"},children:"Clear"})]}),e.jsx("div",{className:"flex space-x-4 mt-10",children:e.jsx("button",{style:{boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},className:`bg-[#aa1ba3] text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-[#640D5F] transition duration-200 ${s?"":"opacity-50 cursor-not-allowed"}`,onClick:Re,disabled:!s,children:"➕ Add Employee"})}),o&&e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-[#faf1f9] w-100",style:{boxShadow:"rgba(6, 24, 44, 0.4) 0px 0px 0px 2px, rgba(6, 24, 44, 0.65) 0px 4px 6px -1px, rgba(255, 255, 255, 0.08) 0px 1px 0px inset"},children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Add New Employee"}),e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:i.name,onChange:de,className:"w-full p-2 mb-2 border rounded"}),G.name&&e.jsx("p",{className:"text-red-400 text-sm",children:G.name}),e.jsx("input",{type:"mobile",name:"mobile",placeholder:"Mobile No.",value:i.mobile,onChange:de,className:"w-full p-2 mb-2 border rounded"}),G.mobile&&e.jsx("p",{className:"text-red-400 text-sm",children:G.mobile}),e.jsxs("div",{className:"flex items-center space-x-2 my-2 mt-2",children:[e.jsx("button",{className:"bg-blue-500 w-1/2 text-white px-4 py-2 rounded hover:bg-blue-600 shadow-md transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-none disabled:hover:scale-100",onClick:Xe,disabled:ne.isPending,children:ne.isPending?"Sending OTP...":"Get OTP"}),e.jsx("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:i.otp,onChange:de,className:"w-1/2 p-2 border rounded"}),G.otp&&e.jsx("p",{className:"text-red-400 text-sm",children:G.otp})]}),e.jsx("label",{htmlFor:"password",children:"Default Password"}),e.jsx("input",{type:"text",name:"password",value:i.password,onChange:de,className:"w-full p-2 mb-2 border rounded"}),G.password&&e.jsx("p",{className:"text-red-400 text-sm",children:G.password}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("button",{className:"bg-[#aa1ba3] text-white px-4 py-2 rounded hover:bg-green-600 shadow-md transition-transform transform hover:scale-105 disabled:opacity-50 disabled:hover:scale-100",onClick:ke,disabled:C.isPending,children:C.isPending?"Submitting...":"Submit"})})]})]}),s&&e.jsxs("div",{className:"bg-[#bd4fb7] p-6 rounded-lg shadow-md w-1/3 h-64 text-white flex flex-col justify-center items-center",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Plan Information"}),l&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold",children:l.name}),e.jsxs("p",{className:"text-xl",children:[e.jsxs("span",{className:"text-green-400",children:[l.validity," Days"]})," Validity"]})]})]})]}),e.jsxs("div",{className:"mt-6 w-full p-4 rounded-lg overflow-x-auto",children:[f&&g&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-bold",children:["Employees under ",g.name]}),e.jsx("button",{onClick:()=>{A(!1),S(null)},className:"text-red-500 hover:text-red-700 p-2 rounded-xl",style:{boxShadow:"none",border:"2px solid red"},children:"✖ Close"})]}),e.jsx("input",{type:"text",value:P,onChange:N=>R(N.target.value),placeholder:"Search employees...",className:"p-1 border rounded-lg w-70 mb-4 center mt-2"}),K&&K.length>0?e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ebace8]",children:[e.jsx("th",{className:"border px-4 py-2",children:"Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Mobile Number"}),e.jsx("th",{className:"border px-4 py-2",children:"Verified"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:K.map((N,z)=>{const Y=K.findIndex(he=>he._id===N._id);return e.jsxs("tr",{className:"text-center hover:bg-gray-100 h-16",children:[e.jsx("td",{className:"border px-4 py-2",children:j===Y?e.jsx("input",{type:"text",name:"name",value:b.name,onChange:Ce,className:"p-1 border rounded"}):N.name}),e.jsx("td",{className:"border px-4 py-2",children:j===Y?e.jsx("input",{type:"mobile",name:"mobile",value:b.mobile,onChange:Ce,className:"p-1 border rounded"}):N.mobile}),e.jsx("td",{className:"border px-4 py-2",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.verified,onChange:()=>He(N),className:"sr-only"}),e.jsx("div",{className:`w-9 h-4 rounded-full ${N.verified?"bg-green-500":"bg-gray-500"} shadow-inner transition-colors duration-200`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-200 ${N.verified?"translate-x-5":"translate-x-0"}`})})]})}),e.jsx("td",{className:"border px-4 py-2",children:j===Y?e.jsx("button",{className:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 shadow-md transition-transform transform hover:scale-105",onClick:()=>Z(N._id,N.userId),children:"Save"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 shadow-md transition-transform transform hover:scale-105",onClick:()=>Ae("edit",Y,N),children:"Edit"}),e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 shadow-md transition-transform transform hover:scale-105 ml-2",onClick:()=>Ae("delete",Y,N),children:"Delete"}),e.jsx("button",{className:"bg-[#0dcaf0] text-white px-2 py-1 rounded hover:bg-[#0dcaf0d4] shadow-md transition-transform transform hover:scale-105 ml-2",onClick:()=>Ae("reset",Y,N),children:"Reset Key"})]})})]},z)})})]}):e.jsxs("p",{className:"text-center text-gray-500",children:["No employees found for ",g.name,"."]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("h2",{className:"text-lg font-bold",children:"Customers"})}),c&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:F,onChange:N=>M(N.target.value),placeholder:"Search customer...",className:"p-1 border rounded-lg w-70 mb-4"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ebace8]",children:[e.jsx("th",{className:"border px-4 py-2",children:"Customers"}),e.jsx("th",{className:"border px-4 py-2",children:"Employee Count"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:se.map(N=>e.jsxs("tr",{className:"text-center hover:bg-gray-100 h-16",children:[e.jsx("td",{className:"border px-4 py-2",children:N.name}),e.jsx("td",{className:"border px-4 py-2",children:N.memberCount||0}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("button",{className:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 shadow-md transition-transform transform hover:scale-105",onClick:()=>{S(N),_(N._id)},children:"View"})})]},N._id))})]})]})]})]}),L&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-2",children:"Enter 'confirm' to delete this employee:"}),e.jsx("input",{type:"text",value:E,onChange:N=>U(N.target.value),className:"border rounded p-2 mb-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:Je,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Confirm"}),e.jsx("button",{onClick:()=>D(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})]})}),T&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Reset Key"}),e.jsx("p",{className:"mb-2",children:"Are you sure you want to reset the Employee Key?"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:Ze,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Confirm"}),e.jsx("button",{onClick:()=>$(!1),className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})]})})]})},Ba=()=>{const[t,a]=n.useState(""),[s,r]=n.useState("business"),[l,d]=n.useState("all"),[o,h]=n.useState([]),{data:i}=Ft(s);n.useEffect(()=>{i!=null&&i.data&&h(i.data)},[i]);const x=l==="all"?o:o.map(c=>({...c,referredUsers:c.referredUsers.filter(m=>{var j;return((j=m.plan)==null?void 0:j.type)&&m.plan.type.toLowerCase()===l.toLowerCase()})})).filter(c=>c.referredUsers.length>0);return e.jsxs("div",{className:"Form p-6 mt-10 rounded-lg",children:[e.jsx("h2",{className:"text-3xl text-center font-bold mb-8 text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"User Details"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("select",{className:"w-48 p-2 border-2 border-[#640D5F] rounded-md focus:ring-2 focus:ring-[#640D5F] text-sm text-center",value:s,onChange:c=>r(c.target.value),children:[e.jsx("option",{value:"business",children:"Business User"}),e.jsx("option",{value:"political",children:"Political User"})]})}),e.jsx("div",{className:"flex justify-center gap-2 mb-8 mt-10",children:["all","basic","advance"].map(c=>e.jsx("button",{className:`w-24 h-10 flex items-center justify-center text-sm font-semibold uppercase transition-all duration-300 rounded-md
              ${l===c?"text-white bg-[#b91bb1] hover:bg-[#fa88f4]":"text-[#42093f] bg-[#fddffb] hover:bg-pink-300"}`,onClick:()=>d(c),children:c==="all"?"All":c.charAt(0).toUpperCase()+c.slice(1)},c))}),e.jsx("input",{type:"search",placeholder:"Search User...",className:"flex justify-center w-50  p-2 border-2 border-[#640D5F] rounded-md mt-11 mb-4 focus:ring-2 focus:ring-[#640D5F] text-sm",value:t,onChange:c=>a(c.target.value)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300 shadow-sm rounded-lg text-sm",children:[e.jsx("thead",{className:"bg-[#c22aba] text-md text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"Name"}),e.jsx("th",{className:"p-2 border",children:"Mobile"}),e.jsx("th",{className:"p-2 border",children:"Email"}),e.jsx("th",{className:"p-2 border",children:"Referred By"}),e.jsx("th",{className:"p-2 border",children:"Plan"})]})}),e.jsx("tbody",{children:x.length>0?x.flatMap(c=>c.referredUsers.filter(m=>m.name.toLowerCase().includes(t.toLowerCase())).map(m=>{var j;return e.jsxs("tr",{className:"hover:bg-gray-100 text-center",children:[e.jsx("td",{className:"p-2 border",children:m.name}),e.jsx("td",{className:"p-2 border",children:m.mobile||"N/A"}),e.jsx("td",{className:"p-2 border",children:m.email||"N/A"}),e.jsx("td",{className:"p-2 border",children:c.rname||"N/A"}),e.jsx("td",{className:"p-2 border capitalize",children:((j=m.plan)==null?void 0:j.type)||"N/A"})]},m._id)})):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-2 text-center text-gray-500",children:"No users found"})})})]})})]})},Ue="http://13.201.22.86:3000/api/v1",za=async()=>{var t,a;try{return(await q.get(`${Ue}/payout/get-staff-payout`,{withCredentials:!0})).data}catch(s){throw((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch Payout Details"}},Wa=async(t,a)=>{var s,r;try{const{paymentMode:l,utr:d}=a;return(await q.post(`${Ue}/payout/staff-pay/${t}`,{paymentMode:l,utr:d},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Payment Failed"}},Va=async()=>{var t,a;try{return(await q.get(`${Ue}/payout/genrate-staff-payout`,{withCredentials:!0})).data}catch(s){throw((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed To Genrate Payout"}},Ga=async()=>{var t,a;try{return(await q.get(`${Ue}/payout/get-payout`,{withCredentials:!0})).data}catch(s){throw((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch Payout Details"}},Ka=async(t,a)=>{var s,r;try{const{paymentMode:l,utr:d}=a;return(await q.post(`${Ue}/payout/pay/${t}`,{paymentMode:l,utr:d},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Payment Failed"}},Qa=async()=>{var t,a;try{return(await q.get(`${Ue}/payout/genrate-payout`,{withCredentials:!0})).data}catch(s){throw((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed To Genrate Payout"}},Ya=()=>me({queryKey:["staffPayout"],queryFn:za,staleTime:5*60*1e3}),Ha=()=>{const t=Q();return H({mutationFn:({staffId:a,paymentData:s})=>Wa(a,s),onSuccess:()=>{t.invalidateQueries(["staffPayout"])}})},Xa=()=>me({queryKey:["associatePayout"],queryFn:Ga,staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),Ja=()=>{const t=Q();return H({mutationFn:({associateId:a,paymentData:s})=>Ka(a,s),onSuccess:()=>{t.invalidateQueries(["associatePayout"])}})},Za=()=>{var g;const[t,a]=n.useState(""),[s,r]=n.useState(null),[l,d]=n.useState(!1),[o,h]=n.useState({utr:"",paymentMode:""}),i=X(),{data:x}=Xa(),c=Ja(),m=(x==null?void 0:x.data.length)>0?(g=x==null?void 0:x.data)==null?void 0:g.filter(S=>S.name.toLowerCase().includes(t.toLowerCase())||S.mobile.includes(t)||S.email.toLowerCase().includes(t.toLowerCase())):[],j=S=>{const{name:f,value:A}=S.target;h(F=>({...F,[f]:A}))},u=S=>{r(S),d(!0)},b=()=>{d(!1),r(null),h({utr:"",paymentMode:""})},y=()=>{if(!s||!s._id){i(p({message:"Select Valid Associate",type:"error"}));return}if(!o.paymentMode||!o.utr){i(p({message:"Payment Mode and UTR Required",type:"error"}));return}c.mutate({associateId:s._id,paymentData:o},{onSuccess:()=>{d(!1),r(null),h({utr:"",paymentMode:""}),i(p({message:"Payment Successfully Done"}))},onError:S=>i(p({message:S,type:"error"}))})};return e.jsxs("div",{className:"Form mt-10 p-6 bg-white shadow-md rounded-lg",children:[e.jsx("h2",{className:"text-3xl text-center font-bold mb-4 text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Payout Management"}),e.jsx("input",{type:"text",placeholder:"Search User...",className:"w-full p-2 border-2 border-[#640D5F] rounded-md mb-4 focus:ring-2 focus:ring-[#640D5F]",value:t,onChange:S=>a(S.target.value)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300 shadow-md rounded-lg",children:[e.jsx("thead",{className:"bg-[#ce31c6] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border",children:"Name"}),e.jsx("th",{className:"p-3 border",children:"Mobile"}),e.jsx("th",{className:"p-3 border",children:"Email"}),e.jsx("th",{className:"p-3 border",children:"Incentive"}),e.jsx("th",{className:"p-3 border",children:"Action"})]})}),e.jsx("tbody",{children:m.length>0?m.map(S=>e.jsxs("tr",{className:"hover:bg-gray-100 text-center",children:[e.jsx("td",{className:"p-3 border",children:S.name}),e.jsx("td",{className:"p-3 border",children:S.mobile}),e.jsx("td",{className:"p-3 border",children:S.email}),e.jsx("td",{className:"p-3 border",children:S.amount}),e.jsx("td",{className:"p-3 border",children:e.jsx("button",{className:"px-4 py-2 bg-[#cc21c3] text-white rounded-md hover:bg-[#a1199a] transition-all",onClick:()=>u(S),children:"Pay Out"})})]},S._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-4 text-center text-gray-500",children:"No users found"})})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-opacity-50 backdrop-blur-sm",children:e.jsx("div",{className:"p-5 mt-10",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px] max-h-[80vh] flex flex-col",style:{fontSize:"16px",boxShadow:"rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset"},children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-[#640D5F]",children:"Payout Details"}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Associate Name:"})," ",s==null?void 0:s.name]}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Mobile No.:"})," ",s==null?void 0:s.mobile]}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Member Count:"})," ",s==null?void 0:s.refCount]}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Commission Rate:"})," ",s==null?void 0:s.commission]}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Total Commission:"})," ",s==null?void 0:s.amount]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("strong",{className:"block mt-2",children:"Payment Mode:"}),e.jsxs("select",{className:"w-full p-2 border",name:"paymentMode",value:o.paymentMode,onChange:j,children:[e.jsx("option",{value:"",children:"Select Payment Mode"}),e.jsx("option",{value:"Google Pay",children:"Google Pay"}),e.jsx("option",{value:"Phone Pay",children:"Phone Pay"})]})]}),e.jsxs("div",{className:"mb-4 mx-1",children:[e.jsx("label",{className:"block font-bold",children:"Payout Amount"}),e.jsx("input",{type:"number",placeholder:"Enter amount",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#640D5F]",value:s.amount,readOnly:!0})]}),e.jsxs("div",{className:"mb-4 mx-1",children:[e.jsx("strong",{className:"block font-bold",children:"UTR"}),e.jsx("input",{type:"text",placeholder:"Enter UTR",name:"utr",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#640D5F]",value:o.utr,onChange:j})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-end gap-2 mt-4",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-400 text-gray-100 rounded-md hover:bg-gray-400 transition-all",onClick:b,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-[#d01dc7] text-white rounded-md hover:bg-[#a917a2] transition-all",onClick:y,children:"Pay"})]})]})})})]})},er=()=>{const[t,a]=n.useState(""),[s,r]=n.useState(null),[l,d]=n.useState(""),[o,h]=n.useState(0),[i,x]=n.useState(!1),[c,m]=n.useState(""),[j,u]=n.useState(!1),[b,y]=n.useState([]),g=Q(),S=X(),{data:f,refetch:A}=Ie(),F=Qs();n.useEffect(()=>{(f==null?void 0:f.data.length)>0&&y(f.data)},[f]);const M=b.length>0?b==null?void 0:b.filter(D=>D.name.toLowerCase().includes(t.toLowerCase())):[],P=()=>{if(o===""||o===null||isNaN(Number(o))||o<0){S(p({message:"Enter Valid Commission",type:"error"}));return}F.mutate({commission:Number(o)},{onSuccess:()=>{x(!1),h(0),S(p({message:"All associates' commissions updated"}))},onError:D=>S(p({message:D,type:"error"}))})},R=()=>{if(!s){S(p({message:"Please select an associate",type:"warn"}));return}if(l===""||l===null||isNaN(Number(l))||l<0){S(p({message:"Enter Valid Commission",type:"error"}));return}F.mutate({associateId:s._id,commission:Number(l)},{onSuccess:()=>{d(0),r(null),S(p({message:"Associate commissions updated"}))},onError:D=>S(p({message:D,type:"error"}))})},E=()=>{a(""),r(null),d(""),h(""),x(!1),y(D=>D.map(T=>({...T})))},U=()=>{b.map(D=>{D.commission<=0&&(S(p({message:"All Asscoiate Commission Not Set You can update Commission",type:"warn"})),u(!0))}),u(!0)},L=async()=>{if(c.toLowerCase()!=="confirm"){alert("Please enter 'confirm' to delete the record.");return}try{const D=await Qa();D.statusCode===201?(u(!1),m(""),await A(),g.invalidateQueries({queryKey:["associatePayout"]}),S(p({message:"Payout Genrated Successfully"}))):D.statusCode===200&&(u(!1),m(""),await A(),S(p({message:"No Records For Payout",type:"warn"})))}catch(D){u(!1),m(""),S(p({message:D,type:"error"}))}};return e.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 shadow-lg rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-[#640D5F]",children:"Payout Settings"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{className:"p-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all cursor-pointer disabled:cursor-not-allowed disabled:opacity-40 ",onClick:()=>x(!i),disabled:b.length<=0,children:"Set Default Commission"}),e.jsx("button",{className:"p-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all",onClick:E,title:"Refresh Data",children:e.jsx(tt,{className:"text-xl"})})]})]}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("input",{type:"text",placeholder:"Search Associate...",className:"w-100 p-3 border border-gray-600 rounded-lg ",value:t,onChange:D=>a(D.target.value)})}),i&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm w-100 ",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Set Commission for All"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"number",placeholder:"Enter default commission",className:"w-100 p-2 border border-gray-300 rounded-lg",value:o,onChange:D=>h(D.target.value)}),e.jsx("button",{className:"px-4 py-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all",onClick:P,children:"Apply"})]})]})}),s&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm w-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#640D5F]",children:"Update Commission"}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Associate Name"}),e.jsx("input",{type:"text",value:s.name,className:"w-full p-2 border border-gray-300 rounded-lg",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Previous Commission"}),e.jsx("input",{type:"text",value:s.commission,className:"w-full p-2 border border-gray-300 rounded-lg",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Commission Rate"}),e.jsx("input",{type:"number",placeholder:"Enter commission rate",className:"w-full p-2 border border-gray-300 rounded-lg",value:l,onChange:D=>d(D.target.value)})]}),e.jsx("button",{className:"px-4 py-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all",onClick:R,children:"Update Commission"})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#640D5F]",children:"Associates"}),e.jsx("button",{className:"px-4 py-2 bg-[#e22c2c] text-white font-bold rounded-lg hover:bg-[#c40909] transition-all disabled:cursor-not-allowed disabled:opacity-40",onClick:U,disabled:b.length<=0,children:"Genrate Payout"})]}),e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("thead",{className:"bg-[#d64fcf] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center",children:"Name"}),e.jsx("th",{className:"p-3 text-center",children:"Mobile Number"}),e.jsx("th",{className:"p-3 text-center",children:"Commission"}),e.jsx("th",{className:"p-3 text-center",children:"Recent Referrals"}),e.jsx("th",{className:"p-3 text-center",children:"Total Referrals"}),e.jsx("th",{className:"p-3 text-center",children:"Update Commission"})]})}),e.jsx("tbody",{children:(M==null?void 0:M.length)>0?M.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.name}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.mobile}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.commission}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.referralCount}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.totalReferralCount}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:e.jsx("button",{className:"text-[#8A1C7C] mx-auto rounded-lg transition-all flex items-center",onClick:()=>r(D),children:e.jsx(gt,{className:"ms-10",size:22})})})]},D._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-4 text-center text-gray-500",children:"No associates found."})})})]})]}),j&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Confirm Payout Genration"}),e.jsx("p",{children:"Enter 'confirm' to Genrate Payout:"}),e.jsx("input",{type:"text",value:c,onChange:D=>m(D.target.value),className:"w-full p-2 border rounded-lg mb-4"}),e.jsxs("div",{className:"flex justify-center gap-5",children:[e.jsx("button",{onClick:L,className:"bg-green-600   text-white px-4 py-2 rounded-lg",children:"Genrate"}),e.jsx("button",{onClick:()=>u(!1),className:"bg-gray-300 text-black px-4 py-2 rounded-lg",children:"Cancel"})]})]})})]})},zt="http://13.201.22.86:3000/api/v1",tr=async t=>{var a,s;try{const r=new URLSearchParams;return t&&r.append("userType",t),(await q.get(`${zt}/history/get-history?${r}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Fetch History"}},sr=async t=>{var a,s;try{const r=new URLSearchParams;if(t){const d=(new Date(t).getMonth()+1).toString().padStart(2,"0"),o=new Date(t).getFullYear();r.append("month",d),r.append("year",o)}return(await q.get(`${zt}/planpurchase/get-monthly-report?${r}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Faild to Get Report"}},Wt=t=>me({queryKey:["history",t],queryFn:()=>tr(t),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),ar=()=>{const[t,a]=n.useState("all"),[s,r]=n.useState([]);X();const{data:l}=Wt("associate");n.useEffect(()=>{(l==null?void 0:l.data.length)>0&&r(l.data)},[l]);const d=s.length>0?s==null?void 0:s.filter(x=>{const c=new Date(x.createdAt),u=(new Date-c)/(1e3*3600*24);return t==="weekly"?u<=7:t==="monthly"?u<=30:!0}):[],o=x=>{alert(`Viewing details for: ${x.name}
Amount: $${x.amount}
Payment Via: ${x.paymentMode}
Message: ${x.message}`)},h=x=>{const c=new je;c.setFont("times","bold"),c.setFontSize(16),c.setTextColor(41,128,185);const m="Payout Details",j=c.internal.pageSize.width,u=(j-c.getTextWidth(m))/2;c.text(m,u,22),c.setDrawColor(0),c.setLineWidth(.5),c.rect(10,15,j-20,12),c.setFont("times","normal"),c.setFontSize(12),c.setTextColor(0,0,0);let b=40;const y=60;[["Date:",Fe(x.createdAt)],["Name:",`${x.name}`],["Mobile:",`${x.mobile}`],["Email:",`${x.email}`],["Referral Count:",x.refCount],["Commission:",`${x.commission}`],["Total Amount:",`${x.amount}`],["Payment Via:",x.paymentMode]].forEach(([S,f])=>{c.setFont("times","bold"),c.text(S,20,b),c.setFont("times","normal"),c.text(f.toString(),y,b),b+=10}),c.save(`payout_${x.name.replace(/\s+/g,"_")}.pdf`)},i=()=>{const x=new je,c=x.internal.pageSize.width,m="Associate Payouts",j=(c-x.getTextWidth(m))/2;x.setFont("helvetica","bold"),x.setFontSize(16),x.text(m,j,10);const u=["#","Name","Mobile","Email","Payment Date","Payment Via","Amount"],b=d.map((y,g)=>[g+1,y.name,y.mobile,y.email,Fe(y.createdAt),y.paymentMode,y.amount]);Pe(x,{head:[u],body:b,startY:20,styles:{fontSize:10},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:10}}),x.save("all_associate_payouts.pdf")};return e.jsxs("div",{className:"Form payment_history p-6 bg-gradient-to-r from-purple-50 to-pink-50 shadow-lg rounded-lg mt-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Associate Payment History"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-gray-700 font-medium",children:"Filter by:"}),e.jsxs("select",{value:t,onChange:x=>a(x.target.value),className:"p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#640D5F] bg-white",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]}),e.jsxs("button",{onClick:i,className:"flex items-center px-2 py-2 bg-[#640D5F] text-white rounded-md hover:bg-[#8A1C7C] transition-colors duration-200 disabled:cursor-not-allowed disabled:opacity-40 disabled:hover:bg-[#e22c2c]",disabled:(s==null?void 0:s.length)<=0,children:[e.jsx(pe,{className:"mr-2"}),"Download All"]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-sm",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#640D5F] to-[#8A1C7C]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Name"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Mobile"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Payment Date"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Payment Via"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Amount"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:d.length>0?d.map((x,c)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"p-4 border-b border-gray-200",children:x.name}),e.jsx("td",{className:"p-4 border-b border-gray-200",children:x.mobile}),e.jsx("td",{className:"p-4 border-b border-gray-200",children:Fe(x.createdAt)}),e.jsx("td",{className:"p-4 border-b border-gray-200",children:x.paymentMode}),e.jsxs("td",{className:"p-4 border-b border-gray-200 font-medium text-[#640D5F]",children:["$",x.amount]}),e.jsx("td",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{className:"text-[#640D5F] hover:text-[#8A1C7C] transition-colors duration-200",onClick:()=>o(x),children:e.jsx(ft,{})}),e.jsx("button",{className:"text-[#640D5F] hover:text-[#8A1C7C] transition-colors duration-200",onClick:()=>h(x),children:e.jsx(pe,{})})]})})]},c)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-6 text-center text-gray-500",children:"No payout history found"})})})]})})]})},rr=()=>{var S;const[t,a]=n.useState(""),[s,r]=n.useState(null),[l,d]=n.useState(!1),[o,h]=n.useState({utr:"",paymentMode:""}),i=X(),{data:x,refetch:c}=Ya(),m=Ha(),j=(x==null?void 0:x.data.length)>0?(S=x==null?void 0:x.data)==null?void 0:S.filter(f=>f.name.toLowerCase().includes(t.toLowerCase())||f.email.toLowerCase().includes(t.toLowerCase())):[],u=f=>{const{name:A,value:F}=f.target;h(M=>({...M,[A]:F}))},b=()=>{d(!1),r(null),h({utr:"",paymentMode:""})},y=f=>{r(f),d(!0)},g=()=>{if(!s||!s._id){i(p({message:"Select Valid Staff",type:"error"}));return}if(!o.paymentMode||!o.utr){i(p({message:"Payment Mode and UTR Required",type:"error"}));return}m.mutate({staffId:s._id,paymentData:o},{onSuccess:()=>{c(),d(!1),r(null),h({utr:"",paymentMode:""}),i(p({message:"Payment Successfully Done"}))},onError:f=>i(p({message:f,type:"error"}))})};return e.jsxs("div",{className:"Form mt-10 p-6 bg-white shadow-md rounded-lg",children:[e.jsx("h2",{className:"text-3xl text-center font-bold mb-4 text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Payout Management"}),e.jsx("input",{type:"text",placeholder:"Search User...",className:"w-full p-2 border-2 border-[#640D5F] rounded-md mb-4 focus:ring-2 focus:ring-[#640D5F]",value:t,onChange:f=>a(f.target.value)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300 shadow-md rounded-lg",children:[e.jsx("thead",{className:"bg-[#ce31c6] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border",children:"Name"}),e.jsx("th",{className:"p-3 border",children:"Email"}),e.jsx("th",{className:"p-3 border",children:"Incentive"}),e.jsx("th",{className:"p-3 border",children:"Action"})]})}),e.jsx("tbody",{children:j.length>0?j.map(f=>e.jsxs("tr",{className:"hover:bg-gray-100 text-center",children:[e.jsx("td",{className:"p-3 border",children:f.name}),e.jsx("td",{className:"p-3 border",children:f.email}),e.jsx("td",{className:"p-3 border",children:f.amount}),e.jsx("td",{className:"p-3 border",children:e.jsx("button",{className:"px-4 py-2 bg-[#cc21c3] text-white rounded-md hover:bg-[#a1199a] transition-all",onClick:()=>y(f),children:"Pay Out"})})]},f._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"p-4 text-center text-gray-500",children:"No users found"})})})]})}),l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-opacity-50 backdrop-blur-sm",children:e.jsx("div",{className:"p-5 mt-10",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px] max-h-[80vh] flex flex-col",style:{fontSize:"16px",boxShadow:"rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset"},children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-[#640D5F]",children:"Payout Details"}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Staff Name:"})," ",s==null?void 0:s.name]}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Member Count:"})," ",s==null?void 0:s.refCount]}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Incentive Rate:"})," ",s==null?void 0:s.incentive]}),e.jsxs("p",{className:"mb-2 flex justify-between mx-1",children:[e.jsx("strong",{children:"Total Incentive:"})," ",s==null?void 0:s.amount]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("strong",{className:"block mt-2",children:"Payment Mode:"}),e.jsxs("select",{className:"w-full p-2 border",name:"paymentMode",value:o.paymentMode,onChange:u,children:[e.jsx("option",{value:"",children:"Select Payment Mode"}),e.jsx("option",{value:"Google Pay",children:"Google Pay"}),e.jsx("option",{value:"Phone Pay",children:"Phone Pay"})]})]}),e.jsxs("div",{className:"mb-4 mx-1",children:[e.jsx("label",{className:"block font-bold",children:"Payout Amount"}),e.jsx("input",{type:"number",placeholder:"Enter amount",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#640D5F] ",value:s.amount,readOnly:!0})]}),e.jsxs("div",{className:"mb-4 mx-1",children:[e.jsx("strong",{className:"block font-bold",children:"UTR"}),e.jsx("input",{type:"text",placeholder:"Enter UTR",name:"utr",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#640D5F]",value:o.utr,onChange:u})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-end gap-2 mt-4",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-400 text-gray-100 rounded-md hover:bg-gray-400 transition-all",onClick:b,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-[#d01dc7] text-white rounded-md hover:bg-[#a917a2] transition-all",onClick:g,children:"Pay"})]})]})})})]})},lr=()=>{const[t,a]=n.useState(""),[s,r]=n.useState(null),[l,d]=n.useState(""),[o,h]=n.useState(""),[i,x]=n.useState(!1),[c,m]=n.useState(""),[j,u]=n.useState(!1),[b,y]=n.useState([]),g=Q(),S=X(),{data:f,refetch:A}=Rt(),F=Da();n.useEffect(()=>{(f==null?void 0:f.data.length)>0&&y(f.data)},[f]);const M=b.length>0?b.filter(D=>D.name.toLowerCase().includes(t.toLowerCase())):[],P=()=>{if(o===""||o===null||isNaN(Number(o))||o<0){S(p({message:"Enter Valid Incentive",type:"error"}));return}F.mutate({incentive:Number(o)},{onSuccess:()=>{x(!1),h(0),S(p({message:"All staff' incentive updated"}))},onError:D=>S(p({message:D,type:"error"}))})},R=()=>{if(!s){S(p({message:"Please select an Staff",type:"warn"}));return}if(l===""||l===null||isNaN(Number(l))||l<0){S(p({message:"Enter Valid Incentive",type:"error"}));return}F.mutate({staffId:s._id,incentive:Number(l)},{onSuccess:()=>{d(0),r(null),S(p({message:"Staff Incetive updated"}))},onError:D=>S(p({message:D,type:"error"}))})},E=()=>{a(""),r(null),d(""),h(""),x(!1),y(D=>D.map(T=>({...T})))},U=()=>{b.map(D=>{D.incentive<=0&&(S(p({message:"All Staff Incentive Not Set You can update Incentive",type:"warn"})),u(!0))}),u(!0)},L=async()=>{if(c.toLowerCase()!=="confirm"){alert("Please enter 'confirm' to delete the record.");return}try{const D=await Va();D.statusCode===201?(u(!1),m(""),await A(),g.invalidateQueries({queryKey:["staffPayout"]}),S(p({message:"Payout Genrated Successfully"}))):D.statusCode===200&&(u(!1),m(""),await A(),S(p({message:"No Records For Payout",type:"warn"})))}catch(D){u(!1),m(""),S(p({message:D,type:"error"}))}};return e.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 shadow-lg rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-[#640D5F]",children:"Payout Settings"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{className:`p-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all disabled:${b.length<=0?"cursor-not-allowed opacity-40":"cursor-pointer"}`,onClick:()=>x(!i),disabled:b.length<=0,children:"Set Default Incentive"}),e.jsx("button",{className:"p-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all",onClick:E,title:"Refresh Data",children:e.jsx(tt,{className:"text-xl"})})]})]}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("input",{type:"text",placeholder:"Search Staff...",className:"w-100 p-3 border border-gray-600 rounded-lg ",value:t,onChange:D=>a(D.target.value)})}),i&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm w-100 ",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Set Incentive for All"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"number",placeholder:"Enter default incentive",className:"w-100 p-2 border border-gray-300 rounded-lg",value:o,onChange:D=>h(D.target.value)}),e.jsx("button",{className:"px-4 py-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all",onClick:P,children:"Apply"})]})]})}),s&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm w-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#640D5F]",children:"Update Incentive"}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Staff Name"}),e.jsx("input",{type:"text",value:s.name,className:"w-full p-2 border border-gray-300 rounded-lg",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Previous Incentive"}),e.jsx("input",{type:"text",value:s.incentive,className:"w-full p-2 border border-gray-300 rounded-lg",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Incentive Rate"}),e.jsx("input",{type:"number",placeholder:"Enter incentive rate",className:"w-full p-2 border border-gray-300 rounded-lg",value:l,onChange:D=>d(D.target.value)})]}),e.jsx("button",{className:"px-4 py-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all",onClick:R,children:"Update Incentive"})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#640D5F]",children:"Staffs"}),e.jsx("button",{className:"px-4 py-2 bg-[#e22c2c] text-white font-bold rounded-lg transition-all hover:bg-[#c40909] disabled:cursor-not-allowed disabled:opacity-40 disabled:hover:bg-[#e22c2c]",onClick:U,disabled:b.length<=0,children:"Genrate Payout"})]}),e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 shadow-sm",children:[e.jsx("thead",{className:"bg-[#d64fcf] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center",children:"Name"}),e.jsx("th",{className:"p-3 text-center",children:"Incentive"}),e.jsx("th",{className:"p-3 text-center",children:"Recent Referrals"}),e.jsx("th",{className:"p-3 text-center",children:"Total Referrals"}),e.jsx("th",{className:"p-3 text-center",children:"Update Incentive"})]})}),e.jsx("tbody",{children:(M==null?void 0:M.length)>0?M==null?void 0:M.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.name}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.incentive}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.referralCount}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:D.totalReferralCount}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:e.jsx("button",{className:"text-[#8A1C7C] mx-auto rounded-lg transition-all flex items-center",onClick:()=>r(D),children:e.jsx(gt,{className:"ms-10",size:22})})})]},D._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-4 text-center text-gray-500",children:"No staffs found."})})})]})]}),j&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Confirm Payout Genration"}),e.jsx("p",{children:"Enter 'confirm' to Genrate Payout:"}),e.jsx("input",{type:"text",value:c,onChange:D=>m(D.target.value),className:"w-full p-2 border rounded-lg mb-4"}),e.jsxs("div",{className:"flex justify-center gap-5",children:[e.jsx("button",{onClick:L,className:"bg-green-600   text-white px-4 py-2 rounded-lg",children:"Genrate"}),e.jsx("button",{onClick:()=>u(!1),className:"bg-gray-300 text-black px-4 py-2 rounded-lg",children:"Cancel"})]})]})})]})},nr=()=>{const[t,a]=n.useState("all"),[s,r]=n.useState([]);X();const{data:l}=Wt("staff");n.useEffect(()=>{(l==null?void 0:l.data.length)>0&&r(l.data)},[l]);const d=s.length>0?s.filter(x=>{const c=new Date(x.createdAt),u=(new Date-c)/(1e3*3600*24);return t==="weekly"?u<=7:t==="monthly"?u<=30:!0}):[],o=x=>{alert(`Viewing details for: ${x.name}
Amount: $${x.amount}
Payment Via: ${x.paymentMode}
Message: ${x.message}`)},h=x=>{const c=new je;c.setFont("times","bold"),c.setFontSize(16),c.setTextColor(41,128,185);const m="Payout Details",j=c.internal.pageSize.width,u=(j-c.getTextWidth(m))/2;c.text(m,u,22),c.setDrawColor(0),c.setLineWidth(.5),c.rect(10,15,j-20,12),c.setFont("times","normal"),c.setFontSize(12),c.setTextColor(0,0,0);let b=40;const y=60;[["Date:",Fe(x.createdAt)],["Name:",`${x.name}`],["Referral Count:",x.refCount],["Commission:",`${x.commission}`],["Amount:",`${x.amount}`],["Payment Via:",x.paymentMode]].forEach(([S,f])=>{c.setFont("times","bold"),c.text(S,20,b),c.setFont("times","normal"),c.text(f.toString(),y,b),b+=10}),c.save(`payout_${x.name.replace(/\s+/g,"_")}.pdf`)},i=()=>{const x=new je,c=x.internal.pageSize.width,m="Staff Payouts",j=(c-x.getTextWidth(m))/2;x.setFont("helvetica","bold"),x.setFontSize(16),x.text(m,j,10);const u=["#","Name","Email","Payment Date","Payment Via","Amount"],b=d.map((y,g)=>[g+1,y.name,y.email,Fe(y.createdAt),y.paymentMode,y.amount]);Pe(x,{head:[u],body:b,startY:20,styles:{fontSize:10},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:10}}),x.save("all_staff_payouts.pdf")};return e.jsxs("div",{className:"Form payment_history p-6 bg-gradient-to-r from-purple-50 to-pink-50 shadow-lg rounded-lg mt-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Staff Payment History"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-gray-700 font-medium",children:"Filter by:"}),e.jsxs("select",{value:t,onChange:x=>a(x.target.value),className:"p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#640D5F] bg-white",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]}),e.jsxs("button",{onClick:i,className:"flex items-center px-2 py-2 bg-[#640D5F] text-white rounded-md hover:bg-[#8A1C7C] transition-colors duration-200 disabled:cursor-not-allowed disabled:opacity-40 disabled:hover:bg-[#e22c2c]",disabled:(s==null?void 0:s.length)<=0,children:[e.jsx(pe,{className:"mr-2"}),"Download All"]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-sm",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#640D5F] to-[#8A1C7C]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Name"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Email"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Payment Date"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Payment Via"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Amount"}),e.jsx("th",{className:"p-4 text-left text-white font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:d.length>0?d.map((x,c)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"p-4 border-b border-gray-200",children:x.name}),e.jsx("td",{className:"p-4 border-b border-gray-200",children:x.email}),e.jsx("td",{className:"p-4 border-b border-gray-200",children:Fe(x.createdAt)}),e.jsx("td",{className:"p-4 border-b border-gray-200",children:x.paymentMode}),e.jsxs("td",{className:"p-4 border-b border-gray-200 font-medium text-[#640D5F]",children:["$",x.amount]}),e.jsx("td",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{className:"text-[#640D5F] hover:text-[#8A1C7C] transition-colors duration-200",onClick:()=>o(x),children:e.jsx(ft,{})}),e.jsx("button",{className:"text-[#640D5F] hover:text-[#8A1C7C] transition-colors duration-200",onClick:()=>h(x),children:e.jsx(pe,{})})]})})]},c)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-6 text-center text-gray-500",children:"No payout history found"})})})]})})]})},or=()=>{const[t,a]=n.useState(""),[s,r]=n.useState("business"),[l,d]=n.useState("all"),[o,h]=n.useState([]),{data:i}=Ut(s);n.useEffect(()=>{i!=null&&i.data&&h(i.data)},[i]);const x=l==="all"?o:o.map(c=>({...c,referredUsers:c.referredUsers.filter(m=>{var j;return((j=m.plan)==null?void 0:j.type)&&m.plan.type.toLowerCase()===l.toLowerCase()})})).filter(c=>c.referredUsers.length>0);return e.jsxs("div",{className:"Form p-6 mt-10 rounded-lg",children:[e.jsx("h2",{className:"text-3xl text-center font-bold mb-8 text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"User Details"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("select",{"aria-label":"Select user category",className:"w-48 p-2 border-2 border-[#640D5F] rounded-md focus:ring-2 focus:ring-[#640D5F] text-sm text-center",value:s,onChange:c=>r(c.target.value),children:[e.jsx("option",{value:"business",children:"Business User"}),e.jsx("option",{value:"political",children:"Political User"})]})}),e.jsx("div",{className:"flex justify-center gap-2 mb-8 mt-10",children:["all","basic","advance"].map(c=>e.jsx("button",{"aria-label":`Filter by ${c}`,className:`w-24 h-10 flex items-center justify-center text-sm font-semibold uppercase transition-all duration-300 rounded-md
              ${l===c?"text-white bg-[#b91bb1] hover:bg-[#fa88f4]":"text-[#42093f] bg-[#fddffb] hover:bg-pink-300"}`,onClick:()=>d(c),children:c==="all"?"All":c.charAt(0).toUpperCase()+c.slice(1)},c))}),e.jsx("input",{type:"search",placeholder:"Search User...",className:"flex justify-center w-50 p-2 border-2 border-[#640D5F] rounded-md mt-11 mb-4 focus:ring-2 focus:ring-[#640D5F] text-sm",value:t,onChange:c=>a(c.target.value)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300 shadow-sm rounded-lg text-sm",children:[e.jsx("thead",{className:"bg-[#c22aba] text-md text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"Name"}),e.jsx("th",{className:"p-2 border",children:"Mobile"}),e.jsx("th",{className:"p-2 border",children:"Email"}),e.jsx("th",{className:"p-2 border",children:"Referred By"}),e.jsx("th",{className:"p-2 border",children:"Plan"})]})}),e.jsx("tbody",{children:x.length>0?x.flatMap(c=>c.referredUsers.filter(m=>m.name.toLowerCase().includes(t.toLowerCase())).map(m=>{var j;return e.jsxs("tr",{className:"hover:bg-gray-100 text-center",children:[e.jsx("td",{className:"p-2 border",children:m.name}),e.jsx("td",{className:"p-2 border",children:m.mobile}),e.jsx("td",{className:"p-2 border",children:m.email}),e.jsx("td",{className:"p-2 border",children:c.rname||"N/A"}),e.jsx("td",{className:"p-2 border capitalize",children:((j=m.plan)==null?void 0:j.type)||"N/A"})]},m._id)})):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-2 text-center text-gray-500",children:"No users found"})})})]})})]})},it="http://13.201.22.86:3000/api/v1",ir=async()=>{var t,a;try{return(await q.get(`${it}/enquiry/get`,{withCredentials:!0})).data}catch(s){throw((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed To Fetch Enquiries"}},dr=async(t,a)=>{var s,r;try{return(await q.patch(`${it}/enquiry/update/${t}`,{status:a},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed To Update Status"}},cr=async t=>{var a,s;try{return(await q.delete(`${it}/enquiry/delete/${t}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed To Delete Enquiry"}},mr=()=>me({queryKey:["enquiry"],queryFn:ir,staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),ur=()=>{const t=Q();return H({mutationFn:({enquiryId:a,status:s})=>dr(a,s),onSuccess:()=>{t.invalidateQueries(["enquiry"])}})},xr=()=>{const t=Q();return H({mutationFn:a=>cr(a),onSuccess:()=>{t.invalidateQueries(["enquiry"])}})},hr=()=>{const[t,a]=n.useState([]),s=ur(),r=xr(),[l,d]=n.useState(null),o=X(),{data:h}=mr();n.useEffect(()=>{(h==null?void 0:h.data.length)>0&&a(h.data)},[h]);const i=c=>{d(c),s.mutate({enquiryId:c,status:"approved"},{onSuccess:()=>{o(p({message:"Status Updated"}))},onError:m=>o(p({message:m,type:"error"}))}),d(null)},x=c=>{d(c),r.mutate(c,{onSuccess:()=>{o(p({message:"Enquiry Deleted Successfully"}))},onError:m=>o(p({message:m,type:"error"}))}),d(null)};return e.jsxs("div",{className:"mt-10",style:{padding:"20px",fontFamily:"Poppins, sans-serif",minHeight:"100vh"},children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-[#640D5F] mb-6",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Registered Enquiriesd"}),e.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",background:"#fff",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ab19a3] text-white",children:[e.jsx("th",{style:{padding:"16px",textAlign:"center"},children:"Name"}),e.jsx("th",{style:{padding:"16px",textAlign:"center"},children:"Mobile Number"}),e.jsx("th",{style:{padding:"16px",textAlign:"center"},children:"Address"}),e.jsx("th",{style:{padding:"16px",textAlign:"center"},children:"Status"}),e.jsx("th",{style:{padding:"16px",textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-4 text-center text-gray-500",children:"No enquiry available"})}):t==null?void 0:t.map(c=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.3s ease",":hover":{backgroundColor:"#f9f9f9"}},children:[e.jsx("td",{style:{padding:"16px",color:"#333",textAlign:"center"},children:c.name}),e.jsx("td",{style:{padding:"16px",color:"#555",textAlign:"center"},children:c.mobile}),e.jsx("td",{style:{padding:"16px",color:"#555",textAlign:"center"},children:c.taluka}),e.jsx("td",{style:{padding:"16px",color:"#555",textAlign:"center"},children:c.status}),e.jsxs("td",{style:{padding:"16px"},className:"flex items-center justify-center",children:[c.status!=="approved"&&e.jsx("button",{onClick:()=>i(c._id),className:"ml-8 disabled:opacity-50 disabled:cursor-not-allowed",style:{padding:"8px 16px",backgroundColor:"#6c5ce7",color:"#fff",textAlign:"center",border:"none",borderRadius:"6px",cursor:"pointer",transition:"background 0.3s ease",":hover":{backgroundColor:"#5a4dbf"}},disabled:l===c._id,children:l===c._id?"Updating...":"Done"}),c.status==="approved"&&e.jsx("button",{onClick:()=>x(c._id),className:"ml-8 disabled:opacity-50 disabled:cursor-not-allowed",style:{padding:"8px 16px",backgroundColor:"#f0566f",color:"#fff",textAlign:"center",border:"none",borderRadius:"6px",cursor:"pointer",transition:"background 0.3s ease",":hover":{backgroundColor:"#5a4dbf"}},disabled:l===c._id,children:l===c._id?"Deleting":"Delete"})]})]},c._id))})]})})]})},pr=()=>{const t=X(),[a,s]=n.useState(!1),[r,l]=n.useState({email:"",password:""}),[d,o]=n.useState({}),h=async()=>{try{const m=await ks(r.email,r.password);m!=null&&m.data&&(t(Bt(m.data.user)),s(!1))}catch(m){t(p({message:m.message,type:"error"})),s(!1)}},i=()=>{const m={};return r.email.trim()?/\S+@\S+\.\S+/.test(r.email)||(m.email="Please enter a valid email address."):m.email="Email is required.",r.password.trim()?r.password.length<6&&(m.password="Password must be at least 6 characters long."):m.password="Password is required.",o(m),Object.keys(m).length===0},x=m=>{const{name:j,value:u}=m.target;l({...r,[j]:u}),o({...d,[j]:""})},c=m=>{s(!0),m.preventDefault(),i()?h():s(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6 text-center text-[#640D5F]",children:"LOGIN"}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsxs("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:[e.jsx(jt,{className:"h-5 w-5 text-gray-400"})," "]}),e.jsx("input",{type:"email",name:"email",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:r.email,onChange:x,required:!0}),d.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.email})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsxs("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:[e.jsx(Zt,{className:"h-5 w-5 text-gray-400"})," "]}),e.jsx("input",{type:"password",name:"password",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:r.password,onChange:x,required:!0}),d.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.password})]})]}),e.jsx("button",{type:"submit",className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#aa1ba3] hover:bg-[#640D5F] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${a?"cursor-not-allowed disabled:bg-[#dc77d7]":"cursor-pointer"}`,children:a?"Logging in...":"LOGIN"})]})]})})},br=({onMenuClick:t})=>{const[a,s]=n.useState(!1),[r,l]=n.useState(!1),[d,o]=n.useState(!1),[h,i]=n.useState(!1),[x,c]=n.useState(!1),[m,j]=n.useState(!1),[u,b]=n.useState(!1),[y,g]=n.useState(!1),[S,f]=n.useState(!1),A={hidden:{opacity:0,height:0,overflow:"hidden"},visible:{opacity:1,height:"auto",transition:{duration:.3}}},F=Le(Oe),[M,P]=n.useState(!1),R=E=>{var U;return F.role==="superadmin"?!0:(U=F==null?void 0:F.permissions)==null?void 0:U.includes(E)};return n.useEffect(()=>{F&&F.role==="superadmin"?P(!0):P(!1)},[F]),e.jsxs("div",{className:"w-[21vw] sidebar-container min-h-screen bg-gray-100 p-4 shadow-lg fixed top-0 left-0 z-[999]  h-full overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl sidebar_title font-bold mb-6 text-[#640D5F] text-center",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"ADMIN PANEL"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx(te,{to:"/",children:e.jsxs("li",{className:"flex items-center py-2 px-3 text-lg font-semibold cursor-pointer hover:bg-[#ebace8] rounded-md",children:[e.jsx(es,{className:"w-5 h-5 mr-2 text-blue-600"}),"Home"]})}),R("business")&&e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>l(!r),children:[e.jsxs("span",{className:"flex py-2 text-lg font-semibold items-center",children:[e.jsx(yt,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Business"]}),r?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:r?"visible":"hidden",variants:A,children:[e.jsx(te,{to:"/business/add",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Add Customer"})}),e.jsx(te,{to:"/business/plan",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Select Plan"})}),e.jsx(te,{to:"/business/member",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Employee Management"})}),e.jsx(te,{to:"/business/updation",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Customer Updation"})}),e.jsx(te,{to:"/business/message",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Create Message"})})]})]}),R("politician")&&e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>s(!a),children:[e.jsxs("span",{className:"flex text-lg font-semibold py-2 items-center",children:[e.jsx(Nt,{className:"w-5 h-5 mr-2 text-green-600"}),"Politician"]}),a?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:a?"visible":"hidden",variants:A,children:[e.jsx(te,{to:"/politician/add",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:" Add Politician"})}),e.jsxs(te,{to:"/politician/plan",children:[" ",e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:" Select Plan"})]}),e.jsxs(te,{to:"/politician/member",children:["  ",e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:" Member Management"})]}),e.jsx(te,{to:"/politician/updation",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:" Politician Updation"})}),e.jsx(te,{to:"/politician/message",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:" Create Message"})})]})]}),R("portfolio")&&e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>o(!d),children:[e.jsxs("span",{className:"flex text-lg font-semibold py-2 items-center",children:[e.jsx(ts,{className:"w-5 h-5 mr-2 text-orange-600"}),"Customer Portfolio"]}),d?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:d?"visible":"hidden",variants:A,children:[e.jsx(te,{to:"/portfolio/add",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:" New Portfolio"})}),e.jsxs(te,{to:"/portfolio/manage",children:[" ",e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:" Manage Portfolios"})]})]})]}),R("staff")&&e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>i(!h),children:[e.jsxs("span",{className:"flex text-lg font-semibold py-2 items-center",children:[e.jsx(Be,{className:"w-5 h-5 mr-2 text-pink-600"}),M?"Employee Management":"Staff Management"]}),h?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:h?"visible":"hidden",variants:A,children:[e.jsx(te,{to:"/staff/add",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:M?"Add Employee":"Add Staff"})}),e.jsx(te,{to:"/staff/updation",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:M?"Employee Updation":"Staff Updation"})})]})]}),R("associate")&&e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>c(!x),children:[e.jsxs("span",{className:"flex text-lg font-semibold py-2 items-center",children:[e.jsx(mt,{className:"w-5 h-5 mr-2 text-purple-600"}),"Associate Management"]}),x?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:x?"visible":"hidden",variants:A,children:[e.jsx(te,{to:"/associate/add",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Add Associate"})}),e.jsx(te,{to:"/associate/updation",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Associate Updation"})})]})]}),R("account")&&e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>j(!m),children:[e.jsxs("span",{className:"flex text-lg font-semibold py-2 items-center",children:[e.jsx(Be,{className:"w-5 h-5 mr-2 text-[#640D5F]"}),"Account"]}),m?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:m?"visible":"hidden",variants:A,children:[e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>g(!y),children:[e.jsxs("span",{className:"flex text-md font-semibold py-2 items-center",children:[e.jsx(Be,{className:"w-4 h-4 mr-2 text-[#640D5F]"}),"Staff"]}),y?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:y?"visible":"hidden",variants:A,children:[e.jsx(te,{to:"/account/staff-user-details",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"User  Details"})}),e.jsx(te,{to:"/account/staff-payout",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Payout"})}),e.jsx(te,{to:"/account/staff-payout-setting",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Payout Setting"})}),e.jsx(te,{to:"/account/staff-history",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"History"})})]})]}),e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>b(!u),children:[e.jsxs("span",{className:"flex text-md font-semibold py-2 items-center",children:[e.jsx(Be,{className:"w-4 h-4 mr-2 text-[#640D5F]"}),"Associate"]}),u?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:u?"visible":"hidden",variants:A,children:[e.jsx(te,{to:"/account/associate-user-details",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"User  Details"})}),e.jsx(te,{to:"/account/associate-payout",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Payout"})}),e.jsx(te,{to:"/account/associate-payout-setting",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Payout Setting"})}),e.jsx(te,{to:"/account/associate-history",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"History"})})]})]}),e.jsx(te,{to:"/account/reports",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"Reports"})})]})]}),R("configuration")&&e.jsxs("li",{children:[e.jsxs("button",{className:"flex items-center justify-between w-full px-3 hover:bg-[#ebace8] rounded-md transition-all",onClick:()=>f(!S),children:[e.jsxs("span",{className:"flex text-lg font-semibold py-2 items-center",children:[e.jsx(mt,{className:"w-5 h-5 mr-2 text-purple-600"}),"SMS Configurtaion"]}),x?e.jsx(ye,{}):e.jsx(Ne,{})]}),e.jsxs(we.ul,{className:"ml-4 mt-1 bg-[#fdfcfd] shadow-md rounded-lg",initial:"hidden",animate:S?"visible":"hidden",variants:A,children:[e.jsx(te,{to:"/configuration/sms-configuration",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"SMS API Configuration"})}),e.jsx(te,{to:"/configuration/sms-templete",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"SMS Templete"})}),e.jsx(te,{to:"/configuration/otp",children:e.jsx("li",{className:"p-2 cursor-pointer hover:bg-[#ebace8] rounded-md",children:"OTP"})})]})]}),R("notification")&&e.jsx(te,{to:"/notification",children:e.jsxs("li",{className:"py-2 flex items-center mt-0 px-3 text-lg font-semibold cursor-pointer hover:bg-[#ebace8] rounded-md",children:[e.jsx(ss,{className:"w-5 h-5 mr-2 text-red-600"}),"Notifications"]})}),R("plan")&&e.jsx(te,{to:"/create-plan",children:e.jsxs("li",{className:"py-2 flex items-center px-3 text-lg font-semibold cursor-pointer hover:bg-[#ebace8] rounded-md",children:[e.jsx(as,{className:"w-5 h-5 mr-2 text-[#640D5F]"}),"Create Plan"]})}),R("enquiry")&&e.jsx(te,{to:"/enquiry",children:e.jsxs("li",{className:"py-2 flex items-center px-3 text-lg font-semibold cursor-pointer hover:bg-[#ebace8] rounded-md",children:[e.jsx(rs,{className:"w-5 h-5 mr-2 text-orange-500"}),"Enquiry"]})})]})]})};function gr(){const t=X(),a=ls(),s=async()=>{try{(await Is()).statusCode==200?(t(p({message:"Logged Out Successfully"})),t(Ia()),a("/login")):t(p({message:"Something went Wrong",type:"warn"}))}catch(r){t(p("Logout Failed")),console.error("Logout error:",r)}};return e.jsx("nav",{className:"bg-[#640D5F] navbar text-white p-4 py-3 flex items-center justify-between fixed top-0 right-0 z-50 w-full",children:e.jsx("div",{className:"ml-auto",children:e.jsx("button",{className:"bg-red-500 px-4 py-2 rounded hover:bg-red-700 transition",onClick:s,children:"Logout"})})})}function fr(){return e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-[21vw]",children:e.jsx(br,{})}),e.jsxs("div",{className:"w-[79vw]",children:[e.jsx(gr,{}),e.jsx("div",{className:"relative top-[15vh] ml-3",children:e.jsx(st,{})})]})]})}function jr(){return Le(Oe)?e.jsx(at,{to:"/",replace:!0}):e.jsx(st,{})}function ge({allowedPermission:t}){const a=Le(Oe),s=X(),[r,l]=n.useState(null);return n.useEffect(()=>{a||l("/login");const d=a==null?void 0:a.role,o=a==null?void 0:a.permissions;if(!(d==="admin"||d==="superadmin")&&d==="user"&&t){o!=null&&o.includes(t)||(l("/"),s(p({message:"Unauthorized Access",type:"warn"})));return}},[a,t,s]),r?e.jsx(at,{to:r,replace:!0}):a?e.jsx(st,{}):null}ge.propTypes={allowedRoles:ns.array};const yr=()=>{const[t,a]=n.useState(""),[s,r]=n.useState(""),[l,d]=n.useState("with"),[o,h]=n.useState("all"),[i,x]=n.useState(""),[c,m]=n.useState(null),[j,u]=n.useState(!1),[b,y]=n.useState([]),[g,S]=n.useState([]),[f,A]=n.useState([]),F=X(),{data:M}=Ft(),{data:P}=Ut(),{data:R}=ve(null,"user",null),[E,U]=n.useState([]),{data:L,isLoading:D,error:T}=me({queryKey:["monthlyReport",s],queryFn:()=>sr(s),enabled:!!s});n.useEffect(()=>{(M==null?void 0:M.data.length)>0&&S(M.data)},[M]),n.useEffect(()=>{(P==null?void 0:P.data.length)>0&&A(P.data)},[P]),n.useEffect(()=>{(R==null?void 0:R.data.length)>0&&U(R.data)},[R]);const $=g.length>0?g==null?void 0:g.filter(C=>{var v;return(v=C==null?void 0:C.rname)==null?void 0:v.toLowerCase().includes(i.toLowerCase())}):[],k=f.length>0?f==null?void 0:f.filter(C=>{var v;return(v=C==null?void 0:C.rname)==null?void 0:v.toLowerCase().includes(i.toLowerCase())}):[];n.useEffect(()=>{t==="Customer/Politician Report"&&y(E)},[t]);const V=C=>{if(x(C),C==="")y(E);else{const v=E.filter(ae=>ae.name.toLowerCase().includes(C.toLowerCase()));y(v)}},G=()=>{u(!0),y(E)},ie=()=>{setTimeout(()=>u(!1),200)},J=C=>{m(C),x(C.name),u(!1)},O=C=>{a(C),r(""),x(""),m("")},se=()=>{a(""),r(""),x(""),m("")},w=()=>{const C=t==="Associate Report"?g:f;if(C.length<=0){F(p({message:"No Record Available",type:"warn"}));return}const v=new je,ae=v.internal.pageSize.width,oe=t==="Associate Report"?"Associate List":"Staff List",xe=(ae-v.getTextWidth(oe))/2;v.setFont("helvetica","bold"),v.setFontSize(16),v.text(oe,xe,10);const _=t==="Associate Report"?["#","Name","Mobile","Email","Total Members","Commission"]:["#","Name","Email","Total Members","Incentive"],ce=C.map((Z,ee)=>t==="Associate Report"?[ee+1,Z.rname||"N/A",Z.rmobile||"N/A",Z.remail||"N/A",Z.totalReferralCount||0,Z.commission||"N/A"]:[ee+1,Z.rname||"N/A",Z.remail||"N/A",Z.totalReferralCount||0,Z.incentive||"N/A"]);Pe(v,{head:[_],body:ce,startY:20,styles:{fontSize:10},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:10}}),v.save(`all_${t==="Associate Report"?"associate":"staff"}.pdf`)},K=C=>{const v=new je;v.setFont("times","bold"),v.setFontSize(16),v.setTextColor(41,128,185);const ae="Associate Details",oe=v.internal.pageSize.width,xe=(oe-v.getTextWidth(ae))/2;v.text(ae,xe,22),v.setDrawColor(0),v.setLineWidth(.5),v.rect(10,15,oe-20,12),v.setFont("times","normal"),v.setFontSize(12),v.setTextColor(0,0,0);let _=40;if(v.setFont("times","bold"),v.text("Name:",30,_),v.setFont("times","normal"),v.text(C.rname,60,_),v.setFont("times","bold"),v.text("Mobile:",110,_),v.setFont("times","normal"),v.text(C.rmobile,140,_),_+=8,v.setFont("times","bold"),v.text("Email:",30,_),v.setFont("times","normal"),v.text(C.remail,60,_),v.setFont("times","bold"),v.text("Total Referral:",110,_),v.setFont("times","normal"),v.text(C.totalReferralCount.toString(),140,_),_+=8,v.setFont("times","bold"),v.text("Commission:",30,_),v.setFont("times","normal"),v.text(`${C.commission}`,60,_),Array.isArray(C.referredUsers)&&C.referredUsers.length>0){_+=15;const ce=["#","Name","Email","Mobile","Type","Plan"],Z=C.referredUsers.map((ee,be)=>[be+1,ee.name,ee.email,ee.mobile,ee.type?ee.type==="political"?"Politician":"Businessman":"",ee.plan.type?`${ee.plan.type?ee.plan.type==="basic"?"Basic":"Advance":"NA"} + ${ee.plan.name||"NA"}`:"N/A"]);Pe(v,{startY:_,head:[ce],body:Z,styles:{fontSize:10},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:10}})}v.save(`Associate_Report_${C.rname.replace(/\s+/g,"_")}.pdf`)},le=C=>{const v=new je;v.setFont("times","bold"),v.setFontSize(16),v.setTextColor(41,128,185);const ae="Staff Details",oe=v.internal.pageSize.width,xe=(oe-v.getTextWidth(ae))/2;v.text(ae,xe,22),v.setDrawColor(0),v.setLineWidth(.5),v.rect(10,15,oe-20,12),v.setFont("times","normal"),v.setFontSize(12),v.setTextColor(0,0,0);let _=40;if(v.setFont("times","bold"),v.text("Name:",30,_),v.setFont("times","normal"),v.text(C.rname,60,_),v.setFont("times","bold"),v.text("Mobile:",110,_),v.setFont("times","normal"),v.text(C.remail,140,_),_+=8,v.setFont("times","bold"),v.text("Total Referral:",110,_),v.setFont("times","normal"),v.text(C.totalReferralCount.toString(),140,_),v.setFont("times","bold"),v.text("Commission:",30,_),v.setFont("times","normal"),v.text(`${C.incentive}`,60,_),Array.isArray(C.referredUsers)&&C.referredUsers.length>0){_+=15;const ce=["#","Name","Email","Type","Plan"],Z=C.referredUsers.map((ee,be)=>[be+1,ee.name,ee.email,ee.type?ee.type==="political"?"Politician":"Businessman":"",ee.type?`${ee.plan.type==="basic"?"Basic":"Advance"} + ${ee.plan.name}`:""]);Pe(v,{startY:_,head:[ce],body:Z,styles:{fontSize:10},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:10}})}v.save(`Staff_Report_${C.rname.replace(/\s+/g,"_")}.pdf`)},re=C=>{const v=new je;v.setFont("times","bold"),v.setFontSize(16),v.setTextColor(41,128,185);const ae="Customer Details",oe=v.internal.pageSize.width,xe=(oe-v.getTextWidth(ae))/2;v.text(ae,xe,22),v.setDrawColor(0),v.setLineWidth(.5),v.rect(10,15,oe-20,12),v.setFont("times","normal"),v.setFontSize(12),v.setTextColor(0,0,0);let _=40;if(v.setFont("times","bold"),v.text("Name:",30,_),v.setFont("times","normal"),v.text(C.name,60,_),v.setFont("times","bold"),v.text("Mobile:",110,_),v.setFont("times","normal"),v.text(C.mobile,140,_),_+=8,v.setFont("times","bold"),v.text("Email:",30,_),v.setFont("times","normal"),v.text(C.email,60,_),v.setFont("times","bold"),v.text(`${C.type==="business"?"Employee Count : ":"Member Cnt : "}`,110,_),v.setFont("times","normal"),v.text(C.memberCount.toString(),145,_),_+=8,v.setFont("times","bold"),v.text("Type:",30,_),v.setFont("times","normal"),v.text(`${C.type==="business"?"Business":"Political"}`,60,_),Array.isArray(C.members)&&C.members.length>0){_+=15;const ce=["#","Name","Mobile","Role"],Z=C.members.map((ee,be)=>[be+1,ee.name,ee.mobile,ee.role?C.type==="business"?"Employee":"Member":""]);Pe(v,{startY:_,head:[ce],body:Z,styles:{fontSize:10},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:10}})}v.save(`Customer_Report_${C.name.replace(/\s+/g,"_")}.pdf`)},W=()=>{if(!s){F(p({message:"Please select a month.",type:"error"}));return}if(D){F(p({message:"Fetching report. Please wait...",type:"info"}));return}if(T){F(p({message:T,type:"error"}));return}if(!L.data||Object.values(L.data).length===0){F(p({message:"No Record Available",type:"warn"}));return}const C=new je,v=C.internal.pageSize.width,ae=`Monthly Report - ${s} (${l==="with"?"With Commission/Incentive":"Without Commission/Incentive"})`,oe=(v-C.getTextWidth(ae))/2;C.setFont("helvetica","bold"),C.setFontSize(16),C.text(ae,oe,10);const xe=l==="with"?["#","Name","Mobile","Plan","Refer By","Commission","Price"]:["#","Name","Mobile","Plan","Refer By","Price"];let _=0,ce=0;const Z=L.data.map((de,Te)=>{const ke=de.planPrice||0,Ce=de.commission||0;return _+=ke,l==="with"&&(ce+=Ce),l==="with"?[Te+1,de.name||"N/A",de.mobile||"N/A",`${de.planType==="basic"?"Basic":"Advance"}+ ${de.planName}`,de.referredBy||"N/A",Ce.toFixed(2),ke.toFixed(2)]:[Te+1,de.name||"N/A",de.mobile||"N/A",`${de.planType==="basic"?"Basic":"Advance"}+ ${de.planName}`,de.referredBy||"N/A",ke.toFixed(2)]}),ee=_-ce,be=[{content:"Total",colSpan:5,styles:{fontStyle:"bold",halign:"right",fillColor:[200,200,200]}},...l==="with"?[{content:ce.toFixed(2),styles:{fontStyle:"bold",fillColor:[200,200,200]}}]:[],{content:_.toFixed(2),styles:{fontStyle:"bold",fillColor:[200,200,200]}}];Z.push(be);const Re=[{content:"Net Profit",colSpan:5,styles:{fontStyle:"bold",halign:"right",fillColor:[100,200,100]}},...l==="with"?[{content:"",styles:{fillColor:[100,200,100]}}]:[],{content:ee.toFixed(2),styles:{fontStyle:"bold",fillColor:[100,200,100]}}];Z.push(Re),Pe(C,{head:[xe],body:Z,startY:20,styles:{fontSize:10},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:10}}),C.save("monthly_report.pdf")},I=()=>{if(!b||b.length===0){F(p({message:"No Data Available",type:"warn"}));return}const C=new je,v=C.internal.pageSize.width,ae=`${o==="all"?"All Customer Report":o==="politician"?"Political Cutomer Report":"Business Customer Report"}`,oe=(v-C.getTextWidth(ae))/2;C.setFont("helvetica","bold"),C.setFontSize(16),C.text(ae,oe,10);const xe=b.filter(Z=>{const ee=o==="all"||o==="politician"&&Z.type==="political"||o==="businessperson"&&Z.type==="business",be=Z.name.toLowerCase().includes(i.toLowerCase());return ee&&be}),_=["#","Name","Mobile","Email","Refer By","Member Count","Type"],ce=xe.map((Z,ee)=>[ee+1,Z.name,Z.mobile,Z.email,Z.referralName,Z.memberCount,Z.type==="business"?"Business":"Political"]);Pe(C,{head:[_],body:ce,startY:20,styles:{fontSize:10},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]},margin:{top:10}}),C.save("Customer_Report.pdf")},ne=C=>{const v=new Date,ae=v.getMonth(),oe=v.getFullYear();return C.filter(_=>{const ce=new Date(_.createdAt);return ce.getMonth()===ae&&ce.getFullYear()===oe}).length},ue=[{id:1,name:"Associate Report",icon:e.jsx(pe,{className:"text-2xl"})},{id:2,name:"Staff Report",icon:e.jsx(pe,{className:"text-2xl"})},{id:3,name:"Monthly Profit Report",icon:e.jsx(is,{className:"text-2xl"})},{id:4,name:"Customer/Politician Report",icon:e.jsx(pe,{className:"text-2xl"})}];return e.jsxs("div",{className:"Form mt-10 p-6 bg-gradient-to-r from-purple-50 to-pink-50 shadow-lg rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-[#640D5F]",children:"Reports"}),e.jsx("button",{className:"p-2 bg-[#640D5F] text-white rounded-lg hover:bg-[#520a4a] transition-all focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:ring-offset-2",onClick:se,children:e.jsx(tt,{className:"text-xl"})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6",children:ue.map(C=>e.jsx("div",{className:`p-6 bg-white border border-gray-200 rounded-lg shadow-sm cursor-pointer hover:shadow-md transition-all ${t===C.name?"ring-2 ring-[#640D5F]":""}`,onClick:()=>O(C.name),children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"text-[#640D5F]",children:C.icon}),e.jsx("h3",{className:"text-lg font-semibold text-[#640D5F] text-center",children:C.name})]})},C.id))}),t==="Associate Report"&&e.jsxs("div",{className:"mb-6 mt-9",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#640D5F]",children:"Associate Report"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative flex-grow mr-4",children:[e.jsx("input",{type:"text",placeholder:"Search associates...",className:"w-50 p-2 pl-10 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:border-transparent",value:i,onChange:C=>x(C.target.value)}),e.jsx(et,{className:"absolute left-3 top-3 text-gray-400"})]}),e.jsx("div",{className:"relative group",children:e.jsxs("button",{className:"px-6 py-3 bg-[#640D5F] text-white rounded-lg shadow-md hover:bg-[#520a4a] transition-all focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:ring-offset-2 flex items-center gap-2",onClick:w,children:[e.jsx(pe,{className:"text-xl"})," Download All Associate Report"]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("thead",{className:"bg-[#d64fcf] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Name"}),e.jsx("th",{className:"p-3 text-left",children:"Mobile"}),e.jsx("th",{className:"p-3 text-left",children:"Total Members"}),e.jsx("th",{className:"p-3 text-left",children:"Current Month Members Added"}),e.jsx("th",{className:"p-3 text-left",children:"Commission"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsx("tbody",{children:$.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 border-b border-gray-200",children:C.rname}),e.jsx("td",{className:"p-3 border-b border-gray-200",children:C.rmobile}),e.jsx("td",{className:"p-3 border-b border-gray-200",children:C.totalReferralCount}),e.jsx("td",{className:"p-3 border-b border-gray-200",children:ne(C.referredUsers)}),e.jsx("td",{className:"p-3 border-b border-gray-200",children:C.commission}),e.jsx("td",{className:"p-3 border-b border-gray-200",children:e.jsx("button",{className:"text-[#640D5F] hover:text-[#8A1C7C] transition-colors",onClick:()=>K(C),children:e.jsx(pe,{className:"text-xl"})})})]},C._id))})]})})]})]}),t==="Staff Report"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#640D5F]",children:"Staff Report"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search staff...",className:"w-50 p-2 pl-10 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:border-transparent",value:i,onChange:C=>x(C.target.value)}),e.jsx(et,{className:"absolute left-3 top-3 text-gray-400"})]}),e.jsxs("button",{className:"px-6 py-3 bg-[#640D5F] text-white rounded-lg shadow-md hover:bg-[#520a4a] transition-all focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:ring-offset-2 flex items-center",onClick:w,children:[e.jsx(pe,{className:"mr-2"}),"Download All Staff Reports"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("thead",{className:"bg-[#d64fcf] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center",children:"Name"}),e.jsx("th",{className:"p-3 text-center",children:"Email"}),e.jsx("th",{className:"p-3 text-center",children:"Total Members"}),e.jsx("th",{className:"p-3 text-left",children:"Current Month Members Added"}),e.jsx("th",{className:"p-3 text-left",children:"Incentive"}),e.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),e.jsx("tbody",{children:k.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:C.rname}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:C.remail}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:C.totalReferralCount}),e.jsx("td",{className:"p-3 border-b border-gray-200",children:ne(C.referredUsers)}),e.jsx("td",{className:"p-3 border-b border-gray-200",children:C.incentive}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:e.jsx("button",{className:"text-[#640D5F] hover:text-[#8A1C7C] transition-colors",onClick:()=>le(C),children:e.jsx(pe,{className:"text-xl"})})})]},C._id))})]})})]})]}),t==="Monthly Profit Report"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#640D5F]",children:"Monthly Profit Report"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[e.jsx("input",{type:"month",className:"w-100 p-3 border border-[#640D5F] rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:border-transparent",value:s,onChange:C=>r(C.target.value)}),e.jsxs("select",{value:l,onChange:C=>d(C.target.value),className:"mx-4 p-3 py-4 border border-[#640D5F] rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:border-transparent",children:[e.jsx("option",{value:"with",children:"With Commission/Incentive"}),e.jsx("option",{value:"without",children:"Without Commission/Incentive"})]}),e.jsxs("button",{className:"px-6 py-4 bg-[#640D5F] text-white rounded-lg shadow-md hover:bg-[#520a4a] transition-all focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:ring-offset-2 flex items-center",onClick:W,children:[e.jsx(pe,{className:"mr-2"}),"Download Monthly Profit Report"]})]})]})})]}),t==="Customer/Politician Report"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#640D5F]",children:"Customer/Politician Report"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("select",{value:o,onChange:C=>{h(C.target.value),m(null)},className:"p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"politician",children:"Politician"}),e.jsx("option",{value:"businessperson",children:"Customer"})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"search",placeholder:"Search by name...",className:"w-full p-2 pl-10 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:border-transparent",value:i,onChange:C=>V(C.target.value),onFocus:G,onBlur:ie}),e.jsx(et,{className:"absolute left-3 top-3 text-gray-400"}),j&&e.jsx("div",{className:"absolute z-10 bg-white border border-gray-300 rounded-lg shadow-lg mt-1 w-full max-h-60 overflow-y-auto",children:b.filter(C=>{const v=o==="all"||o==="politician"&&C.type==="political"||o==="businessperson"&&C.type==="business",ae=C.name.toLowerCase().includes(i.toLowerCase());return v&&ae}).map(C=>e.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-100",onMouseDown:()=>J(C),children:C.name},C.id))})]})]}),c?e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"my-6 flex items-center justify-between",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-2 text-[#640D5F]",children:["Employees of ",c.name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex items-center px-4 py-2 bg-gray-400 text-white rounded-lg shadow-md hover:bg-gray-500 transition-all focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",onClick:()=>m(null),children:[e.jsx(os,{className:"mr-2"})," Back"]}),e.jsxs("button",{className:"flex items-center px-4 py-2 bg-[#640D5F] text-white rounded-lg shadow-md hover:bg-[#520a4a] transition-all focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:ring-offset-2",onClick:()=>re(c),children:[e.jsx(pe,{className:"mr-2"}),"Download Members Report"]})]})]}),e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("thead",{className:"bg-[#d64fcf] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center",children:"Sr. No."}),e.jsx("th",{className:"p-3 text-center",children:"Employee Name"}),e.jsx("th",{className:"p-3 text-center",children:"Mobile No."})]})}),e.jsx("tbody",{children:c.members.map((C,v)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:v+1}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:C.name}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:C.mobile})]},v))})]})]}):e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"my-6 flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-semibold mb-2 text-[#640D5F]",children:o==="all"?"All Customers/Politicians":o==="politician"?"Politicians":"Businesspersons"}),e.jsxs("button",{className:"flex items-center px-4 py-2 bg-[#640D5F] text-white rounded-lg shadow-md hover:bg-[#520a4a] transition-all focus:outline-none focus:ring-2 focus:ring-[#640D5F] focus:ring-offset-2",onClick:I,children:[e.jsx(pe,{className:"mr-2"}),"Download All Reports"]})]}),e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("thead",{className:"bg-[#d64fcf] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center",children:"Sr. No."}),e.jsx("th",{className:"p-3 text-center",children:"Name"}),e.jsx("th",{className:"p-3 text-center",children:"Added By"}),e.jsx("th",{className:"p-3 text-center",children:"Member Count"})]})}),e.jsx("tbody",{children:b.filter(C=>{const v=o==="all"||o==="politician"&&C.type==="political"||o==="businessperson"&&C.type==="business",ae=C.name.toLowerCase().includes(i.toLowerCase());return v&&ae}).map((C,v)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>m(C),children:[e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:v+1}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:C.name}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:C.referralName||"N/A"}),e.jsx("td",{className:"p-3 text-center border-b border-gray-200",children:C.members.length})]},C._id))})]})]})]})]})]})},Se="http://13.201.22.86:3000/api/v1",Nr=async(t=null,a=null,s=null)=>{var r,l;try{const d=new URLSearchParams;return t&&d.append("id",t),a&&d.append("userId",a),s&&d.append("userName",s),(await q.get(`${Se}/portfolio/get-portfolio?${d}`,{withCredentials:!0})).data}catch(d){throw((l=(r=d.response)==null?void 0:r.data)==null?void 0:l.message)||"Failed to fetch User Portfolio"}},wr=async t=>{var a,s;try{const r=new FormData;return r.append("userId",t.userId),r.append("name",t.name),r.append("ownerName",t.ownerName),r.append("about",t.about),r.append("email",t.email),r.append("mobile",t.mobile),r.append("socialLinks",JSON.stringify(t.socialLinks)),r.append("address",t.address),r.append("theme",t.theme),r.append("profilePhoto",t.profilePhoto),(await q.post(`${Se}/portfolio/create-portfolio`,r,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Create User Portfolio"}},vr=async(t,a)=>{var s,r;try{const{userName:l,name:d,ownerName:o,about:h,email:i,mobile:x,address:c,theme:m,socialLinks:j}=a;return(await q.patch(`${Se}/portfolio/update-portfolio/${t}`,{userName:l,name:d,ownerName:o,about:h,email:i,mobile:x,address:c,theme:m,socialLinks:j},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to Update Portfolio"}},Sr=async(t,a,s)=>{var r,l;try{const d=new FormData;return d.append("userId",a),d.append("profilePhoto",s),(await q.patch(`${Se}/portfolio/update-profilepic/${t}`,d,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}catch(d){throw((l=(r=d.response)==null?void 0:r.data)==null?void 0:l.message)||"Failed to Update Profile Photo"}},Cr=async(t,a)=>{var s,r;try{return(await q.patch(`${Se}/portfolio/add-portfolio-services/${t}`,{services:a},{withCredentials:!0})).data}catch(l){throw((r=(s=l.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to Add Services"}},Pr=async(t,a,s,r)=>{var l,d;try{const o=new FormData;return o.append("userId",a),o.append("clients",JSON.stringify(s)),r.forEach(i=>o.append("images",i)),(await q.patch(`${Se}/portfolio/add-portfolio-client/${t}`,o,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}catch(o){throw((d=(l=o.response)==null?void 0:l.data)==null?void 0:d.message)||"Failed to Add Clients"}},Fr=async(t,a,s,r)=>{var l,d;try{const o=new FormData;return o.append("userId",a),o.append("gallery",JSON.stringify(s)),r.forEach(i=>o.append("data",i)),(await q.patch(`${Se}/portfolio/add-portfolio-gallery/${t}`,o,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}catch(o){throw((d=(l=o.response)==null?void 0:l.data)==null?void 0:d.message)||"Failed to Add Gallery Items"}},Dr=async(t,a,s)=>{var r,l;try{const d=new URLSearchParams;if(t&&a&&s)return d.append("id",t),d.append("itemId",a),d.append("type",s),(await q.delete(`${Se}/portfolio/delete-portfolio-item?${d}`,{withCredentials:!0})).data}catch(d){throw((l=(r=d.response)==null?void 0:r.data)==null?void 0:l.message)||`Failed to Delete ${s}`}},kr=async t=>{var a,s;try{return(await q.delete(`${Se}/portfolio/delete-portfolio/${t}`,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Delete Portfolio"}},Vt=(t=null,a=null,s=null)=>me({queryKey:["portfolio",t,a,s],queryFn:()=>Nr(t,a,s),staleTime:5*60*1e3,retry:!1,useErrorBoundary:!1}),Ar=()=>{const t=Q();return H({mutationFn:a=>wr(a),onSuccess:()=>{t.invalidateQueries(["portfolio"])}})},Er=()=>{const t=Q();return H({mutationFn:({portfolioId:a,updatedData:s})=>vr(a,s),onSuccess:()=>{t.invalidateQueries(["portfolio"])}})},Tr=()=>{const t=Q();return H({mutationFn:({portfolioId:a,userId:s,profilePhoto:r})=>Sr(a,s,r),onSuccess:()=>{t.invalidateQueries(["portfolio"])}})},Mr=()=>{const t=Q();return H({mutationFn:({portfolioId:a,services:s})=>Cr(a,s),onSuccess:()=>{t.invalidateQueries(["portfolio"])}})},$r=()=>{const t=Q();return H({mutationFn:({portfolioId:a,userId:s,clients:r,files:l})=>Pr(a,s,r,l),onSuccess:()=>{t.invalidateQueries(["portfolio"])}})},Ir=()=>{const t=Q();return H({mutationFn:({portfolioId:a,userId:s,gallery:r,files:l})=>Fr(a,s,r,l),onSuccess:()=>{t.invalidateQueries(["portfolio"])}})},dt=()=>{const t=Q();return H({mutationFn:({portfolioId:a,itemId:s,type:r})=>Dr(a,s,r),onSuccess:()=>{t.invalidateQueries(["portfolio"])}})},Ur=()=>{const t=Q();return H({mutationFn:a=>kr(a),onSuccess:()=>{t.invalidateQueries(["portfolio"])}})};function Rr({customer:t,setSelectedCategory:a,setSelectedCustomer:s}){const[r,l]=n.useState({userId:"",name:"",ownerName:"",email:"",mobile:"",socialLinks:{whatsapp:"",instagram:"",facebook:""},about:"",address:"",theme:"#3498db",profilePhoto:null}),d=n.useRef(null),o=X(),h=Ar();n.useEffect(()=>{t&&l({userId:t._id,name:"",ownerName:t.name,email:t.email,mobile:t.mobile,socialLinks:{whatsapp:"",instagram:"",facebook:""},about:"",address:"",theme:"#3498db",profilePhoto:null})},[t]);const[i,x]=n.useState({}),c=u=>{const{name:b,value:y,files:g}=u.target;["whatsapp","instagram","facebook"].includes(b)?l(S=>({...S,socialLinks:{...S.socialLinks,[b]:y}})):l(S=>({...S,[b]:g?g[0]:y}))},m=()=>{let u={};return r.name.trim()||(u.name="Organization Name is required"),r.ownerName.trim()||(u.ownerName="Owner Name is required"),r.email?/\S+@\S+\.\S+/.test(r.email)||(u.email="Email is not valid"):u.email="Email is required",r.mobile?/^\d{10}$/.test(r.mobile)||(u.mobile="Mobile number must be exactly 10 digits"):u.mobile="Mobile number is required",r.about||(u.about="About Us is required"),r.address||(u.address="Address is required"),r.theme||(u.theme="Theme is required"),r.profilePhoto||(u.profilePhoto="Profile Photo is required"),x(u),Object.keys(u).length===0},j=u=>{if(u.preventDefault(),m())h.mutate(r,{onSuccess:()=>{l({userId:"",name:"",ownerName:"",email:"",mobile:"",socialLinks:{whatsapp:"",instagram:"",facebook:""},about:"",address:"",theme:"#3498db",profilePhoto:null}),s(null),a("all"),d.current.value="",o(p({message:"Basic Portfolio Created"}))},onError:b=>o(p({message:b,type:"error"}))});else return};return e.jsxs("div",{className:"w-9/12 mx-auto mt-5 shadow-2xl p-5 rounded-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Basic Details"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Organization Name :"}),e.jsx("input",{type:"text",name:"name",placeholder:"Company Name",value:r.name,onChange:c,className:"w-full rounded p-2 border border-[#640D5F]"}),i.name&&e.jsx("p",{className:"text-red-400 text-sm",children:i.name}),e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Customer Name :"}),e.jsx("input",{type:"text",name:"ownerName",placeholder:"Cutomer Name",value:r.ownerName,onChange:c,className:"w-full rounded p-2 border border-[#640D5F]"}),i.ownerName&&e.jsx("p",{className:"text-red-400 text-sm",children:i.ownerName}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex-1/2",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:" Mobile No. :"}),e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:r.mobile,onChange:c,className:"w-full rounded p-2 border border-[#640D5F]"}),i.mobile&&e.jsx("p",{className:"text-red-400 text-sm",children:i.mobile})]}),e.jsxs("div",{className:"flex-1/2",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Email :"}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:r.email,onChange:c,className:"w-full rounded p-2 border  border-[#640D5F]"}),i.email&&e.jsxs("p",{className:"text-red-400 text-sm",children:[i.email,"asdsdsdd"]})]})]}),e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Full Address:"}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:r.address,onChange:c,className:"w-full rounded p-2 border border-[#640D5F]"}),i.address&&e.jsx("p",{className:"text-red-400 text-sm",children:i.address}),e.jsxs("div",{className:"mt-3 flex  gap-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Whatsapp :"}),e.jsx("input",{type:"url",name:"whatsapp",placeholder:"Whtasapp URL",value:r.socialLinks.whatsapp,onChange:c,className:"w-full rounded p-2 border  border-[#640D5F]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Instagram :"}),e.jsx("input",{type:"url",name:"instagram",placeholder:"Instagram URL",value:r.socialLinks.instagram,onChange:c,className:"w-full rounded p-2 border  border-[#640D5F]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Facebook :"}),e.jsx("input",{type:"url",name:"facebook",placeholder:"Facebook URL",value:r.socialLinks.facebook,onChange:c,className:"w-full rounded p-2 border  border-[#640D5F]"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Select Default Theme :"}),e.jsxs("div",{className:"flex justify-evenly mt-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#3498db",checked:r.theme==="#3498db",onChange:c,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#3498db] ml-1 px-8 py-1 rounded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#2ecc71",checked:r.theme==="#2ecc71",onChange:c,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#2ecc71] ml-1 px-8 py-1 rounded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#e74c3c",checked:r.theme==="#e74c3c",onChange:c,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#e74c3c] ml-1 px-8 py-1 rounded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#f39c12",checked:r.theme==="#f39c12",onChange:c,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#f39c12] ml-1 px-8 py-1 rounded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#9b59b6",checked:r.theme==="#9b59b6",onChange:c,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#9b59b6] ml-1 px-8 py-1 rounded"})]})]}),i.theme&&e.jsx("p",{className:"text-red-400 text-sm",children:i.theme})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Select Profile Pic :"}),e.jsx("input",{ref:d,type:"file",name:"profilePhoto",accept:"image/*",onChange:c,className:"w-full p-2 rounded-md border border-[#640D5F]"}),i.profilePhoto&&e.jsx("p",{className:"text-red-400 text-sm",children:i.profilePhoto})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"About Us :"}),e.jsx("textarea",{name:"about",value:r.about,onChange:c,rows:3,className:"resize-none w-full rounded p-2 border border-[#640D5F]"}),i.about&&e.jsx("p",{className:"text-red-400 text-sm",children:i.about})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"w-5/12 mt-4 mx-auto bg-[#aa1ba3] hover:bg-[#640D5F] text-white font-bold py-1.5 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:h.isPending,children:h.isPending?"Submitting":"Submit"})})]})]})}function qr({portfolios:t}){const[a,s]=n.useState(""),[r,l]=n.useState([]);return n.useEffect(()=>{if(!a){l(t||[]);return}const d=t.filter(o=>{var h;return(h=o.ownerName)==null?void 0:h.toLowerCase().includes(a.toLowerCase())});l(d)},[t,a]),e.jsxs("div",{className:" mx-auto p-8 rounded-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-1 text-[#640D5F] text-center",children:"Portfolio List"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("input",{type:"text",value:a,onChange:d=>s(d.target.value),placeholder:"Search customer...",className:"p-1 border rounded-lg w-56  mb-4"})}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ebace8]",children:[e.jsx("th",{className:"border px-4 py-2",children:"Customers"}),e.jsx("th",{className:"border px-4 py-2",children:"Organization"})]})}),e.jsx("tbody",{children:r.map(d=>e.jsxs("tr",{className:"text-center hover:bg-gray-100 h-16",children:[e.jsx("td",{className:"border px-4 py-2",children:d.ownerName}),e.jsx("td",{className:"border px-4 py-2",children:d.name||0})]},d._id))})]})]})]})]})}function Lr(){const[t,a]=n.useState(""),[s,r]=n.useState(null),[l,d]=n.useState([]),[o,h]=n.useState([]),[i,x]=n.useState("all"),[c,m]=n.useState(!1),[j,u]=n.useState([]),{data:b}=ve(null,"user",null),{data:y}=Vt();n.useEffect(()=>{(b==null?void 0:b.data.length)>0&&h(b.data)},[b]),n.useEffect(()=>{(y==null?void 0:y.data.length)>0&&u(y.data)},[y]),n.useEffect(()=>{const f=o.filter(A=>{var P;const F=i==="all"||i==="politician"&&A.type==="political"||i==="businessperson"&&A.type==="business",M=(P=A.name)==null?void 0:P.toLowerCase().includes(t.toLowerCase());return F&&M});d(f)},[o,t,i]);const g=f=>{r(f),a(f.name),m(!1)},S=()=>{r(null),a(""),d([]),m(!1)};return e.jsxs("div",{className:"Form mx-auto p-8 rounded-lg min-h-[85vh]",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-[#640D5F] text-center",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Create Customer Portfolio"}),e.jsxs("div",{className:"flex justify-center gap-5",children:[e.jsxs("select",{value:i,onChange:f=>{x(f.target.value),r(null)},className:" p-2 rounded-md text-[#4e0c4a] border border-[#640D5F]",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"politician",children:"Politician"}),e.jsx("option",{value:"businessperson",children:"Customer"})]}),e.jsxs("div",{className:"relative w-1/2 ",children:[e.jsx("input",{type:"search",placeholder:"Search Customer",value:t,onChange:f=>{a(f.target.value),m(!0)},className:"w-full p-2 rounded-md text-[#4e0c4a] border border-[#640D5F]"}),c&&e.jsx("div",{className:"absolute bg-white border border-gray-300 w-full mt-1 rounded-md shadow-lg max-h-48 overflow-y-auto",children:l.map((f,A)=>e.jsxs("div",{className:"p-2 hover:bg-gray-200 cursor-pointer",onClick:()=>{g(f),m(!1)},children:[f.name," (",f.mobile,")"]},A))})]}),e.jsx("div",{className:"my-auto",children:e.jsx("button",{type:"button",className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 shadow-md transition-transform transform hover:scale-105",onClick:S,children:"Clear"})})]}),s&&e.jsx(Rr,{customer:s,setSelectedCategory:r,setSelectedCustomer:r}),e.jsx("div",{className:"w-full mt-6",children:e.jsx(qr,{portfolios:j})})]})}function _r({setAddService:t,pid:a,onServiceAdded:s}){const[r,l]=n.useState([{title:"",description:""}]),d=X(),o=Mr(),h=(j,u)=>{const{name:b,value:y}=u.target,g=[...r];g[j][b]=y,l(g)},i=()=>{r.length<5&&l([...r,{title:"",description:""}])},x=j=>{const u=r.filter((b,y)=>y!==j);l(u)},c=()=>{for(let j of r)if(j.title.trim()===""||j.description.trim()==="")return d(p({message:"All Service Fields are Required",type:"warn"})),!1;return!0},m=()=>{c()&&o.mutate({portfolioId:a,services:r},{onSuccess:j=>{var u;t(!1),s((u=j==null?void 0:j.data)==null?void 0:u.services),d(p({message:"Services Added Successfully"}))},onError:j=>d(p({message:j,type:"error"}))})};return e.jsxs("div",{className:"w-full my-5  bg-white shadow-xl rounded-xl border overflow-clip",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-[#fb52c3] ",children:[e.jsx("h3",{className:"mx-3 text-xl font-semibold",children:"Add Services"}),e.jsx("button",{className:"cursor-pointer outline-0",onClick:()=>t(!1),children:e.jsx(Me,{})})]}),e.jsx("div",{className:"w-10/12 mx-auto",children:e.jsxs("div",{className:"p-5 space-y-6",children:[r.map((j,u)=>e.jsxs("div",{className:"relative border p-4 rounded space-y-4 shadow",children:[r.length>1&&e.jsx("button",{onClick:()=>x(u),className:"absolute top-2 right-2 text-gray-500 hover:text-red-600",children:e.jsx(Me,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`title-${u}`,children:"Title"}),e.jsx("input",{type:"text",name:"title",id:`title-${u}`,placeholder:"Service Title",value:j.title,onChange:b=>h(u,b),className:"border p-1 rounded",required:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`description-${u}`,children:"Description"}),e.jsx("textarea",{rows:2,name:"description",id:`description-${u}`,placeholder:"Service Description",value:j.description,onChange:b=>h(u,b),className:"resize-none border p-1 rounded",required:!0})]})]},u)),r.length<5&&e.jsx("button",{onClick:i,className:"border px-3 py-1 rounded bg-blue-500 hover:bg-blue-600 focus:scale-95 text-white",children:"+ Add Another Service"})]})}),e.jsxs("div",{className:"flex gap-3 justify-end p-3",children:[e.jsx("button",{className:"border px-3 py-1 rounded bg-red-500 hover:bg-red-600 text-white",onClick:()=>t(!1),children:"Cancel"}),e.jsx("button",{className:"border px-3 py-1 rounded bg-green-500 hover:bg-green-600 text-white font-sembold disabled:opacity-50 disabled:cursor-not-allowed",disabled:o.isPending,onClick:m,children:o.isPending?"Saving...":"Save"})]})]})}function Or({servicesData:t,pid:a}){const[s,r]=n.useState(!1),[l,d]=n.useState([]),[o,h]=n.useState(null),i=X(),x=dt();n.useEffect(()=>{d(t)},[t]);const c=m=>{h(m),x.mutate({portfolioId:a,itemId:m,type:"services"},{onSuccess:j=>{var u;d((u=j==null?void 0:j.data)==null?void 0:u.services),i(p({message:"Service Deleted Successfully"}))},onError:j=>i(p({message:j,type:"error"}))}),h(null)};return e.jsxs("div",{className:"w-9/12 mx-auto place-items-center p-4 rounded my-5 border bg-] relative ",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Services"}),s&&e.jsx(_r,{setAddService:r,pid:a,onServiceAdded:m=>d(m)}),l&&l.length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"No services available."}),e.jsx("button",{onClick:()=>r(!s),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded",children:"Add Service"})]}):e.jsxs("div",{className:"w-full overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-purple-200",children:[e.jsx("th",{className:"py-2 px-4 border",children:"Title"}),e.jsx("th",{className:"py-2 px-4 border",children:"Description"}),e.jsx("th",{className:"py-2 px-4 border",children:"Action"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((m,j)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"py-2 px-4 border",children:m.title}),e.jsx("td",{className:"py-2 px-4 border",children:m.description}),e.jsx("td",{className:"py-2 px-4 border",children:e.jsx("button",{onClick:()=>c(m._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:o===m._id,children:o===m._id?"Deleteing":"Delete"})})]},j))})]}),e.jsx("div",{className:"flex justify-end my-3",children:e.jsx("button",{onClick:()=>r(!s),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded",children:"Add Service"})})]})]})}function Br({setAddClients:t,uid:a,pid:s,onClientAdded:r}){const[l,d]=n.useState([{id:ze(),file:null,name:""}]),o=X(),h=$r(),i=(u,b)=>{const{name:y,value:g,files:S}=b.target,f=[...l];y==="images"?f[u].file=S[0]:f[u][y]=g,d(f)},x=()=>{l.length<5&&d([...l,{id:ze(),file:null,name:""}])},c=u=>{const b=l.filter((y,g)=>g!==u);d(b),console.log(b)},m=()=>{var u;for(let b of l)if(!((u=b.name)!=null&&u.trim())||!b.file)return o(p({message:"All client fields are required (name and logo)",type:"warn"})),!1;return!0},j=()=>{if(m()){const u=l.map(y=>y.file),b=l.map(y=>({name:y.name}));h.mutate({userId:a,portfolioId:s,clients:b,files:u},{onSuccess:y=>{var g;t(!1),r((g=y==null?void 0:y.data)==null?void 0:g.clients),o(p({message:"Clients Added Successfully"}))},onError:y=>o(p({message:y,type:"error"}))})}};return e.jsxs("div",{className:"w-full my-5  bg-white shadow-xl rounded-xl border overflow-clip",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-[#fb52c3] ",children:[e.jsx("h3",{className:"mx-3 text-xl font-semibold",children:"Add Clients"}),e.jsx("button",{className:"cursor-pointer outline-0",onClick:()=>t(!1),children:e.jsx(Me,{})})]}),e.jsx("div",{className:"w-10/12 mx-auto",children:e.jsxs("div",{className:"p-5 space-y-6",children:[l.map((u,b)=>e.jsxs("div",{className:"relative border p-4 rounded space-y-4 shadow",children:[l.length>0&&e.jsx("button",{onClick:()=>c(b),className:"absolute top-2 right-2 text-gray-500 hover:text-red-600",children:e.jsx(Me,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`name-${b}`,children:"Client Name"}),e.jsx("input",{type:"text",name:"name",id:`name-${b}`,placeholder:"Client Name",value:u.name,onChange:y=>i(b,y),className:"resize-none border p-1 rounded",required:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`logo-${b}`,children:"Logo"}),e.jsx("input",{type:"file",name:"images",id:`logo-${b}`,placeholder:"Client Logo",onChange:y=>i(b,y),className:"border p-1 rounded",required:!0})]})]},u.id)),l.length<5&&e.jsx("button",{onClick:x,className:"border px-3 py-1 rounded bg-blue-500 hover:bg-blue-600 focus:scale-95 text-white",children:"+ Add Another Clients"})]})}),e.jsxs("div",{className:"flex gap-3 justify-end p-3",children:[e.jsx("button",{className:"border px-3 py-1 rounded bg-red-500 hover:bg-red-600 text-white",onClick:()=>t(!1),children:"Cancel"}),e.jsx("button",{className:"border px-3 py-1 rounded bg-green-500 hover:bg-green-600 text-white font-sembold disabled:opacity-50 disabled:cursor-not-allowed",disabled:h.isPending,onClick:j,children:h.isPending?"Saving...":"Save"})]})]})}function zr({uid:t,pid:a,clientsData:s}){const[r,l]=n.useState(!1),[d,o]=n.useState([]),[h,i]=n.useState(null),x="http://13.201.22.86:3000",c=X(),m=dt();n.useEffect(()=>{o(s)},[s]);const j=u=>{i(u),m.mutate({portfolioId:a,itemId:u,type:"clients"},{onSuccess:b=>{var y;o((y=b==null?void 0:b.data)==null?void 0:y.clients),c(p({message:"Client Deleted Successfully"}))},onError:b=>c(p({message:b,type:"error"}))}),i(null)};return e.jsxs("div",{className:"w-9/12 mx-auto place-items-center p-4 rounded my-5 border bg-] relative ",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Clients"}),r&&e.jsx(Br,{uid:t,setAddClients:l,pid:a,onClientAdded:u=>o(u)}),d&&d.length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"No Clients available."}),e.jsx("button",{onClick:()=>l(!r),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded",children:"Add Clients"})]}):e.jsxs("div",{className:"w-full overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-gray-300",children:[e.jsx("thead",{className:"text-center",children:e.jsxs("tr",{className:"bg-purple-200",children:[e.jsx("th",{className:"py-2 px-4 border",children:"Logo"}),e.jsx("th",{className:"py-2 px-4 border",children:"Name"}),e.jsx("th",{className:"py-2 px-4 border",children:"Action"})]})}),e.jsx("tbody",{className:"text-center",children:d==null?void 0:d.map((u,b)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"py-2 px-4 border place-items-center",children:e.jsx("img",{className:"w-15 h-10",src:u!=null&&u.logoUrl?`${x}${u.logoUrl}`:"../../assets/profile.jpg"})}),e.jsx("td",{className:"py-2 px-4 border",children:u.name}),e.jsx("td",{className:"py-2 px-4 border",children:e.jsx("button",{onClick:()=>j(u._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:h===u._id,children:h===u._id?"Deleteing":"Delete"})})]},b))})]}),e.jsx("div",{className:"flex justify-end my-3",children:e.jsx("button",{onClick:()=>l(!r),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded",children:"Add Clients"})})]})]})}function Wr({uid:t,setAddGallery:a,pid:s,onGalleryAdded:r}){const[l,d]=n.useState([{id:ze(),file:null,type:"img",title:""}]),o=X(),h=Ir(),i=(u,b)=>{const{name:y,value:g,files:S}=b.target,f=[...l];y==="data"?f[u].file=S[0]:f[u][y]=g,d(f)},x=()=>{l.length<5&&d([...l,{id:ze(),file:null,type:"img",name:""}])},c=u=>{const b=l.filter((y,g)=>g!==u);d(b)},m=()=>{var u;for(let b of l){if(!((u=b.title)!=null&&u.trim())||!b.file)return o(p({message:"All  fields are required (Title and Image/Video)",type:"warn"})),!1;if(!["img","video"].includes(b.type))return o(p({message:"Invalid Type Selected"})),!1;const y=b.file.type;if(b.type==="img"&&!y.startsWith("image/"))return o(p({message:"File type does not match selected 'Image'",type:"warn"})),!1;if(b.type==="video"&&!y.startsWith("video/"))return o(p({message:"File type does not match selected 'Video'",type:"warn"})),!1}return!0},j=()=>{if(m()){const u=l.map(y=>y.file),b=l.map(y=>({title:y.title,type:y.type}));h.mutate({userId:t,portfolioId:s,gallery:b,files:u},{onSuccess:y=>{var g;a(!1),r((g=y==null?void 0:y.data)==null?void 0:g.gallery),o(p({message:"Gallery Item Added Successfully"}))},onError:y=>o(p({message:y,type:"error"}))})}};return e.jsxs("div",{className:"w-full my-5  bg-white shadow-xl rounded-xl border overflow-clip",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-[#fb52c3] ",children:[e.jsx("h3",{className:"mx-3 text-xl font-semibold",children:"Add Clients"}),e.jsx("button",{className:"cursor-pointer outline-0",onClick:()=>a(!1),children:e.jsx(Me,{})})]}),e.jsx("div",{className:"w-10/12 mx-auto",children:e.jsxs("div",{className:"p-5 space-y-6",children:[l.map((u,b)=>e.jsxs("div",{className:"relative border p-4 rounded space-y-4 shadow",children:[l.length>0&&e.jsx("button",{onClick:()=>c(b),className:"absolute top-2 right-2 text-gray-500 hover:text-red-600",children:e.jsx(Me,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`title-${b}`,children:"Title"}),e.jsx("input",{type:"text",name:"title",id:`title-${b}`,placeholder:"Title",value:u.title,onChange:y=>i(b,y),className:"resize-none border p-1 rounded",required:!0})]}),e.jsxs("div",{className:"flex gap-x-5 justify-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`type-${b}`,children:"Select File Type:"}),e.jsxs("select",{id:`type-${b}`,name:"type",value:u.type,onChange:y=>i(b,y),className:"cursor-pointer ms-5 mt-2 p-2 border rounded",children:[e.jsx("option",{value:"img",children:"Image"}),e.jsx("option",{value:"video",children:"Video"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`file-${b}`,children:"Logo :"}),e.jsx("input",{type:"file",name:"data",id:`file-${b}`,placeholder:"File",onChange:y=>i(b,y),className:"border p-1.5 rounded ms-5 mt-2",required:!0})]})]})]},u.id)),l.length<5&&e.jsx("button",{onClick:x,className:"border px-3 py-1 rounded bg-blue-500 hover:bg-blue-600 focus:scale-95 text-white",children:"+ Add Another Item"})]})}),e.jsxs("div",{className:"flex gap-3 justify-end p-3",children:[e.jsx("button",{className:"border px-3 py-1 rounded bg-red-500 hover:bg-red-600 text-white",onClick:()=>a(!1),children:"Cancel"}),e.jsx("button",{className:"border px-3 py-1 rounded bg-green-500 hover:bg-green-600 text-white font-sembold disabled:opacity-50 disabled:cursor-not-allowed",disabled:h.isPending,onClick:j,children:h.isPending?"Saving...":"Save"})]})]})}function Vr({uid:t,pid:a,galleryData:s}){const[r,l]=n.useState(!1),[d,o]=n.useState([]),[h,i]=n.useState(null),x="http://13.201.22.86:3000",c=X(),m=dt();n.useEffect(()=>{o(s)},[s]);const j=u=>{i(u),m.mutate({portfolioId:a,itemId:u,type:"gallery"},{onSuccess:b=>{var y;o((y=b==null?void 0:b.data)==null?void 0:y.gallery),c(p({message:"Gallery Item Deleted Successfully"}))},onError:b=>c(p({message:b,type:"error"}))}),i(null)};return e.jsxs("div",{className:"w-9/12 mx-auto place-items-center p-4 rounded my-5 border bg-] relative ",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Gallery"}),r&&e.jsx(Wr,{uid:t,setAddGallery:l,pid:a,onGalleryAdded:u=>o(u)}),d&&d.length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"No Clients available."}),e.jsx("button",{onClick:()=>l(!r),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded",children:"Add Gallery Items"})]}):e.jsxs("div",{className:"w-full overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-gray-300",children:[e.jsx("thead",{className:"text-center",children:e.jsxs("tr",{className:"bg-purple-200",children:[e.jsx("th",{className:"py-2 px-4 border",children:"Image/Video"}),e.jsx("th",{className:"py-2 px-4 border",children:"Title"}),e.jsx("th",{className:"py-2 px-4 border",children:"Action"})]})}),e.jsx("tbody",{className:"text-center",children:d==null?void 0:d.map((u,b)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"py-2 px-4 border place-items-center",children:(u==null?void 0:u.type)==="img"?u!=null&&u.url?e.jsx("img",{className:"w-24 h-14",src:u!=null&&u.url?`${x}${u.url}`:"../../assets/profile.jpg"}):e.jsx("p",{children:"Image Not Available"}):u!=null&&u.url?e.jsxs("a",{href:u!=null&&u.url?`${x}${u.url}`:"../../assets/profile.jpg",target:"_blank",className:"hover:text-blue-700",children:["View Video ",e.jsx(wt,{className:"inline-block w-5"})," "]}):e.jsx("p",{children:"Video Not Available"})}),e.jsx("td",{className:"py-2 px-4 border",children:u.title}),e.jsx("td",{className:"py-2 px-4 border",children:e.jsx("button",{onClick:()=>j(u._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:h===u._id,children:h===u._id?"Deleteing":"Delete"})})]},b))})]}),e.jsx("div",{className:"flex justify-end my-3",children:e.jsx("button",{onClick:()=>l(!r),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded",children:"Add Gallery Item"})})]})]})}function Gr({portfolioData:t,setPortfolioData:a}){var D,T,$;const[s,r]=n.useState(null),[l,d]=n.useState(!1),[o,h]=n.useState({}),[i,x]=n.useState({}),c=X(),m=Er(),j=Tr(),[u,b]=n.useState(!1),[y,g]=n.useState(null),[S,f]=n.useState(null),A="http://13.201.22.86:3000";n.useEffect(()=>{r(t),f(null)},[t]),n.useEffect(()=>{var k,V,G;h(s?{userName:s.userName,name:s.name,ownerName:s.ownerName,email:s.email,mobile:s.mobile,socialLinks:{whatsapp:(k=s==null?void 0:s.socialLinks)==null?void 0:k.whatsapp,instagram:(V=s==null?void 0:s.socialLinks)==null?void 0:V.instagram,facebook:(G=s==null?void 0:s.socialLinks)==null?void 0:G.facebook},about:s.about,address:s.address,theme:s.theme}:{})},[s]);const F=k=>{const{name:V,value:G}=k.target;["whatsapp","instagram","facebook"].includes(V)?h(ie=>({...ie,socialLinks:{...ie.socialLinks,[V]:G}})):h(ie=>({...ie,[V]:G}))},M=()=>{let k={};return o.userName.trim()||(k.userName="User Name is required"),o.name.trim()||(k.name="Organization Name is required"),o.ownerName.trim()||(k.ownerName="Owner Name is required"),o.email?/\S+@\S+\.\S+/.test(o.email)||(k.email="Email is not valid"):k.email="Email is required",o.mobile?/^\d{10}$/.test(o.mobile)||(k.mobile="Mobile number must be exactly 10 digits"):k.mobile="Mobile number is required",o.about||(k.about="About Us is required"),o.address||(k.address="Address is required"),o.theme||(k.theme="Theme is required"),x(k),Object.keys(k).length===0},P=()=>{if(M())m.mutate({portfolioId:s._id,updatedData:o},{onSuccess:k=>{d(!1),r(k==null?void 0:k.data),h({}),c(p({message:"Basic Details Updated Successfully"}))},onError:k=>c(p({message:k,type:"error"}))});else return},R=()=>{d(!1),h({})},E=k=>{f(V=>V===k?null:k)},U=()=>{b(!0)},L=()=>{if(!y||!y.type.startsWith("image/")){c(p({message:"Profile Picture Is Required",type:"error"}));return}j.mutate({portfolioId:s._id,userId:s.userId,profilePhoto:y},{onSuccess:k=>{b(!1),g(null),k!=null&&k.data&&r(k.data),c(p({message:"Profile Photo Updated"}))},onError:k=>c(p({message:k,type:"error"}))})};return e.jsxs("div",{className:"w-full rounded-lg shadow-lg  p-3 relative",children:[e.jsx("div",{className:"flex justify-end p-2.5",children:e.jsx("button",{type:"button",className:"cursor-pointer bg-white text-black shadow border px-2 rounded",title:"Close",onClick:()=>a(null),children:"Close"})}),e.jsxs("div",{className:"w-9/12 mx-auto place-items-center p-2 rounded my-5 border bg-[#f8e1f6]",children:[e.jsxs("div",{className:"w-8/12 flex justify-evenly items-center",children:[e.jsxs("div",{className:"w-40 relative",children:[e.jsx("img",{className:"w-40 h-40 rounded-full",src:s!=null&&s.profilePhotoUrl?`${A}${s.profilePhotoUrl}`:"../../assets/profile.jpg",alt:"Profile"}),e.jsx(ds,{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2  cursor-pointer  text-black hover:scale-105 ",onClick:U})]}),e.jsxs("div",{className:"flex flex-col gap-y-1.5",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("label",{className:"text-gray-600 font-semibold",children:"Username:"}),l?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"userName",value:o.userName||"",onChange:F,className:"border px-2 py-1 rounded"}),i.userName&&e.jsx("p",{className:"text-red-400 text-sm",children:i.userName})]}):e.jsx("h4",{className:"text-lg",children:s==null?void 0:s.userName})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("label",{className:"text-gray-600 font-semibold",children:"Company:"}),l?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"name",value:o.name||"",onChange:F,className:"border px-2 py-1 rounded"}),i.name&&e.jsx("p",{className:"text-red-400 text-sm",children:i.name})]}):e.jsx("h4",{className:"text-lg",children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("label",{className:"text-gray-600 font-semibold",children:"Name:"}),l?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"ownerName",value:o.ownerName||"",onChange:F,className:"border px-2 py-1 rounded"}),i.ownerName&&e.jsx("p",{className:"text-red-400 text-sm",children:i.ownerName})]}):e.jsx("h4",{className:"text-lg",children:s==null?void 0:s.ownerName})]})]})]}),e.jsxs("div",{className:"w-10/12 flex justify-evenly gap-x-3 mt-5 ",children:[e.jsxs("div",{children:[e.jsx("label",{className:"inline-block w-full text-center text-sm text-gray-600 font-semibold",children:"Mobile"}),l?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"mobile",value:o.mobile||"",onChange:F,className:"border px-2 py-1 rounded"}),i.mobile&&e.jsx("p",{className:"text-red-400 text-sm",children:i.mobile})]}):e.jsx("p",{className:"text-lg",children:s==null?void 0:s.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"inline-block w-full text-center text-sm text-gray-600 font-semibold",children:"Email"}),l?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"email",name:"email",value:o.email||"",onChange:F,className:"border px-2 py-1 rounded"}),i.email&&e.jsxs("p",{className:"text-red-400 text-sm",children:[i.email,"asdsdsdd"]})]}):e.jsx("p",{className:"text-lg",children:s==null?void 0:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"inline-block w-full text-center text-sm text-gray-600 font-semibold",children:"Address"}),l?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"address",value:o.address||"",onChange:F,className:"border px-2 py-1 rounded"}),i.address&&e.jsx("p",{className:"text-red-400 text-sm",children:i.address})]}):e.jsx("p",{className:"text-lg ",children:s==null?void 0:s.address})]})]}),e.jsxs("div",{className:"w-10/12 my-5",children:[e.jsx("h5",{className:"text-center text-gray-500 font-semibold",children:"Social Media"}),l?e.jsxs("div",{className:"mt-2 flex  gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Whatsapp :"}),e.jsx("input",{type:"url",name:"whatsapp",placeholder:"Whtasapp URL",value:(D=o==null?void 0:o.socialLinks)==null?void 0:D.whatsapp,onChange:F,className:"w-full rounded p-2 border  border-[#640D5F]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Instagram :"}),e.jsx("input",{type:"url",name:"instagram",placeholder:"Instagram URL",value:(T=o==null?void 0:o.socialLinks)==null?void 0:T.instagram,onChange:F,className:"w-full rounded p-2 border  border-[#640D5F]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Facebook :"}),e.jsx("input",{type:"url",name:"facebook",placeholder:"Facebook URL",value:($=o==null?void 0:o.socialLinks)==null?void 0:$.facebook,onChange:F,className:"w-full rounded p-2 border  border-[#640D5F]"})]})]}):e.jsxs("div",{className:" flex justify-evenly mt-2 text-3xl ",children:[e.jsx(vt,{className:"text-lime-500  cursor-pointer",onClick:()=>{var k;return window.open((k=s==null?void 0:s.socialLinks)==null?void 0:k.whatsapp)}}),e.jsx(St,{className:"text-pink-600 cursor-pointer",onClick:()=>{var k;return window.open((k=s==null?void 0:s.socialLinks)==null?void 0:k.instagram)}}),e.jsx(Ct,{className:"text-blue-600 cursor-pointer",onClick:()=>{var k;return window.open((k=s==null?void 0:s.socialLinks)==null?void 0:k.facebook)}})]})]}),e.jsxs("div",{className:"w-9/12 my-5",children:[e.jsx("h5",{className:"text-center text-gray-500 font-semibold",children:"About"}),l?e.jsxs(e.Fragment,{children:[e.jsx("textarea",{name:"about",value:o.about||"",onChange:F,className:"w-full border px-3 py-2 rounded resize-none",rows:3}),i.about&&e.jsx("p",{className:"text-red-400 text-sm",children:i.about})]}):e.jsx("p",{className:"text-center text-lg ",children:s==null?void 0:s.about})]}),e.jsx("div",{className:"w-9/12 my-5",children:l&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-[#640D5F] font-bold",children:"Select Default Theme :"}),e.jsxs("div",{className:"flex justify-evenly mt-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#3498db",checked:(o==null?void 0:o.theme)==="#3498db",onChange:F,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#3498db] ml-1 px-8 py-1 rounded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#2ecc71",checked:(o==null?void 0:o.theme)==="#2ecc71",onChange:F,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#2ecc71] ml-1 px-8 py-1 rounded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#e74c3c",checked:(o==null?void 0:o.theme)==="#e74c3c",onChange:F,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#e74c3c] ml-1 px-8 py-1 rounded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#f39c12",checked:(o==null?void 0:o.theme)==="#f39c12",onChange:F,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#f39c12] ml-1 px-8 py-1 rounded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"theme",value:"#9b59b6",checked:(o==null?void 0:o.theme)==="#9b59b6",onChange:F,className:"cursor-pointer"})," ",e.jsx("span",{className:"bg-[#9b59b6] ml-1 px-8 py-1 rounded"})]})]}),i.theme&&e.jsx("p",{className:"text-red-400 text-sm",children:i.theme})]})}),e.jsx("div",{className:"justify-self-end p-2.5",children:l?e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{type:"button",onClick:R,className:"bg-red-500 text-white px-3 py-0.5 rounded hover:bg-red-600 shadow-md transition-transform transform hover:scale-105",children:"Cancel"}),e.jsx("button",{type:"button",onClick:P,className:"bg-green-500 text-white px-3 py-0.5 rounded hover:bg-green-600 shadow-md transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",disabled:m.isPending,children:m.isPending?"Saving...":"Save"})]}):e.jsx("button",{type:"button",onClick:()=>d(!0),className:"bg-blue-500 text-white px-3 py-0.5 rounded hover:bg-blue-600 shadow-md transition-transform transform hover:scale-105",children:"Edit"})}),e.jsxs("div",{className:"space-x-3 text-white",children:[e.jsxs("button",{className:"bg-rose-600 hover:bg-rose-700  px-3 py-1 rounded",onClick:()=>E("services"),children:["Services ",e.jsx(yt,{className:"inline-block"})," "]}),e.jsxs("button",{className:"bg-rose-600 hover:bg-rose-700  px-3 py-1 rounded",onClick:()=>E("clients"),children:["Clients ",e.jsx(Nt,{className:"inline-block"})]}),e.jsxs("button",{className:"bg-rose-600 hover:bg-rose-700  px-3 py-1 rounded",onClick:()=>E("gallery"),children:["Gallery ",e.jsx(cs,{className:"inline-block"})]})]})]}),e.jsxs("div",{children:[S==="services"&&e.jsx(Or,{servicesData:s==null?void 0:s.services,pid:s==null?void 0:s._id}),S==="clients"&&e.jsx(zr,{clientsData:s==null?void 0:s.clients,uid:s==null?void 0:s.userId,pid:s==null?void 0:s._id}),S==="gallery"&&e.jsx(Vr,{galleryData:s==null?void 0:s.gallery,uid:s==null?void 0:s.userId,pid:s==null?void 0:s._id})]}),u&&e.jsx("div",{className:"fixed top-0 left-1/2 transform -translate-x-1/2 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Profile Picture"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("input",{type:"file",name:"images",id:"profile",accept:".png, .jpg, .jpeg",onChange:k=>g(k.target.files[0]),className:"border p-1 rounded",required:!0})}),e.jsx("button",{onClick:L,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition mt-5 disabled:opacity-50 disabled:cursor-not-allowed",disabled:j.isPending,children:j.isPending?"Updating...":"Confirm"}),e.jsx("button",{onClick:()=>{b(!1),g(null)},className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})})]})}function Kr(){const[t,a]=n.useState([]),[s,r]=n.useState(""),[l,d]=n.useState([]),[o,h]=n.useState(null),[i,x]=n.useState(!1),[c,m]=n.useState(null),[j,u]=n.useState(""),b=X(),{data:y}=Vt(),g=Ur();n.useEffect(()=>{y!=null&&y.data&&(y==null?void 0:y.data.length)>0&&a(y.data)},[y]),n.useEffect(()=>{if(!s){d(t||[]);return}const F=t.filter(M=>{var P;return(P=M.ownerName)==null?void 0:P.toLowerCase().includes(s.toLowerCase())});d(F)},[t,s]);const S=F=>{m(F),x(!0)},f=()=>{if(j.toLowerCase()!=="confirm"){alert("Please enter 'confirm' to delete the record.");return}g.mutate(c,{onSuccess:()=>{x(!1),m(null),u(""),b(p({message:"Portfolio Deleted Successfully"}))},onError:F=>b(p({message:F,type:"error"}))})},A=F=>{window.open(`/portfolio/${F}`,"_blank")};return e.jsxs("div",{className:"w-full p-8 min-h-[85vh]",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-[#640D5F] text-center",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Manage Portfolio's"}),o&&e.jsx(Gr,{portfolioData:o,setPortfolioData:h}),e.jsx("div",{className:"w-full mt-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("input",{type:"text",value:s,onChange:F=>r(F.target.value),placeholder:"Search customer...",className:"p-1 border rounded-lg w-56  mb-4"})}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ebace8]",children:[e.jsx("th",{className:"border  py-2",children:"Customers"}),e.jsx("th",{className:"border  py-2",children:"Organization"}),e.jsx("th",{className:"border  py-2",children:"Actions"})]})}),e.jsx("tbody",{children:l.map(F=>e.jsxs("tr",{className:"text-center hover:bg-gray-100 h-16",children:[e.jsx("td",{className:"border  py-2",children:F.ownerName}),e.jsx("td",{className:"border  py-2",children:F.name||0}),e.jsx("td",{className:"border  py-2",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{className:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 shadow-md transition-transform transform hover:scale-105",onClick:()=>{h(F)},children:"Update"}),e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 shadow-md transition-transform transform hover:scale-105",onClick:()=>{S(F._id)},children:"Delete"}),e.jsxs("button",{className:"bg-white px-2 py-1 rounded shadow-md transition-transform transform hover:scale-105 border",onClick:()=>{A(F.userName)},children:["View ",e.jsx(wt,{className:"inline-block"})]})]})})]},F._id))})]})]})}),i&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center border border-gray-300",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-2",children:"Enter 'confirm' to delete this customer:"}),e.jsx("input",{type:"text",value:j,onChange:F=>u(F.target.value),className:"w-full p-2 border border-gray-300 rounded-lg mb-4"}),e.jsx("button",{onClick:f,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Confirm"}),e.jsx("button",{onClick:()=>{x(!1),u(""),m(null)},className:"bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded hover:bg-gray-400 transition ml-2",children:"Cancel"})]})})]})}const Qr=({themes:t,onThemeChange:a})=>{if(!Array.isArray(t)||t.length===0)return console.error("Invalid prop `themes`: Expected an array of strings."),null;const[s,r]=n.useState(t[0]);return n.useEffect(()=>{document.documentElement.style.setProperty("--primary-color",s),a&&a(s)},[s,a]),e.jsx("div",{className:"theme-switcher flex space-x-2",role:"group","aria-label":"Theme switcher",children:t.map((l,d)=>e.jsx("button",{className:`theme-option w-8 h-8 rounded-full focus:outline-none transition-transform duration-300 ${s===l?"ring-2 ring-blue-500":""}`,style:{backgroundColor:l},onClick:()=>r(l),"aria-label":`Theme option ${d+1}`,"aria-pressed":s===l},d))})},Yr=({themes:t,onThemeChange:a})=>e.jsx("div",{className:"pt-1 bg-gray-100 py-2 w-full",children:e.jsx("div",{className:"container mx-auto",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"flex items-center mx-auto gap-2",children:e.jsx(Qr,{themes:t,onThemeChange:a})})})})}),Hr=({businessInfo:t})=>{var l,d,o;const a=()=>{const h=document.getElementById("about");h&&h.scrollIntoView({behavior:"smooth"})},s=()=>{const h=document.getElementById("services");h&&h.scrollIntoView({behavior:"smooth"})};return e.jsxs("section",{className:"hero-section w-full",children:[e.jsx("div",{className:"hero-container",children:e.jsxs("div",{className:"hero-content-wrapper",children:[e.jsx("div",{className:"hero-image-container",children:e.jsxs("div",{className:"hero-image-wrapper",children:[e.jsx("img",{src:`http://13.201.22.86:3000${t.profilePhotoUrl}`,alt:t.ownerName,className:"hero-profile-img"}),e.jsx("div",{className:"hero-image-overlay"})]})}),e.jsxs("div",{className:"hero-text-container",children:[e.jsx("h1",{className:"hero-title",children:t.ownerName}),e.jsx("p",{className:"hero-subtitle",children:t.name}),e.jsx("p",{className:"hero-description",children:"Professional business solutions tailored to your needs"}),e.jsxs("div",{className:"hero-actions",children:[e.jsxs("button",{className:"hero-primary-btn",onClick:a,children:[e.jsx("i",{className:"bi bi-envelope-fill mr-2"})," Contact Me"]}),e.jsxs("button",{className:"hero-secondary-btn",onClick:s,children:[e.jsx("i",{className:"bi bi-briefcase-fill mr-2"})," Our Services"]})]}),e.jsx("div",{className:"hero-social-links",children:[{icon:e.jsx(vt,{className:"text-[2.5rem]"}),name:"WhatsApp",url:(l=t==null?void 0:t.socialLinks)==null?void 0:l.whatsapp},{icon:e.jsx(Ct,{className:"text-[2.5rem]"}),name:"Facebook",url:(d=t==null?void 0:t.socialLinks)==null?void 0:d.facebook},{icon:e.jsx(St,{className:"text-[2.5rem]"}),name:"Instagram",url:(o=t==null?void 0:t.socialLinks)==null?void 0:o.instagram}].map((h,i)=>e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"social-icon ml-2.5","aria-label":h.name,children:h.icon},i))})]})]})}),e.jsx("style",{jsx:!0,children:`
        .hero-section {
          --primary-bg: linear-gradient(135deg, var(--primary-color) 0%, #1a3a8f 100%);
          --btn-hover-darken: 15%;
          position: relative;
          background: var(--primary-bg);
          color: white;
          overflow: hidden;
          padding: 2rem 0;
        }
        
        .hero-section::before {
          content: '';
          position: absolute;
          top: -50%;
          left: -50%;
          width: 200%;
          height: 200%;
          background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
          animation: rotate 20s linear infinite;
          z-index: 0;
        }
        
        .hero-container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 1rem;
          position: relative;
          z-index: 1;
        }
        
        .hero-content-wrapper {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 2rem;
        }
        
        @media (min-width: 992px) {
          .hero-content-wrapper {
            flex-direction: row;
            justify-content: center;
            gap: 3rem;
          }
        }
        
        /* Image styling */
        .hero-image-container {
          flex: 0 0 auto;
        }
        
        .hero-image-wrapper {
          display: inline-block;
          position: relative;
        }
        
        .hero-profile-img {
          width: 200px;
          height: 200px;
          object-fit: cover;
          border-radius: 50%;
          border: 5px solid rgba(255,255,255,0.3);
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
          transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .hero-image-overlay {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border-radius: 50%;
          border: 4px solid rgba(255,255,255,0.1);
          pointer-events: none;
        }
        
        .hero-profile-img:hover {
          transform: scale(1.05) rotate(2deg);
          box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        /* Text content styling */
        .hero-text-container {
          text-align: center;
          max-width: 600px;
        }
        
        @media (min-width: 992px) {
          .hero-text-container {
            text-align: left;
            flex: 1 1 auto;
          }
        }
        
        .hero-title {
          font-size: 2.5rem;
          font-weight: bold;
          margin-bottom: 0.5rem;
          position: relative;
          background: linear-gradient(to right, #ffffff, #e6f0ff);
          -webkit-background-clip: text;
          background-clip: text;
          color: transparent;
          text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .hero-subtitle {
          font-size: 1.25rem;
          color: rgba(255,255,255,0.9);
          margin-bottom: 1rem;
        }
        
        .hero-description {
          color: rgba(255,255,255,0.75);
          margin-bottom: 1.5rem;
          line-height: 1.6;
        }
        
        /* Buttons styling */
        .hero-actions {
          display: flex;
          flex-wrap: wrap;
          gap: 1rem;
          justify-content: center;
          margin-bottom: 1.5rem;
        }
        
        @media (min-width: 992px) {
          .hero-actions {
            justify-content: flex-start;
          }
        }
        
        .hero-primary-btn, .hero-secondary-btn {
          padding: 0.75rem 1.5rem;
          border-radius: 9999px;
          font-weight: bold;
          font-size: 1rem;
          transition: all 0.3s ease;
          display: inline-flex;
          align-items: center;
          border: none;
          cursor: pointer;
        }
        
        .hero-primary-btn {
          background: var(--primary-bg);
          color: white;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .hero-primary-btn:hover {
          filter: brightness(0.85);
          transform: translateY(-3px);
          box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        .hero-secondary-btn {
          background: transparent;
          color: white;
          border: 2px solid rgba(255,255,255,0.5);
        }
        
        .hero-secondary-btn:hover {
          background: rgba(255,255,255,0.1);
          transform: translateY(-3px);
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        /* Social icons */
        .hero-social-links {
          display: flex;
          gap: 1rem;
          justify-content: center;
        }
        
        .hero-social-links .social-icon{
          color:#FFB200;
}


        @media (min-width: 992px) {
          .hero-social-links {
            justify-content: flex-start;
          }
        }
        
        .social-icon {
          color: rgba(255,255,255,0.75);
          font-size: 1.25rem;
          transition: all 0.3s ease;
        }
        
        .social-icon:hover {
          color: white;
          transform: translateY(-2px);
        }
        
        /* Animation */
        @keyframes rotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        /* Responsive adjustments */
        @media (min-width: 768px) {
          .hero-profile-img {
            width: 220px;
            height: 220px;
          }
          
          .hero-title {
            font-size: 3rem;
          }
        }
        
        @media (min-width: 1200px) {
          .hero-profile-img {
            width: 250px;
            height: 250px;
          }
        }
        
        @media (max-width: 575.98px) {
          .hero-profile-img {
            width: 180px;
            height: 180px;
          }
          
          .hero-title {
            font-size: 2rem;
          }
          
          .hero-actions {
            flex-direction: column;
            width: 100%;
          }
          
          .hero-primary-btn, .hero-secondary-btn {
            width: 100%;
            justify-content: center;
          }
        }
      `})]})},Xr=({businessInfo:t})=>e.jsxs("section",{className:"py-5 px-2 bg-light w-full",id:"about",children:[e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"px-4 md:px-6",children:[e.jsx("h2",{className:"text-3xl text-center text-color font-bold mb-4",children:"About Us"}),e.jsx("p",{className:"text-lg text-gray-700 mb-0 text-justify",children:t.about})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-white rounded-lg h-full mx-1 p-4 md:p-6",style:{boxShadow:"rgba(14, 30, 37, 0.12) 0px 2px 4px 0px, rgba(14, 30, 37, 0.32) 0px 2px 16px 0px"},children:[e.jsx("h2",{className:"text-3xl text-color text-center font-bold mb-4",children:"Contact Details"}),e.jsxs("ul",{className:"list-none mb-0",children:[e.jsx("li",{className:"mb-4 pb-2 border-b",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"icon-bg flex items-center justify-center rounded-full w-10 h-10 min-w-[2.5rem]",children:e.jsx(jt,{className:"text-white text-base"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:"Email"}),e.jsx("a",{href:`mailto:${t.email}`,className:"text-gray-800 no-underline",children:t.email})]})]})}),e.jsx("li",{className:"mb-4 pb-2 border-b",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"icon-bg flex items-center justify-center rounded-full w-10 h-10 min-w-[2.5rem]",children:e.jsx(ms,{className:"text-white text-base"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:"Phone"}),e.jsx("a",{href:`tel:${String(t.mobile).replace(/\D/g,"")}`,className:"text-gray-800 no-underline",children:t.mobile})]})]})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"icon-bg flex items-center justify-center rounded-full w-10 h-10 min-w-[2.5rem]",children:e.jsx(us,{className:"text-white text-base"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:"Address"}),e.jsx("p",{className:"text-gray-800",children:t.address})]})]})})]})]})})]})}),e.jsx("style",{jsx:!0,children:`
        .text-color {
           --primary-bg: linear-gradient(135deg, var(--primary-color) 0%, #1a3a8f 100%);
          background: var(--primary-bg);
          -webkit-background-clip: text;
          background-clip: text;
          color: transparent;
        }

        .icon-bg {
            --primary-bg: linear-gradient(135deg, var(--primary-color) 0%, #1a3a8f 100%);
            background: var(--primary-bg);
            width: 2.5rem;
            height: 2.5rem;
        }
        `})]}),Jr=({services:t})=>e.jsxs("section",{className:"py-5 bg-gray-100 w-full",id:"services",children:[e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"text-center mb-5 animate-fade-in",children:[e.jsx("h2",{className:"font-bold text-3xl mb-3 text-color",children:"Our Services"}),e.jsx("p",{className:"text-lg text-gray-600",children:"We offer comprehensive solutions to grow your business"}),e.jsx("div",{className:"divider mx-auto my-1 icon-bg",style:{width:"80px",height:"8px"}})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 px-2",children:t.map((a,s)=>e.jsx("div",{className:"animate-card",style:{animationDelay:`${s*.1}s`},children:e.jsx("div",{className:"card h-full shadow-sm mx-1 border border-blue-600 hover-effect",children:e.jsxs("div",{className:"card-body text-center p-4 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-bold text-color",children:a.title}),e.jsx("p",{className:"text-gray-600 flex-grow",children:a.description})]})})},s))})]}),e.jsx("style",{jsx:!0,children:`
        .animate-fade-in {
          animation: fadeIn 0.8s ease-out;
        }
        
        .animate-card {
          animation: slideUp 0.5s ease-out forwards;
          opacity: 0;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        .hover-effect {
          transition: all 0.3s ease;
          border-radius: 10px;
        }
        .hover-effect:hover {
          transform: translateY(-10px);
          box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1) !important;
        }
      `})]}),Zr=({clients:t})=>{const a="http://13.201.22.86:3000",s={dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,autoplay:!0,autoplaySpeed:2e3,responsive:[{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]};return e.jsx("section",{className:"py-5 w-full",id:"clients",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h2",{className:"text-center text-3xl font-bold text-color mb-5",children:"Our Clients"}),e.jsx(xs,{...s,children:t.map((r,l)=>e.jsx("div",{className:"px-2",children:e.jsx("div",{className:"border-0 h-full",children:e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("img",{src:`${a}${r.logoUrl}`,alt:r.name,className:"img-fluid  rounded",style:{maxHeight:"80px"}})})})},l))})]})})},el=({galleryItems:t})=>{const[a,s]=n.useState("images"),r=(t==null?void 0:t.filter(o=>(o==null?void 0:o.type)==="img"))||[],l=(t==null?void 0:t.filter(o=>(o==null?void 0:o.type)==="video"))||[],d="http://13.201.22.86:3000";return e.jsx("section",{className:"py-12 bg-gray-50 w-full",id:"gallery",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-color mb-3",children:"Our Creative Showcase"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Explore our collection of stunning visuals and engaging video content"}),e.jsx("div",{className:"flex justify-center mt-8 mb-8",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[e.jsxs("button",{type:"button",className:`px-6 py-2 text-sm font-medium rounded-l-lg flex items-center justify-center ${a==="images"?"bg-blue-600 text-white":"bg-white text-blue-600 border border-blue-600 hover:bg-blue-50"}`,onClick:()=>s("images"),"aria-current":a==="images"?"page":void 0,children:[e.jsx(hs,{className:"mr-2"})," Images (",r.length,")"]}),e.jsxs("button",{type:"button",className:`px-6 py-2 text-sm font-medium rounded-r-lg flex items-center justify-center ${a==="videos"?"bg-blue-600 text-white":"bg-white text-blue-600 border border-blue-600 hover:bg-blue-50"}`,onClick:()=>s("videos"),"aria-current":a==="videos"?"page":void 0,children:[e.jsx(ut,{className:"mr-2"})," Videos (",l.length,")"]})]})})]}),a==="images"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((o,h)=>e.jsx("div",{className:"group relative",children:e.jsxs("div",{className:"relative overflow-hidden rounded-xl shadow-md transition-transform duration-300 group-hover:shadow-lg group-hover:-translate-y-1 cursor-pointer h-64",style:{boxShadow:" rgba(3, 51, 107, 0.5) 0px 0px 0px 3px"},children:[e.jsx("img",{src:d+o.url,alt:o.title||"Gallery image",className:"w-full h-full object-cover transition-opacity duration-300 group-hover:opacity-90",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"text-white text-center p-4 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:o.title||"Untitled"}),o.description&&e.jsx("p",{className:"text-sm",children:o.description})]})})]})},`image-${h}`))}),a==="videos"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((o,h)=>e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"relative overflow-hidden rounded-xl shadow-md transition-transform duration-300 group-hover:shadow-lg group-hover:-translate-y-1 cursor-pointer h-64",style:{boxShadow:"rgba(3, 51, 107, 0.5) 0px 0px 0px 3px"},children:e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:o.url?e.jsx("video",{src:d+o.url,controls:!0,alt:o.title||"Video thumbnail",className:"w-full h-full object-cover",loading:"lazy"}):e.jsxs("div",{className:"text-gray-500 text-center p-4",children:[e.jsx(ut,{className:"text-4xl mx-auto mb-2"}),e.jsx("p",{children:"No thumbnail available"})]})})}),e.jsxs("div",{className:"p-4 bg-white",children:[e.jsx("h3",{className:"text-lg text-center font-semibold text-color",children:o.title||"Untitled Video"}),o.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:o.description})]})]},`video-${h}`))})]})})};function tl(){const{userName:t}=ps(),[a,s]=n.useState(null),[r,l]=n.useState(!0),[d,o]=n.useState(!1),[h,i]=n.useState("#3498db"),x="http://13.201.22.86:3000/api/v1";if(n.useEffect(()=>{(async()=>{var j;try{const u=await q.get(`${x}/portfolio/user-portfolio/${t}`);u!=null&&u.data?(s(u.data.data),i(u.data.data.theme),setTimeout(()=>{l(!1)},1e3)):o(!0)}catch(u){((j=u.response)==null?void 0:j.status)===404?o(!0):console.log("Failed To Find Portfolio",u)}})()},[x,t]),n.useEffect(()=>{document.documentElement.style.setProperty("--primary-color",h)},[h]),d)return e.jsx(at,{to:"/404"});if(r)return e.jsx("div",{className:"w-full h-screen  flex justify-center items-center",children:e.jsx("img",{src:"/loading.gif",alt:""})});const c=["#3498db","#2ecc71","#e74c3c","#f39c12","#9b59b6"];return e.jsxs("div",{className:"w-screen",children:[e.jsx("div",{className:"fixed top-0  w-full z-50  bg-white shadow-sm",children:e.jsx(Yr,{themes:c,onThemeChange:m=>i(m)})}),e.jsxs("div",{className:"pt-16",children:[" ",e.jsx(Hr,{businessInfo:a}),e.jsx(Xr,{businessInfo:a}),a.services.length>0&&e.jsx(Jr,{services:a.services}),a.clients.length>0&&e.jsx(Zr,{clients:a.clients}),a.gallery.length>0&&e.jsx(el,{galleryItems:a.gallery})]})]})}const pt=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl",children:"Page Not Found"})]}),Ye="http://13.201.22.86:3000/api/v1",sl=async()=>{var t,a;try{return(await q.get(`${Ye}/smsapi/get-smsapi`,{withCredentials:!0})).data}catch(s){throw((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed To Fetch Details"}},al=async t=>{var a,s;try{const{apiUrl:r,apiKey:l,senderId:d,channel:o,dcs:h}=t;return(await q.post(`${Ye}/smsapi/upsert-smsapi`,{apiUrl:r,apiKey:l,senderId:d,channel:o,dcs:h},{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed To Update/Save Data"}},rl=async(t=null)=>{var a,s;try{const r=t?"${apiUri}/templete/get-templete?templeteName=${templeteName}":`${Ye}/templete/get-templete`;return(await q.get(r,{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed To Fetch Details"}},ll=async t=>{var a,s;try{const{templeteName:r,templete:l}=t;return(await q.post(`${Ye}/templete/upsert-templete`,{templeteName:r,templete:l},{withCredentials:!0})).data}catch(r){throw((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to Update/Save Templete"}},nl=()=>me({queryKey:["smsapi"],queryFn:sl,staleTime:5*60*1e3,retry:!1}),ol=()=>{const t=Q();return H({mutationFn:a=>al(a),onSuccess:()=>{t.invalidateQueries(["smsapi"])}})},il=t=>me({queryKey:["templete",t],queryFn:()=>rl(t),staleTime:5*60*1e3,retry:!1}),dl=()=>{const t=Q();return H({mutationFn:a=>ll(a),onSuccess:()=>{t.invalidateQueries(["templete"])}})};function cl(){const[t,a]=n.useState({apiUrl:"",apiKey:"",senderId:"",dcs:"",channel:""}),s=X(),{data:r}=nl(),l=ol();n.useEffect(()=>{var h;((h=r==null?void 0:r.data)==null?void 0:h.length)>0?a({apiUrl:r.data[0].apiUrl,apiKey:r.data[0].apiKey,senderId:r.data[0].senderId,dcs:r.data[0].dcs,channel:r.data[0].channel}):a({apiUrl:"",apiKey:"",senderId:"",dcs:"",channel:""})},[r]);const d=h=>{const{name:i,value:x}=h.target;a(c=>({...c,[i]:x}))},o=()=>{if(t.apiUrl.trim()===""||t.apiKey.trim()===""||t.senderId.trim()===""||t.channel.trim()===""||t.dcs.trim()===""){s(p({message:"All Field are Required",type:"warn"}));return}l.mutate(t,{onSuccess:()=>{s(p({message:"SMS Configuration Updated Successfully"}))},onError:h=>s(p({message:h,type:"error"}))})};return e.jsxs("div",{className:"Form mt-8 p-6 max-w-3xl mx-auto shadow-md rounded-lg bg-white",children:[e.jsx("h1",{className:"text-3xl font-bold text-[#640D5F] text-center mb-4",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"SMS API Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"SMS API URL"}),e.jsx("input",{type:"text",name:"apiUrl",value:t.apiUrl,onChange:d,className:"w-full p-3 border rounded-lg mb-4"}),e.jsx("label",{className:"block font-semibold",children:"SMS API Key"}),e.jsx("input",{type:"text",name:"apiKey",value:t.apiKey,onChange:d,className:"w-full p-3 border rounded-lg mb-4"}),e.jsx("label",{className:"block font-semibold",children:"Sender ID"}),e.jsx("input",{type:"text",name:"senderId",value:t.senderId,onChange:d,className:"w-full p-3 border rounded-lg mb-4"}),e.jsx("label",{className:"block font-semibold",children:"Channel"}),e.jsx("input",{type:"text",value:t.channel,name:"channel",onChange:d,className:"w-full p-3 border rounded-lg mb-4"}),e.jsx("label",{className:"block font-semibold",children:"DCS"}),e.jsx("input",{type:"text",name:"dcs",value:t.dcs,onChange:d,className:"w-full p-3 border rounded-lg"}),e.jsx("div",{className:"flex justify-center w-full mt-6",children:e.jsx("button",{onClick:o,className:"w-fit   bg-[#98188f] text-white p-3 rounded-lg font-bold hover:bg-[#4e0c4a] transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.isPending,children:l.isPending?"Assigning SMS API...":"Assign SMS API"})})]})]})}function ml(){const t=X(),{data:a}=il(null),s=dl(),[r,l]=n.useState("register"),[d,o]=n.useState("");n.useEffect(()=>{var c;if(a!=null&&a.data&&Array.isArray(a==null?void 0:a.data)&&((c=a==null?void 0:a.data)==null?void 0:c.length)>0){const m=a==null?void 0:a.data.find(j=>j.templeteName===r);o(m?m.templete:"")}},[a,r]);const h=c=>{l(c.target.value)},i=c=>{o(c.target.value)},x=c=>{c.preventDefault();const u=({register:["${name}","${price}"],welcome:["${name}"],otp:["${otp}"]}[r]||[]).filter(y=>!d.includes(y));if(u.length>0){t(p({message:`Template must include: ${u.join(", ")}`,type:"error"}));return}const b={templeteName:r,templete:d};s.mutate(b,{onSuccess:()=>{t(p({message:"SMS Templete Added/Updated Successfully"}))},onError:y=>t(p({message:y,type:"error"}))})};return e.jsxs("div",{className:"Form mx-auto mt-10 p-6 rounded-lg shadow-lg max-w-4xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-[#640D5F]",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"Edit SMS Template"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsx("label",{className:"block text-[#4e0c4a] font-semibold",children:"Select Template Type"}),e.jsxs("select",{name:"type",value:r,onChange:h,className:"w-full p-3 border border-[#640D5F] rounded-md focus:outline-none focus:ring-1 focus:ring-[#640D5F] mb-4",children:[e.jsx("option",{value:"otp",children:"OTP"}),e.jsx("option",{value:"register",children:"Register"}),e.jsx("option",{value:"welcome",children:"Welcome"})]}),e.jsx("label",{className:"block text-[#4e0c4a] font-semibold",children:"Edit Template"}),e.jsx("textarea",{value:d,onChange:i,rows:"4",className:"w-full p-3 border border-[#640D5F] rounded-md focus:outline-none focus:ring-1 focus:ring-[#640D5F] mb-4"}),e.jsx("button",{type:"submit",className:"bg-[#640D5F] text-white py-2 px-4 rounded hover:bg-[#500a46] transition disabled:opacity-50 disabled:cursor-not-allowed ",disabled:s.isPending,children:s.isPending?"Updating Template":"Update Template"})]})]})}function ul(){const[t,a]=n.useState([]),{data:s,refetch:r}=Ds();return n.useEffect(()=>{(s==null?void 0:s.data.length)>0&&(a(s.data),console.log(s.data))},[s]),console.log(t),e.jsxs("div",{className:"mt-10 ",style:{padding:"20px",fontFamily:"Poppins, sans-serif",minHeight:"100vh"},children:[e.jsxs("div",{className:"flex justify-between mx-20 items-baseline",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-[#640D5F] mb-6",style:{textShadow:"3px 3px 10px rgba(100, 13, 95, 0.7)"},children:"OTP List"}),e.jsx("div",{className:"",children:e.jsx("button",{className:" w-fit p-1 rounded-2xl shadow-2xl border bg-[#ab19a3] text-white  cursor-pointer hover:bg-[#873483]",onClick:r,children:e.jsx(bs,{})})})]}),e.jsx("div",{style:{maxWidth:"1000px",margin:"0 auto",background:"#fff",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#ab19a3] text-white",children:[e.jsx("th",{style:{padding:"16px",textAlign:"center"},children:"Mobile Number"}),e.jsx("th",{style:{padding:"16px",textAlign:"center"},children:"OTP"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-4 text-center text-gray-500",children:"No OTP's available"})}):t==null?void 0:t.map(l=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee",transition:"background 0.3s ease",":hover":{backgroundColor:"#f9f9f9"}},children:[e.jsx("td",{style:{padding:"16px",color:"#555",textAlign:"center"},children:l.mobile}),e.jsx("td",{style:{padding:"16px",color:"#555",textAlign:"center"},children:l.otp})]},l._id))})]})})]})}const xl=()=>{const t=X(),a=gs(),[s,r]=n.useState(!0),l=async()=>{var d,o,h;try{const i=await As();i!=null&&i.data&&(t(Bt(i.data)),t(p({message:`Welcome Back ${i.data.role||"User"}`})))}catch(i){((d=i.response)==null?void 0:d.status)===401&&a.pathname!=="/login"&&window.location.replace("/login");const x=((h=(o=i.response)==null?void 0:o.data)==null?void 0:h.message)||i.message||"Something went wrong";t(p({message:x,type:"error"}))}finally{r(!1)}};return n.useEffect(()=>{a.pathname.startsWith("/portfolio")||a.pathname==="/404"?r(!1):l()},[]),s?e.jsx("div",{className:"w-screen h-screen flex justify-center items-center text-lg font-medium",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(fs,{children:[e.jsx(B,{element:e.jsx(jr,{}),children:e.jsx(B,{path:"/login",element:e.jsx(pr,{})})}),e.jsx(B,{path:"/portfolio/:userName",element:e.jsx(tl,{})}),e.jsx(B,{path:"/404",element:e.jsx(pt,{})}),e.jsx(B,{element:e.jsx(ge,{}),children:e.jsxs(B,{path:"/",element:e.jsx(fr,{}),children:[e.jsx(B,{path:"/",element:e.jsx(ka,{})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"business"}),children:e.jsxs(B,{path:"/business",children:[e.jsx(B,{path:"add",element:e.jsx(ha,{})}),e.jsx(B,{path:"plan",element:e.jsx(xt,{type:"business"})}),e.jsx(B,{path:"member",element:e.jsx(Oa,{})}),e.jsx(B,{path:"updation",element:e.jsx(pa,{})}),e.jsx(B,{path:"message",element:e.jsx(Ta,{})})]})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"politician"}),children:e.jsxs(B,{path:"/politician",children:[e.jsx(B,{path:"add",element:e.jsx(ia,{})}),e.jsx(B,{path:"plan",element:e.jsx(xt,{type:"political"})}),e.jsx(B,{path:"member",element:e.jsx(ma,{})}),e.jsx(B,{path:"updation",element:e.jsx(ua,{})}),e.jsx(B,{path:"message",element:e.jsx(Ma,{})})]})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"portfolio"}),children:e.jsxs(B,{path:"/portfolio",children:[e.jsx(B,{path:"add",element:e.jsx(Lr,{})}),e.jsx(B,{path:"manage",element:e.jsx(Kr,{})})]})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"staff"}),children:e.jsxs(B,{path:"/staff",children:[e.jsx(B,{path:"add",element:e.jsx(Ra,{})}),e.jsx(B,{path:"updation",element:e.jsx(La,{})})]})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"associate"}),children:e.jsxs(B,{path:"/associate",children:[e.jsx(B,{path:"add",element:e.jsx(qa,{})}),e.jsx(B,{path:"updation",element:e.jsx(_a,{})})]})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"account"}),children:e.jsxs(B,{path:"/account",children:[e.jsx(B,{path:"staff-user-details",element:e.jsx(or,{})}),e.jsx(B,{path:"staff-payout",element:e.jsx(rr,{})}),e.jsx(B,{path:"staff-payout-setting",element:e.jsx(lr,{})}),e.jsx(B,{path:"staff-history",element:e.jsx(nr,{})}),e.jsx(B,{path:"associate-user-details",element:e.jsx(Ba,{})}),e.jsx(B,{path:"associate-payout",element:e.jsx(Za,{})}),e.jsx(B,{path:"associate-payout-setting",element:e.jsx(er,{})}),e.jsx(B,{path:"associate-history",element:e.jsx(ar,{})}),e.jsx(B,{path:"reports",element:e.jsx(yr,{})})]})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"notification"}),children:e.jsx(B,{path:"/notification",element:e.jsx(xa,{})})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"configuration"}),children:e.jsxs(B,{path:"/configuration",children:[e.jsx(B,{path:"sms-configuration",element:e.jsx(cl,{})}),e.jsx(B,{path:"sms-templete",element:e.jsx(ml,{})}),e.jsx(B,{path:"otp",element:e.jsx(ul,{})})]})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"plan"}),children:e.jsx(B,{path:"/create-plan",element:e.jsx(va,{})})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"report"}),children:e.jsx(B,{path:"/report",element:e.jsx($a,{})})}),e.jsx(B,{element:e.jsx(ge,{allowedPermission:"enquiry"}),children:e.jsx(B,{path:"/enquiry",element:e.jsx(hr,{})})})]})}),e.jsx(B,{path:"*",element:e.jsx(pt,{})})]}),e.jsx(js,{position:"top-right",autoClose:3e3,theme:"light"})]})},hl=ys({reducer:{userReducer:Ua,toastReducer:la}}),pl=new Ns;ws.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(vs,{store:hl,children:e.jsx(Ss,{client:pl,children:e.jsx(Cs,{children:e.jsx(xl,{})})})})}));
